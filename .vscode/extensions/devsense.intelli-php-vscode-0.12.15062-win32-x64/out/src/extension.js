var ex=Object.create;var Kc=Object.defineProperty;var tx=Object.getOwnPropertyDescriptor;var rx=Object.getOwnPropertyNames;var Ly=Object.getPrototypeOf,nx=Object.prototype.hasOwnProperty;var ix=Reflect.get;var My=Math.pow;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),sx=(t,e)=>{for(var r in e)Kc(t,r,{get:e[r],enumerable:!0})},Fy=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rx(e))!nx.call(t,i)&&i!==r&&Kc(t,i,{get:()=>e[i],enumerable:!(n=tx(e,i))||n.enumerable});return t};var Os=(t,e,r)=>(r=t!=null?ex(Ly(t)):{},Fy(e||!t||!t.__esModule?Kc(r,"default",{value:t,enumerable:!0}):r,t)),ox=t=>Fy(Kc({},"__esModule",{value:!0}),t);var Xf=(t,e,r)=>ix(Ly(t),r,e);var Q=(t,e,r)=>new Promise((n,i)=>{var s=c=>{try{a(r.next(c))}catch(u){i(u)}},o=c=>{try{a(r.throw(c))}catch(u){i(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,o);a((r=r.apply(t,e)).next())});var Yf=y($y=>{var jy=require("url"),ax=require("child_process").spawn,As=require("fs");$y.XMLHttpRequest=function(){"use strict";var t=this,e=require("http"),r=require("https"),n,i,s={},o=!1,a={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},c={},u={},d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],p=["TRACE","TRACK","CONNECT"],m=!1,v=!1,b={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var P=function(D){return o||D&&d.indexOf(D.toLowerCase())===-1},j=function(D){return D&&p.indexOf(D)===-1};this.open=function(D,O,x,H,le){if(this.abort(),v=!1,!j(D))throw new Error("SecurityError: Request method not allowed");s={method:D,url:O.toString(),async:typeof x!="boolean"?!0:x,user:H||null,password:le||null},A(this.OPENED)},this.setDisableHeaderCheck=function(D){o=D},this.setRequestHeader=function(D,O){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!P(D)){console.warn('Refused to set unsafe header "'+D+'"');return}if(m)throw new Error("INVALID_STATE_ERR: send flag is true");D=u[D.toLowerCase()]||D,u[D.toLowerCase()]=D,c[D]=c[D]?c[D]+", "+O:O},this.getResponseHeader=function(D){return typeof D=="string"&&this.readyState>this.OPENED&&i&&i.headers&&i.headers[D.toLowerCase()]&&!v?i.headers[D.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||v)return"";var D="";for(var O in i.headers)O!=="set-cookie"&&O!=="set-cookie2"&&(D+=O+": "+i.headers[O]+`\r
`);return D.substr(0,D.length-2)},this.getRequestHeader=function(D){return typeof D=="string"&&u[D.toLowerCase()]?c[u[D.toLowerCase()]]:""},this.send=function(D){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(m)throw new Error("INVALID_STATE_ERR: send has already been called");var O=!1,x=!1,H=jy.parse(s.url),le;switch(H.protocol){case"https:":O=!0;case"http:":le=H.hostname;break;case"file:":x=!0;break;case void 0:case null:case"":le="localhost";break;default:throw new Error("Protocol not supported.")}if(x){if(s.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(s.async)As.readFile(H.pathname,"utf8",function(ct,Rt){ct?t.handleError(ct):(t.status=200,t.responseText=Rt,A(t.DONE))});else try{this.responseText=As.readFileSync(H.pathname,"utf8"),this.status=200,A(t.DONE)}catch(ct){this.handleError(ct)}return}var Ne=H.port||(O?443:80),Ke=H.pathname+(H.search?H.search:"");for(var Te in a)u[Te.toLowerCase()]||(c[Te]=a[Te]);if(c.Host=le,O&&Ne===443||Ne===80||(c.Host+=":"+H.port),s.user){typeof s.password>"u"&&(s.password="");var mt=new Buffer(s.user+":"+s.password);c.Authorization="Basic "+mt.toString("base64")}s.method==="GET"||s.method==="HEAD"?D=null:D?(c["Content-Length"]=Buffer.isBuffer(D)?D.length:Buffer.byteLength(D),c["Content-Type"]||(c["Content-Type"]="text/plain;charset=UTF-8")):s.method==="POST"&&(c["Content-Length"]=0);var ot={host:le,port:Ne,path:Ke,method:s.method,headers:c,agent:!1,withCredentials:t.withCredentials};if(v=!1,s.async){var At=O?r.request:e.request;m=!0,t.dispatchEvent("readystatechange");var Nt=function ct(Rt){if(i=Rt,i.statusCode===301||i.statusCode===302||i.statusCode===303||i.statusCode===307){s.url=i.headers.location;var zt=jy.parse(s.url);le=zt.hostname;var dn={hostname:zt.hostname,port:zt.port,path:zt.path,method:i.statusCode===303?"GET":s.method,headers:c,withCredentials:t.withCredentials};n=At(dn,ct).on("error",kt),n.end();return}i.setEncoding("utf8"),A(t.HEADERS_RECEIVED),t.status=i.statusCode,i.on("data",function(Cr){Cr&&(t.responseText+=Cr),m&&A(t.LOADING)}),i.on("end",function(){m&&(A(t.DONE),m=!1)}),i.on("error",function(Cr){t.handleError(Cr)})},kt=function(Rt){t.handleError(Rt)};n=At(ot,Nt).on("error",kt),D&&n.write(D),n.end(),t.dispatchEvent("loadstart")}else{var at=".node-xmlhttprequest-content-"+process.pid,Lt=".node-xmlhttprequest-sync-"+process.pid;As.writeFileSync(Lt,"","utf8");for(var Oe="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(O?"s":"")+".request;var options = "+JSON.stringify(ot)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+at+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+Lt+"');});response.on('error', function(error) {fs.writeFileSync('"+at+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+Lt+"');});}).on('error', function(error) {fs.writeFileSync('"+at+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+Lt+"');});"+(D?"req.write('"+JSON.stringify(D).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",wr=ax(process.argv[0],["-e",Oe]);As.existsSync(Lt););var He=JSON.parse(As.readFileSync(at,"utf8"));wr.stdin.end(),As.unlinkSync(at),He.err?t.handleError(He.err):(i=He.data,t.status=He.data.statusCode,t.responseText=He.data.text,A(t.DONE))}},this.handleError=function(D){this.status=0,this.statusText=D,this.responseText=D.stack,v=!0,A(this.DONE),this.dispatchEvent("error")},this.abort=function(){n&&(n.abort(),n=null),c=a,this.status=0,this.responseText="",this.responseXML="",v=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||m)&&this.readyState!==this.DONE&&(m=!1,A(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(D,O){D in b||(b[D]=[]),b[D].push(O)},this.removeEventListener=function(D,O){D in b&&(b[D]=b[D].filter(function(x){return x!==O}))},this.dispatchEvent=function(D){if(typeof t["on"+D]=="function"&&t["on"+D](),D in b)for(var O=0,x=b[D].length;O<x;O++)b[D][O].call(t)};var A=function(D){(D==t.LOADING||t.readyState!==D)&&(t.readyState=D,(s.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE&&!v&&(t.dispatchEvent("load"),t.dispatchEvent("loadend")))}}});var Jf=y((r8,By)=>{"use strict";var Hy=require("fs"),Qf;function cx(){try{return Hy.statSync("/.dockerenv"),!0}catch{return!1}}function ux(){try{return Hy.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}By.exports=()=>(Qf===void 0&&(Qf=cx()||ux()),Qf)});var zy=y((n8,Zf)=>{"use strict";var lx=require("os"),fx=require("fs"),Uy=Jf(),Wy=()=>{if(process.platform!=="linux")return!1;if(lx.release().toLowerCase().includes("microsoft"))return!Uy();try{return fx.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Uy():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Zf.exports=Wy:Zf.exports=Wy()});var Vy=y((i8,Ky)=>{"use strict";Ky.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var e_=y((s8,Zy)=>{var dx=require("path"),px=require("child_process"),{promises:Gc,constants:Jy}=require("fs"),Vc=zy(),hx=Jf(),td=Vy(),Gy=dx.join(__dirname,"xdg-open"),{platform:Ns,arch:Xy}=process,gx=()=>{try{return Gc.statSync("/run/.containerenv"),!0}catch{return!1}},ed;function mx(){return ed===void 0&&(ed=gx()||hx()),ed}var vx=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await Gc.access(r,Jy.F_OK),n=!0}catch{}if(!n)return t;let i=await Gc.readFile(r,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),Yy=async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},Xc=async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return Yy(t.app,a=>Xc({...t,app:a}));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return Yy(e,a=>Xc({...t,app:{name:a,arguments:r}}));let n,i=[],s={};if(Ns==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Ns==="win32"||Vc&&!mx()&&!e){let a=await vx();n=Vc?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Vc||(s.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(u=>`"\`"${u}\`""`),c.push(r.join(","))),t.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await Gc.access(Gy,Jy.X_OK),c=!0}catch{}n=process.versions.electron||Ns==="android"||a||!c?"xdg-open":Gy}r.length>0&&i.push(...r),t.wait||(s.stdio="ignore",s.detached=!0)}t.target&&i.push(t.target),Ns==="darwin"&&r.length>0&&i.push("--args",...r);let o=px.spawn(n,i,s);return t.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}a(o)})}):(o.unref(),o)},rd=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return Xc({...e,target:t})},yx=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return Xc({...e,app:{name:t,arguments:r}})};function Qy(t){if(typeof t=="string"||Array.isArray(t))return t;let{[Xy]:e}=t;if(!e)throw new Error(`${Xy} is not supported`);return e}function nd({[Ns]:t},{wsl:e}){if(e&&Vc)return Qy(e);if(!t)throw new Error(`${Ns} is not supported`);return Qy(t)}var Yc={};td(Yc,"chrome",()=>nd({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));td(Yc,"firefox",()=>nd({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));td(Yc,"edge",()=>nd({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));rd.apps=Yc;rd.openApp=yx;Zy.exports=rd});var Zt=y((u8,ks)=>{var c8=require("crypto");ks.exports.linebrk=function(t,e){for(var r="",n=0;n+e<t.length;)r+=t.substring(n,n+e)+`
`,n+=e;return r+t.substring(n,t.length)};ks.exports.detectEnvironment=function(){return typeof window<"u"&&window&&!(process&&process.title==="node")?"browser":"node"};ks.exports.get32IntFromBuffer=function(t,e){e=e||0;var r=0;if((r=t.length-e)>0){if(r>=4)return t.readUIntBE(e,r);for(var n=0,i=e+r,s=0;i>e;i--,s+=2)n+=t[i-1]*Math.pow(16,s);return n}else return NaN};ks.exports._={isObject:function(t){var e=typeof t;return!!t&&(e=="object"||e=="function")},isString:function(t){return typeof t=="string"||t instanceof String},isNumber:function(t){return typeof t=="number"||!isNaN(parseFloat(t))&&isFinite(t)},omit:function(t,e){var r={};for(var n in t)!t.hasOwnProperty(n)||n===e||(r[n]=t[n]);return r}};ks.exports.trimSurroundingText=function(t,e,r){var n=0,i=t.length,s=t.indexOf(e);s>=0&&(n=s+e.length);var o=t.indexOf(r,s);return o>=0&&(i=o),t.substring(n,i)}});var Mi=y((f8,l_)=>{var _x=require("crypto"),Ex=Zt()._,Ls,wx=0xdeadbeefcafe,l8=(wx&16777215)==15715070;function N(t,e){t!=null&&(typeof t=="number"?this.fromNumber(t,e):Buffer.isBuffer(t)?this.fromBuffer(t):e==null&&typeof t!="string"?this.fromByteArray(t):this.fromString(t,e))}function ge(){return new N(null)}function Cx(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this[t]&16383,u=this[t++]>>14,d=a*c+u*o;c=o*c+((d&16383)<<14)+r[n]+i,i=(c>>28)+(d>>14)+a*u,r[n++]=c&268435455}return i}N.prototype.am=Cx;Ls=28;N.prototype.DB=Ls;N.prototype.DM=(1<<Ls)-1;N.prototype.DV=1<<Ls;var ad=52;N.prototype.FV=Math.pow(2,ad);N.prototype.F1=ad-Ls;N.prototype.F2=2*Ls-ad;var Sx="0123456789abcdefghijklmnopqrstuvwxyz",Qc=new Array,Ms,Lr;Ms="0".charCodeAt(0);for(Lr=0;Lr<=9;++Lr)Qc[Ms++]=Lr;Ms="a".charCodeAt(0);for(Lr=10;Lr<36;++Lr)Qc[Ms++]=Lr;Ms="A".charCodeAt(0);for(Lr=10;Lr<36;++Lr)Qc[Ms++]=Lr;function od(t){return Sx.charAt(t)}function o_(t,e){var r=Qc[t.charCodeAt(e)];return r??-1}function bx(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function Tx(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function ci(t){var e=ge();return e.fromInt(t),e}function Rx(t,e,r){var n;switch(e){case 2:n=1;break;case 4:n=2;break;case 8:n=3;break;case 16:n=4;break;case 32:n=5;break;case 256:n=8;break;default:this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,s=!1,o=0;--i>=0;){var a=n==8?t[i]&255:o_(t,i);if(a<0){t.charAt(i)=="-"&&(s=!0);continue}s=!1,o===0?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}!r&&n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&N.ZERO.subTo(this,this)}function Dx(t,e){this.fromString(t,256,e)}function Ix(t){this.fromString(t,256,!0)}function Px(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function xx(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=od(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=od(n));return i?s:"0"}function qx(){var t=ge();return N.ZERO.subTo(this,t),t}function Ox(){return this.s<0?this.negate():this}function Ax(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this[r]-t[r])!=0)return e;return 0}function Jc(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Nx(){return this.t<=0?0:this.DB*(this.t-1)+Jc(this[this.t-1]^this.s&this.DM)}function kx(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function Lx(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Mx(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e[a+s+1]=this[a]>>n|o,o=(this[a]&i)<<r;for(a=s-1;a>=0;--a)e[a]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function Fx(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function jx(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()}function $x(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&N.ZERO.subTo(e,e)}function Hx(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function Bx(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=ge());var s=ge(),o=this.s,a=t.s,c=this.DB-Jc(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,d=s[u-1];if(d!==0){var p=d*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),m=this.FV/p,v=(1<<this.F1)/p,b=1<<this.F2,P=r.t,j=P-u,A=e??ge();for(s.dlShiftTo(j,A),r.compareTo(A)>=0&&(r[r.t++]=1,r.subTo(A,r)),N.ONE.dlShiftTo(u,A),A.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--j>=0;){var D=r[--P]==d?this.DM:Math.floor(r[P]*m+(r[P-1]+b)*v);if((r[P]+=s.am(0,D,r,j,0,u))<D)for(s.dlShiftTo(j,A),r.subTo(A,r);r[P]<--D;)r.subTo(A,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&N.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&N.ZERO.subTo(r,r)}}}function Ux(t){var e=ge();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(N.ZERO)>0&&t.subTo(e,e),e}function ki(t){this.m=t}function Wx(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function zx(t){return t}function Kx(t){t.divRemTo(this.m,null,t)}function Vx(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Gx(t,e){t.squareTo(e),this.reduce(e)}ki.prototype.convert=Wx;ki.prototype.revert=zx;ki.prototype.reduce=Kx;ki.prototype.mulTo=Vx;ki.prototype.sqrTo=Gx;function Xx(){if(this.t<1)return 0;var t=this[0];if((t&1)===0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Li(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Yx(t){var e=ge();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(N.ZERO)>0&&this.m.subTo(e,e),e}function Qx(t){var e=ge();return t.copyTo(e),this.reduce(e),e}function Jx(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t[e]&32767,n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Zx(t,e){t.squareTo(e),this.reduce(e)}function eq(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Li.prototype.convert=Yx;Li.prototype.revert=Qx;Li.prototype.reduce=Jx;Li.prototype.mulTo=eq;Li.prototype.sqrTo=Zx;function tq(){return(this.t>0?this[0]&1:this.s)===0}function rq(t,e){if(t>4294967295||t<1)return N.ONE;var r=ge(),n=ge(),i=e.convert(this),s=Jc(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function nq(t,e){var r;return t<256||e.isEven()?r=new ki(e):r=new Li(e),this.exp(t,r)}function iq(){var t=ge();return this.copyTo(t),t}function sq(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t===0)return-1}else{if(this.t==1)return this[0];if(this.t===0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function oq(){return this.t==0?this.s:this[0]<<24>>24}function aq(){return this.t==0?this.s:this[0]<<16>>16}function cq(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function uq(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function lq(t){if(t==null&&(t=10),this.signum()===0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=ci(r),i=ge(),s=ge(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function fq(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=o_(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()===0&&(i=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&N.ZERO.subTo(this,this)}function dq(t,e){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t),this.testBit(t-1)||this.bitwiseTo(N.ONE.shiftLeft(t-1),cd,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(N.ONE.shiftLeft(t-1),this);else{var r=_x.randomBytes((t>>3)+1),n=t&7;n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromByteArray(r)}}function pq(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i===0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function hq(t){var e=Buffer.from(this.toByteArray());if(t===!0&&e[0]===0)e=e.slice(1);else if(Ex.isNumber(t)){if(e.length>t){for(var r=0;r<e.length-t;r++)if(e[r]!==0)return null;return e.slice(e.length-t)}else if(e.length<t){var n=Buffer.alloc(t);return n.fill(0,0,t-e.length),e.copy(n,t-e.length),n}}return e}function gq(t){return this.compareTo(t)==0}function mq(t){return this.compareTo(t)<0?this:t}function vq(t){return this.compareTo(t)>0?this:t}function yq(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function _q(t,e){return t&e}function Eq(t){var e=ge();return this.bitwiseTo(t,_q,e),e}function cd(t,e){return t|e}function wq(t){var e=ge();return this.bitwiseTo(t,cd,e),e}function a_(t,e){return t^e}function Cq(t){var e=ge();return this.bitwiseTo(t,a_,e),e}function c_(t,e){return t&~e}function Sq(t){var e=ge();return this.bitwiseTo(t,c_,e),e}function bq(){for(var t=ge(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Tq(t){var e=ge();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Rq(t){var e=ge();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Dq(t){if(t===0)return-1;var e=0;return(t&65535)===0&&(t>>=16,e+=16),(t&255)===0&&(t>>=8,e+=8),(t&15)===0&&(t>>=4,e+=4),(t&3)===0&&(t>>=2,e+=2),(t&1)===0&&++e,e}function Iq(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Dq(this[t]);return this.s<0?this.t*this.DB:-1}function Pq(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function xq(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Pq(this[r]^e);return t}function qq(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function Oq(t,e){var r=N.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Aq(t){return this.changeBit(t,cd)}function Nq(t){return this.changeBit(t,c_)}function kq(t){return this.changeBit(t,a_)}function Lq(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()}function Mq(t){var e=ge();return this.addTo(t,e),e}function Fq(t){var e=ge();return this.subTo(t,e),e}function jq(t){var e=ge();return this.multiplyTo(t,e),e}function $q(){var t=ge();return this.squareTo(t),t}function Hq(t){var e=ge();return this.divRemTo(t,e,null),e}function Bq(t){var e=ge();return this.divRemTo(t,null,e),e}function Uq(t){var e=ge(),r=ge();return this.divRemTo(t,e,r),new Array(e,r)}function Wq(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function zq(t,e){if(t!==0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function oa(){}function u_(t){return t}function Kq(t,e,r){t.multiplyTo(e,r)}function Vq(t,e){t.squareTo(e)}oa.prototype.convert=u_;oa.prototype.revert=u_;oa.prototype.mulTo=Kq;oa.prototype.sqrTo=Vq;function Gq(t){return this.exp(t,new oa)}function Xq(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()}function Yq(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Fs(t){this.r2=ge(),this.q3=ge(),N.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Qq(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ge();return t.copyTo(e),this.reduce(e),e}function Jq(t){return t}function Zq(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function eO(t,e){t.squareTo(e),this.reduce(e)}function tO(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Fs.prototype.convert=Qq;Fs.prototype.revert=Jq;Fs.prototype.reduce=Zq;Fs.prototype.mulTo=tO;Fs.prototype.sqrTo=eO;function rO(t,e){var r=t.bitLength(),n,i=ci(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new ki(e):e.isEven()?s=new Fs(e):s=new Li(e);var o=new Array,a=3,c=n-1,u=(1<<n)-1;if(o[1]=s.convert(this),n>1){var d=ge();for(s.sqrTo(o[1],d);a<=u;)o[a]=ge(),s.mulTo(d,o[a-2],o[a]),a+=2}var p=t.t-1,m,v=!0,b=ge(),P;for(r=Jc(t[p])-1;p>=0;){for(r>=c?m=t[p]>>r-c&u:(m=(t[p]&(1<<r+1)-1)<<c-r,p>0&&(m|=t[p-1]>>this.DB+r-c)),a=n;(m&1)===0;)m>>=1,--a;if((r-=a)<0&&(r+=this.DB,--p),v)o[m].copyTo(i),v=!1;else{for(;a>1;)s.sqrTo(i,b),s.sqrTo(b,i),a-=2;a>0?s.sqrTo(i,b):(P=i,i=b,b=P),s.mulTo(b,o[m],i)}for(;p>=0&&(t[p]&1<<r)===0;)s.sqrTo(i,b),P=i,i=b,b=P,--r<0&&(r=this.DB-1,--p)}return s.revert(i)}function nO(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function iO(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e===0)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r}function sO(t){var e=t.isEven();if(this.isEven()&&e||t.signum()===0)return N.ZERO;for(var r=t.clone(),n=this.clone(),i=ci(1),s=ci(0),o=ci(0),a=ci(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(N.ONE)!=0)return N.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var er=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],oO=(1<<26)/er[er.length-1];function aO(t){var e,r=this.abs();if(r.t==1&&r[0]<=er[er.length-1]){for(e=0;e<er.length;++e)if(r[0]==er[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<er.length;){for(var n=er[e],i=e+1;i<er.length&&n<oO;)n*=er[i++];for(n=r.modInt(n);e<i;)if(n%er[e++]===0)return!1}return r.millerRabin(t)}function cO(t){var e=this.subtract(N.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);t=t+1>>1,t>er.length&&(t=er.length);for(var i=ge(),s=0;s<t;++s){i.fromInt(er[Math.floor(Math.random()*er.length)]);var o=i.modPow(n,this);if(o.compareTo(N.ONE)!=0&&o.compareTo(e)!=0){for(var a=1;a++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(N.ONE)===0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}N.prototype.copyTo=bx;N.prototype.fromInt=Tx;N.prototype.fromString=Rx;N.prototype.fromByteArray=Dx;N.prototype.fromBuffer=Ix;N.prototype.clamp=Px;N.prototype.dlShiftTo=kx;N.prototype.drShiftTo=Lx;N.prototype.lShiftTo=Mx;N.prototype.rShiftTo=Fx;N.prototype.subTo=jx;N.prototype.multiplyTo=$x;N.prototype.squareTo=Hx;N.prototype.divRemTo=Bx;N.prototype.invDigit=Xx;N.prototype.isEven=tq;N.prototype.exp=rq;N.prototype.chunkSize=cq;N.prototype.toRadix=lq;N.prototype.fromRadix=fq;N.prototype.fromNumber=dq;N.prototype.bitwiseTo=yq;N.prototype.changeBit=Oq;N.prototype.addTo=Lq;N.prototype.dMultiply=Wq;N.prototype.dAddOffset=zq;N.prototype.multiplyLowerTo=Xq;N.prototype.multiplyUpperTo=Yq;N.prototype.modInt=iO;N.prototype.millerRabin=cO;N.prototype.toString=xx;N.prototype.negate=qx;N.prototype.abs=Ox;N.prototype.compareTo=Ax;N.prototype.bitLength=Nx;N.prototype.mod=Ux;N.prototype.modPowInt=nq;N.prototype.clone=iq;N.prototype.intValue=sq;N.prototype.byteValue=oq;N.prototype.shortValue=aq;N.prototype.signum=uq;N.prototype.toByteArray=pq;N.prototype.toBuffer=hq;N.prototype.equals=gq;N.prototype.min=mq;N.prototype.max=vq;N.prototype.and=Eq;N.prototype.or=wq;N.prototype.xor=Cq;N.prototype.andNot=Sq;N.prototype.not=bq;N.prototype.shiftLeft=Tq;N.prototype.shiftRight=Rq;N.prototype.getLowestSetBit=Iq;N.prototype.bitCount=xq;N.prototype.testBit=qq;N.prototype.setBit=Aq;N.prototype.clearBit=Nq;N.prototype.flipBit=kq;N.prototype.add=Mq;N.prototype.subtract=Fq;N.prototype.multiply=jq;N.prototype.divide=Hq;N.prototype.remainder=Bq;N.prototype.divideAndRemainder=Uq;N.prototype.modPow=rO;N.prototype.modInverse=sO;N.prototype.pow=Gq;N.prototype.gcd=nO;N.prototype.isProbablePrime=aO;N.int2char=od;N.ZERO=ci(0);N.ONE=ci(1);N.prototype.square=$q;l_.exports=N});var h_=y((d8,ud)=>{var f_=Mi(),js=require("crypto"),Zc=require("constants"),uO={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},d_={ripemd160:"rmd160"},p_="sha256";ud.exports={isEncryption:!0,isSignature:!0};ud.exports.makeScheme=function(t,e){function r(n,i){this.key=n,this.options=i}return r.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Zc.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},r.prototype.encPad=function(n,i){i=i||{};var s;if(n.length>this.key.maxMessageLength)throw new Error("Message too long for RSA (n="+this.key.encryptedDataLength+", l="+n.length+")");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Zc.RSA_NO_PADDING)return s=Buffer.alloc(this.key.maxMessageLength-n.length),s.fill(0),Buffer.concat([s,n]);if(i.type===1)return s=Buffer.alloc(this.key.encryptedDataLength-n.length-1),s.fill(255,0,s.length-1),s[0]=1,s[s.length-1]=0,Buffer.concat([s,n]);s=Buffer.alloc(this.key.encryptedDataLength-n.length),s[0]=0,s[1]=2;for(var o=js.randomBytes(s.length-3),a=0;a<o.length;a++){for(var c=o[a];c===0;)c=js.randomBytes(1)[0];s[a+2]=c}return s[s.length-1]=0,Buffer.concat([s,n])},r.prototype.encUnPad=function(n,i){i=i||{};var s=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Zc.RSA_NO_PADDING){var o;return typeof n.lastIndexOf=="function"?o=n.slice(n.lastIndexOf("\0")+1,n.length):o=n.slice(String.prototype.lastIndexOf.call(n,"\0")+1,n.length),o}if(n.length<4)return null;if(i.type===1){if(n[0]!==0||n[1]!==1)return null;for(s=3;n[s]!==0;)if(n[s]!=255||++s>=n.length)return null}else{if(n[0]!==0||n[1]!==2)return null;for(s=3;n[s]!==0;)if(++s>=n.length)return null}return n.slice(s+1,n.length)},r.prototype.sign=function(n){var i=this.options.signingSchemeOptions.hash||p_;if(this.options.environment==="browser"){i=d_[i]||i;var s=js.createHash(i);s.update(n);var o=this.pkcs1pad(s.digest(),i),a=this.key.$doPrivate(new f_(o)).toBuffer(this.key.encryptedDataLength);return a}else{var c=js.createSign("RSA-"+i.toUpperCase());return c.update(n),c.sign(this.options.rsaUtils.exportKey("private"))}},r.prototype.verify=function(n,i,s){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Zc.RSA_NO_PADDING)return!1;var o=this.options.signingSchemeOptions.hash||p_;if(this.options.environment==="browser"){o=d_[o]||o,s&&(i=Buffer.from(i,s));var a=js.createHash(o);a.update(n);var c=this.pkcs1pad(a.digest(),o),u=this.key.$doPublic(new f_(i));return u.toBuffer().toString("hex")==c.toString("hex")}else{var d=js.createVerify("RSA-"+o.toUpperCase());return d.update(n),d.verify(this.options.rsaUtils.exportKey("public"),i,s)}},r.prototype.pkcs0pad=function(n){var i=Buffer.alloc(this.key.maxMessageLength-n.length);return i.fill(0),Buffer.concat([i,n])},r.prototype.pkcs0unpad=function(n){var i;return typeof n.lastIndexOf=="function"?i=n.slice(n.lastIndexOf("\0")+1,n.length):i=n.slice(String.prototype.lastIndexOf.call(n,"\0")+1,n.length),i},r.prototype.pkcs1pad=function(n,i){var s=uO[i];if(!s)throw Error("Unsupported hash algorithm");var o=Buffer.concat([s,n]);if(o.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+i+")");var a=Buffer.alloc(this.key.encryptedDataLength-o.length-1);a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0;var c=Buffer.concat([a,o]);return c},new r(t,e)}});var g_=y((h8,Yr)=>{var p8=Mi(),eu=require("crypto");Yr.exports={isEncryption:!0,isSignature:!1};Yr.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};var tu="sha1";Yr.exports.eme_oaep_mgf1=function(t,e,r){r=r||tu;for(var n=Yr.exports.digestLength[r],i=Math.ceil(e/n),s=Buffer.alloc(n*i),o=Buffer.alloc(4),a=0;a<i;++a){var c=eu.createHash(r);c.update(t),o.writeUInt32BE(a,0),c.update(o),c.digest().copy(s,a*n)}return s.slice(0,e)};Yr.exports.makeScheme=function(t,e){function r(n,i){this.key=n,this.options=i}return r.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*Yr.exports.digestLength[this.options.encryptionSchemeOptions.hash||tu]-2},r.prototype.encPad=function(n){var i=this.options.encryptionSchemeOptions.hash||tu,s=this.options.encryptionSchemeOptions.mgf||Yr.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=this.key.encryptedDataLength,c=Yr.exports.digestLength[i];if(n.length>a-2*c-2)throw new Error("Message is too long to encode into an encoded message with a length of "+a+" bytes, increaseemLen to fix this error (minimum value for given parameters and options: "+(a-2*c-2)+")");var u=eu.createHash(i);u.update(o),u=u.digest();var d=Buffer.alloc(a-n.length-2*c-1);d.fill(0),d[d.length-1]=1;for(var p=Buffer.concat([u,d,n]),m=eu.randomBytes(c),v=s(m,p.length,i),b=0;b<p.length;b++)p[b]^=v[b];for(v=s(p,c,i),b=0;b<m.length;b++)m[b]^=v[b];var P=Buffer.alloc(1+m.length+p.length);return P[0]=0,m.copy(P,1),p.copy(P,1+m.length),P},r.prototype.encUnPad=function(n){var i=this.options.encryptionSchemeOptions.hash||tu,s=this.options.encryptionSchemeOptions.mgf||Yr.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=Yr.exports.digestLength[i];if(n.length<2*a+2)throw new Error("Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message");for(var c=n.slice(1,a+1),u=n.slice(1+a),d=s(u,a,i),p=0;p<c.length;p++)c[p]^=d[p];for(d=s(c,u.length,i),p=0;p<u.length;p++)u[p]^=d[p];var m=eu.createHash(i);m.update(o),m=m.digest();var v=u.slice(0,a);if(v.toString("hex")!=m.toString("hex"))throw new Error("Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.");for(p=a;u[p++]===0&&p<u.length;);if(u[p-1]!=1)throw new Error("Error decoding message, there is no padding message separator byte");return u.slice(p)},new r(t,e)}});var y_=y((g8,ld)=>{var m_=Mi(),aa=require("crypto");ld.exports={isEncryption:!1,isSignature:!0};var ru="sha1",v_=20;ld.exports.makeScheme=function(t,e){var r=Fi().pkcs1_oaep;function n(i,s){this.key=i,this.options=s}return n.prototype.sign=function(i){var s=aa.createHash(this.options.signingSchemeOptions.hash||ru);s.update(i);var o=this.emsa_pss_encode(s.digest(),this.key.keySize-1);return this.key.$doPrivate(new m_(o)).toBuffer(this.key.encryptedDataLength)},n.prototype.verify=function(i,s,o){o&&(s=Buffer.from(s,o)),s=new m_(s);var a=Math.ceil((this.key.keySize-1)/8),c=this.key.$doPublic(s).toBuffer(a),u=aa.createHash(this.options.signingSchemeOptions.hash||ru);return u.update(i),this.emsa_pss_verify(u.digest(),c,this.key.keySize-1)},n.prototype.emsa_pss_encode=function(i,s){var o=this.options.signingSchemeOptions.hash||ru,a=this.options.signingSchemeOptions.mgf||r.eme_oaep_mgf1,c=this.options.signingSchemeOptions.saltLength||v_,u=r.digestLength[o],d=Math.ceil(s/8);if(d<u+c+2)throw new Error("Output length passed to emBits("+s+") is too small for the options specified("+o+", "+c+"). To fix this issue increase the value of emBits. (minimum size: "+(8*u+8*c+9)+")");var p=aa.randomBytes(c),m=Buffer.alloc(8+u+c);m.fill(0,0,8),i.copy(m,8),p.copy(m,8+i.length);var v=aa.createHash(o);v.update(m),v=v.digest();var b=Buffer.alloc(d-p.length-u-2);b.fill(0);var P=Buffer.alloc(b.length+1+p.length);b.copy(P),P[b.length]=1,p.copy(P,b.length+1);for(var j=a(v,P.length,o),A=Buffer.alloc(P.length),D=0;D<j.length;D++)A[D]=P[D]^j[D];var O=8*d-s,x=255^255>>8-O<<8-O;A[0]=A[0]&x;var H=Buffer.alloc(A.length+v.length+1);return A.copy(H,0),v.copy(H,A.length),H[H.length-1]=188,H},n.prototype.emsa_pss_verify=function(i,s,o){var a=this.options.signingSchemeOptions.hash||ru,c=this.options.signingSchemeOptions.mgf||r.eme_oaep_mgf1,u=this.options.signingSchemeOptions.saltLength||v_,d=r.digestLength[a],p=Math.ceil(o/8);if(p<d+u+2||s[s.length-1]!=188)return!1;var m=Buffer.alloc(p-d-1);s.copy(m,0,0,p-d-1);for(var v=0,b=0,P=8*p-o;b<P;b++)v|=1<<7-b;if((m[0]&v)!==0)return!1;var j=s.slice(p-d-1,p-1),A=c(j,m.length,a);for(b=0;b<m.length;b++)m[b]^=A[b];for(P=8*p-o,v=255^255>>8-P<<8-P,m[0]=m[0]&v,b=0;m[b]===0&&b<m.length;b++);if(m[b]!=1)return!1;var D=m.slice(m.length-u),O=Buffer.alloc(8+d+u);O.fill(0,0,8),i.copy(O,8),D.copy(O,8+i.length);var x=aa.createHash(a);return x.update(O),x=x.digest(),j.toString("hex")===x.toString("hex")},new n(t,e)}});var Fi=y((m8,$s)=>{$s.exports={pkcs1:h_(),pkcs1_oaep:g_(),pss:y_(),isEncryption:function(t){return $s.exports[t]&&$s.exports[t].isEncryption},isSignature:function(t){return $s.exports[t]&&$s.exports[t].isSignature}}});var dd=y((v8,__)=>{var fd=Mi(),lO=Fi();__.exports=function(t,e){var r=lO.pkcs1.makeScheme(t,e);return{encrypt:function(n,i){var s,o;return i?(s=new fd(r.encPad(n,{type:1})),o=t.$doPrivate(s)):(s=new fd(t.encryptionScheme.encPad(n)),o=t.$doPublic(s)),o.toBuffer(t.encryptedDataLength)},decrypt:function(n,i){var s,o=new fd(n);return i?(s=t.$doPublic(o),r.encUnPad(s.toBuffer(t.encryptedDataLength),{type:1})):(s=t.$doPrivate(o),t.encryptionScheme.encUnPad(s.toBuffer(t.encryptedDataLength)))}}}});var w_=y((y8,E_)=>{var nu=require("crypto"),ui=require("constants"),fO=Fi();E_.exports=function(t,e){var r=fO.pkcs1.makeScheme(t,e);return{encrypt:function(n,i){var s;if(i)return s=ui.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),nu.privateEncrypt({key:e.rsaUtils.exportKey("private"),padding:s},n);s=ui.RSA_PKCS1_OAEP_PADDING,e.encryptionScheme==="pkcs1"&&(s=ui.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var o=n;return s===ui.RSA_NO_PADDING&&(o=r.pkcs0pad(n)),nu.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:s},o)},decrypt:function(n,i){var s;if(i)return s=ui.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),nu.publicDecrypt({key:e.rsaUtils.exportKey("public"),padding:s},n);s=ui.RSA_PKCS1_OAEP_PADDING,e.encryptionScheme==="pkcs1"&&(s=ui.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var o=nu.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:s},n);return s===ui.RSA_NO_PADDING?r.pkcs0unpad(o):o}}}});var b_=y((_8,S_)=>{var C_=require("crypto"),Hs=require("constants"),dO=Fi();S_.exports=function(t,e){var r=dd()(t,e),n=dO.pkcs1.makeScheme(t,e);return{encrypt:function(i,s){if(s)return r.encrypt(i,s);var o=Hs.RSA_PKCS1_OAEP_PADDING;e.encryptionScheme==="pkcs1"&&(o=Hs.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=i;return o===Hs.RSA_NO_PADDING&&(a=n.pkcs0pad(i)),C_.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:o},a)},decrypt:function(i,s){if(s)return r.decrypt(i,s);var o=Hs.RSA_PKCS1_OAEP_PADDING;e.encryptionScheme==="pkcs1"&&(o=Hs.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=C_.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:o},i);return o===Hs.RSA_NO_PADDING?n.pkcs0unpad(a):a}}}});var R_=y((E8,T_)=>{var iu=require("crypto");T_.exports={getEngine:function(t,e){var r=dd();return e.environment==="node"&&typeof iu.publicEncrypt=="function"&&typeof iu.privateDecrypt=="function"&&(typeof iu.privateEncrypt=="function"&&typeof iu.publicDecrypt=="function"?r=w_():r=b_()),r(t,e)}}});var q_=y((P_,x_)=>{var su=Zt()._,w8=require("crypto"),bt=Mi(),D_=Zt(),I_=Fi(),pO=R_();P_.BigInteger=bt;x_.exports.Key=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.setOptions=function(e){var r=I_[e.signingScheme],n=I_[e.encryptionScheme];r===n?this.signingScheme=this.encryptionScheme=n.makeScheme(this,e):(this.encryptionScheme=n.makeScheme(this,e),this.signingScheme=r.makeScheme(this,e)),this.encryptEngine=pO.getEngine(this,e)},t.prototype.generate=function(e,r){var n=e>>1;this.e=parseInt(r,16);for(var i=new bt(r,16);;){for(;this.p=new bt(e-n,1),!(this.p.subtract(bt.ONE).gcd(i).compareTo(bt.ONE)===0&&this.p.isProbablePrime(10)););for(;this.q=new bt(n,1),!(this.q.subtract(bt.ONE).gcd(i).compareTo(bt.ONE)===0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(bt.ONE),a=this.q.subtract(bt.ONE),c=o.multiply(a);if(c.gcd(i).compareTo(bt.ONE)===0){if(this.n=this.p.multiply(this.q),this.n.bitLength()<e)continue;this.d=i.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},t.prototype.setPrivate=function(e,r,n,i,s,o,a,c){if(e&&r&&n&&e.length>0&&(su.isNumber(r)||r.length>0)&&n.length>0)this.n=new bt(e),this.e=su.isNumber(r)?r:D_.get32IntFromBuffer(r,0),this.d=new bt(n),i&&s&&o&&a&&c&&(this.p=new bt(i),this.q=new bt(s),this.dmp1=new bt(o),this.dmq1=new bt(a),this.coeff=new bt(c)),this.$$recalculateCache();else throw Error("Invalid RSA private key")},t.prototype.setPublic=function(e,r){if(e&&r&&e.length>0&&(su.isNumber(r)||r.length>0))this.n=new bt(e),this.e=su.isNumber(r)?r:D_.get32IntFromBuffer(r,0),this.$$recalculateCache();else throw Error("Invalid RSA public key")},t.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var r=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(n)<0;)r=r.add(this.p);return r.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},t.prototype.$doPublic=function(e){return e.modPowInt(this.e,this.n)},t.prototype.encrypt=function(e,r){var n=[],i=[],s=e.length,o=Math.ceil(s/this.maxMessageLength)||1,a=Math.ceil(s/o||1);if(o==1)n.push(e);else for(var c=0;c<o;c++)n.push(e.slice(c*a,(c+1)*a));for(var u=0;u<n.length;u++)i.push(this.encryptEngine.encrypt(n[u],r));return Buffer.concat(i)},t.prototype.decrypt=function(e,r){if(e.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var n=[],i=0,s=0,o=e.length/this.encryptedDataLength,a=0;a<o;a++)i=a*this.encryptedDataLength,s=i+this.encryptedDataLength,n.push(this.encryptEngine.decrypt(e.slice(i,Math.min(s,e.length)),r));return Buffer.concat(n)},t.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},t.prototype.verify=function(e,r,n){return this.signingScheme.verify.apply(this.signingScheme,arguments)},t.prototype.isPrivate=function(){return this.n&&this.e&&this.d&&!0||!1},t.prototype.isPublic=function(e){return this.n&&this.e&&!(e&&this.d)||!1},Object.defineProperty(t.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(t.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(t.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),t.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},t}()});var ou=y((C8,O_)=>{O_.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}});var au=y((S8,A_)=>{A_.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}});var pd=y((b8,N_)=>{"use strict";var cu=require("buffer"),Bs=cu.Buffer,Mr={},Fr;for(Fr in cu)!cu.hasOwnProperty(Fr)||Fr==="SlowBuffer"||Fr==="Buffer"||(Mr[Fr]=cu[Fr]);var Us=Mr.Buffer={};for(Fr in Bs)!Bs.hasOwnProperty(Fr)||Fr==="allocUnsafe"||Fr==="allocUnsafeSlow"||(Us[Fr]=Bs[Fr]);Mr.Buffer.prototype=Bs.prototype;(!Us.from||Us.from===Uint8Array.from)&&(Us.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Bs(t,e,r)});Us.alloc||(Us.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Bs(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!Mr.kStringMaxLength)try{Mr.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Mr.constants||(Mr.constants={MAX_LENGTH:Mr.kMaxLength},Mr.kStringMaxLength&&(Mr.constants.MAX_STRING_LENGTH=Mr.kStringMaxLength));N_.exports=Mr});var M_=y((T8,L_)=>{var hO=require("assert"),k_=pd().Buffer,ca=au(),gO=ou(),Ws=gO.newInvalidAsn1Error;function tr(t){if(!t||!k_.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(tr.prototype,"length",{enumerable:!0,get:function(){return this._len}});Object.defineProperty(tr.prototype,"offset",{enumerable:!0,get:function(){return this._offset}});Object.defineProperty(tr.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(tr.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});tr.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=this._buf[this._offset]&255;return t||(this._offset+=1),e};tr.prototype.peek=function(){return this.readByte(!0)};tr.prototype.readLength=function(t){if(t===void 0&&(t=this._offset),t>=this._size)return null;var e=this._buf[t++]&255;if(e===null)return null;if((e&128)===128){if(e&=127,e===0)throw Ws("Indefinite length not supported");if(e>4)throw Ws("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(this._buf[t++]&255)}else this._len=e;return t};tr.prototype.readSequence=function(t){var e=this.peek();if(e===null)return null;if(t!==void 0&&t!==e)throw Ws("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return r===null?null:(this._offset=r,e)};tr.prototype.readInt=function(){return this._readTag(ca.Integer)};tr.prototype.readBoolean=function(){return this._readTag(ca.Boolean)!==0};tr.prototype.readEnumeration=function(){return this._readTag(ca.Enumeration)};tr.prototype.readString=function(t,e){t||(t=ca.OctetString);var r=this.peek();if(r===null)return null;if(r!==t)throw Ws("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(n===null||this.length>this._size-n)return null;if(this._offset=n,this.length===0)return e?k_.alloc(0):"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")};tr.prototype.readOID=function(t){t||(t=ca.OID);var e=this.readString(t,!0);if(e===null)return null;for(var r=[],n=0,i=0;i<e.length;i++){var s=e[i]&255;n<<=7,n+=s&127,(s&128)===0&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")};tr.prototype._readTag=function(t){hO.ok(t!==void 0);var e=this.peek();if(e===null)return null;if(e!==t)throw Ws("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;if(this.length>4)throw Ws("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],i=0,s=0;s<this.length;s++)i<<=8,i|=this._buf[this._offset++]&255;return(n&128)===128&&s!==4&&(i-=1<<s*8),i>>0};L_.exports=tr});var j_=y((R8,F_)=>{var li=require("assert"),uu=pd().Buffer,fi=au(),mO=ou(),lu=mO.newInvalidAsn1Error,vO={size:1024,growthFactor:8};function yO(t,e){li.ok(t),li.equal(typeof t,"object"),li.ok(e),li.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(n){if(!e[n]){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i)}}),e}function Kt(t){t=yO(vO,t||{}),this._buf=uu.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(Kt.prototype,"buffer",{get:function(){if(this._seq.length)throw lu(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});Kt.prototype.writeByte=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t};Kt.prototype.writeInt=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");typeof e!="number"&&(e=fi.Integer);for(var r=4;((t&4286578688)===0||(t&4286578688)===-8388608)&&r>1;)r--,t<<=8;if(r>4)throw lu("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(t&4278190080)>>>24,t<<=8};Kt.prototype.writeNull=function(){this.writeByte(fi.Null),this.writeByte(0)};Kt.prototype.writeEnumeration=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");return typeof e!="number"&&(e=fi.Enumeration),this.writeInt(t,e)};Kt.prototype.writeBoolean=function(t,e){if(typeof t!="boolean")throw new TypeError("argument must be a Boolean");typeof e!="number"&&(e=fi.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0};Kt.prototype.writeString=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string (was: "+typeof t+")");typeof e!="number"&&(e=fi.OctetString);var r=uu.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)};Kt.prototype.writeBuffer=function(t,e){if(typeof e!="number")throw new TypeError("tag must be a number");if(!uu.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length};Kt.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(r){e.writeString(r)})};Kt.prototype.writeOID=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string");if(typeof e!="number"&&(e=fi.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");function r(o,a){a<128?o.push(a):a<16384?(o.push(a>>>7|128),o.push(a&127)):a<2097152?(o.push(a>>>14|128),o.push((a>>>7|128)&255),o.push(a&127)):a<268435456?(o.push(a>>>21|128),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127)):(o.push((a>>>28|128)&255),o.push((a>>>21|128)&255),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127))}var n=t.split("."),i=[];i.push(parseInt(n[0],10)*40+parseInt(n[1],10)),n.slice(2).forEach(function(o){r(i,parseInt(o,10))});var s=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(o){s.writeByte(o)})};Kt.prototype.writeLength=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else if(t<=16777215)this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else throw lu("Length too long (> 4 bytes)")};Kt.prototype.startSequence=function(t){typeof t!="number"&&(t=fi.Sequence|fi.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3};Kt.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else if(r<=16777215)this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r;else throw lu("Sequence too long")};Kt.prototype._shift=function(t,e,r){li.ok(t!==void 0),li.ok(e!==void 0),li.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r};Kt.prototype._ensure=function(t){if(li.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=uu.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}};F_.exports=Kt});var $_=y((D8,pu)=>{var hd=ou(),gd=au(),_O=M_(),EO=j_();pu.exports={Reader:_O,Writer:EO};for(fu in gd)gd.hasOwnProperty(fu)&&(pu.exports[fu]=gd[fu]);var fu;for(du in hd)hd.hasOwnProperty(du)&&(pu.exports[du]=hd[du]);var du});var hu=y((I8,H_)=>{var md=$_();H_.exports={Ber:md,BerReader:md.Reader,BerWriter:md.Writer}});var V_=y((P8,vu)=>{var gu=hu().Ber,B_=Zt()._,mu=Zt(),U_="-----BEGIN RSA PRIVATE KEY-----",W_="-----END RSA PRIVATE KEY-----",z_="-----BEGIN RSA PUBLIC KEY-----",K_="-----END RSA PUBLIC KEY-----";vu.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=t.d.toBuffer(),i=t.p.toBuffer(),s=t.q.toBuffer(),o=t.dmp1.toBuffer(),a=t.dmq1.toBuffer(),c=t.coeff.toBuffer(),u=r.length+n.length+i.length+s.length+o.length+a.length+c.length+512,d=new gu.Writer({size:u});return d.startSequence(),d.writeInt(0),d.writeBuffer(r,2),d.writeInt(t.e),d.writeBuffer(n,2),d.writeBuffer(i,2),d.writeBuffer(s,2),d.writeBuffer(o,2),d.writeBuffer(a,2),d.writeBuffer(c,2),d.endSequence(),e.type==="der"?d.buffer:U_+`
`+mu.linebrk(d.buffer.toString("base64"),64)+`
`+W_},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),B_.isString(e)){var i=mu.trimSurroundingText(e,U_,W_).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new gu.Reader(n);s.readSequence(),s.readString(2,!0),t.setPrivate(s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=r.length+512,i=new gu.Writer({size:n});return i.startSequence(),i.writeBuffer(r,2),i.writeInt(t.e),i.endSequence(),e.type==="der"?i.buffer:z_+`
`+mu.linebrk(i.buffer.toString("base64"),64)+`
`+K_},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der"){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),B_.isString(e)){var i=mu.trimSurroundingText(e,z_,K_).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}}else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new gu.Reader(n);s.readSequence(),t.setPublic(s.readString(2,!0),s.readString(2,!0))},autoImport:function(t,e){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(e)?(vu.exports.privateImport(t,e),!0):/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(e)?(vu.exports.publicImport(t,e),!0):!1}}});var Z_=y((x8,Eu)=>{var gn=hu().Ber,G_=Zt()._,yu="1.2.840.113549.1.1.1",_u=Zt(),X_="-----BEGIN PRIVATE KEY-----",Y_="-----END PRIVATE KEY-----",Q_="-----BEGIN PUBLIC KEY-----",J_="-----END PUBLIC KEY-----";Eu.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=t.d.toBuffer(),i=t.p.toBuffer(),s=t.q.toBuffer(),o=t.dmp1.toBuffer(),a=t.dmq1.toBuffer(),c=t.coeff.toBuffer(),u=r.length+n.length+i.length+s.length+o.length+a.length+c.length+512,d=new gn.Writer({size:u});d.startSequence(),d.writeInt(0),d.writeBuffer(r,2),d.writeInt(t.e),d.writeBuffer(n,2),d.writeBuffer(i,2),d.writeBuffer(s,2),d.writeBuffer(o,2),d.writeBuffer(a,2),d.writeBuffer(c,2),d.endSequence();var p=new gn.Writer({size:u});return p.startSequence(),p.writeInt(0),p.startSequence(),p.writeOID(yu),p.writeNull(),p.endSequence(),p.writeBuffer(d.buffer,4),p.endSequence(),e.type==="der"?p.buffer:X_+`
`+_u.linebrk(p.buffer.toString("base64"),64)+`
`+Y_},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),G_.isString(e)){var i=_u.trimSurroundingText(e,X_,Y_).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new gn.Reader(n);s.readSequence(),s.readInt(0);var o=new gn.Reader(s.readString(48,!0));if(o.readOID(6,!0)!==yu)throw Error("Invalid Public key format");var a=new gn.Reader(s.readString(4,!0));a.readSequence(),a.readString(2,!0),t.setPrivate(a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=r.length+512,i=new gn.Writer({size:n});i.writeByte(0),i.startSequence(),i.writeBuffer(r,2),i.writeInt(t.e),i.endSequence();var s=new gn.Writer({size:n});return s.startSequence(),s.startSequence(),s.writeOID(yu),s.writeNull(),s.endSequence(),s.writeBuffer(i.buffer,3),s.endSequence(),e.type==="der"?s.buffer:Q_+`
`+_u.linebrk(s.buffer.toString("base64"),64)+`
`+J_},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der"){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),G_.isString(e)){var i=_u.trimSurroundingText(e,Q_,J_).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}}else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new gn.Reader(n);s.readSequence();var o=new gn.Reader(s.readString(48,!0));if(o.readOID(6,!0)!==yu)throw Error("Invalid Public key format");var a=new gn.Reader(s.readString(3,!0));a.readByte(),a.readSequence(),t.setPublic(a.readString(2,!0),a.readString(2,!0))},autoImport:function(t,e){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(e)?(Eu.exports.privateImport(t,e),!0):/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(e)?(Eu.exports.publicImport(t,e),!0):!1}}});var e0=y((A8,wu)=>{var q8=Zt()._,O8=Zt();wu.exports={privateExport:function(t,e){return{n:t.n.toBuffer(),e:t.e,d:t.d.toBuffer(),p:t.p.toBuffer(),q:t.q.toBuffer(),dmp1:t.dmp1.toBuffer(),dmq1:t.dmq1.toBuffer(),coeff:t.coeff.toBuffer()}},privateImport:function(t,e,r){if(e.n&&e.e&&e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff)t.setPrivate(e.n,e.e,e.d,e.p,e.q,e.dmp1,e.dmq1,e.coeff);else throw Error("Invalid key data")},publicExport:function(t,e){return{n:t.n.toBuffer(),e:t.e}},publicImport:function(t,e,r){if(e.n&&e.e)t.setPublic(e.n,e.e);else throw Error("Invalid key data")},autoImport:function(t,e){return e.n&&e.e?e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff?(wu.exports.privateImport(t,e),!0):(wu.exports.publicImport(t,e),!0):!1}}});var s0=y((N8,Cu)=>{var t0=Zt()._,r0=Zt(),ua=Mi(),n0="-----BEGIN OPENSSH PRIVATE KEY-----",i0="-----END OPENSSH PRIVATE KEY-----";Cu.exports={privateExport:function(t,e){let r=t.n.toBuffer(),n=Buffer.alloc(4);for(n.writeUInt32BE(t.e,0);n[0]===0;)n=n.slice(1);let i=t.d.toBuffer(),s=t.coeff.toBuffer(),o=t.p.toBuffer(),a=t.q.toBuffer(),c;typeof t.sshcomment<"u"?c=Buffer.from(t.sshcomment):c=Buffer.from([]);let u=11+4+n.byteLength+4+r.byteLength,d=8+11+4+r.byteLength+4+n.byteLength+4+i.byteLength+4+s.byteLength+4+o.byteLength+4+a.byteLength+4+c.byteLength,p=15+16+4+4+4+u+4+d;p+=Math.ceil(d/8)*8-d;let v=Buffer.alloc(p),b={buf:v,off:0};v.write("openssh-key-v1","utf8"),v.writeUInt8(0,14),b.off+=15,Ft(b,Buffer.from("none")),Ft(b,Buffer.from("none")),Ft(b,Buffer.from("")),b.off=b.buf.writeUInt32BE(1,b.off),b.off=b.buf.writeUInt32BE(u,b.off),Ft(b,Buffer.from("ssh-rsa")),Ft(b,n),Ft(b,r),b.off=b.buf.writeUInt32BE(p-47-u,b.off),b.off+=8,Ft(b,Buffer.from("ssh-rsa")),Ft(b,r),Ft(b,n),Ft(b,i),Ft(b,s),Ft(b,o),Ft(b,a),Ft(b,c);let P=1;for(;b.off<p;)b.off=b.buf.writeUInt8(P++,b.off);return e.type==="der"?b.buf:n0+`
`+r0.linebrk(v.toString("base64"),70)+`
`+i0+`
`},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),t0.isString(e)){var i=r0.trimSurroundingText(e,n0,i0).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");let s={buf:n,off:0};if(n.slice(0,14).toString("ascii")!=="openssh-key-v1")throw"Invalid file format.";if(s.off+=15,Mt(s).toString("ascii")!=="none"||Mt(s).toString("ascii")!=="none"||Mt(s).toString("ascii")!==""||(s.off+=4,s.off+=4,Mt(s).toString("ascii")!=="ssh-rsa")||(Mt(s),Mt(s),s.off+=12,Mt(s).toString("ascii")!=="ssh-rsa"))throw Error("Unsupported key type");let o=Mt(s),a=Mt(s),c=Mt(s),u=Mt(s),d=Mt(s),p=Mt(s),m=new ua(c),v=new ua(p),b=new ua(d),P=m.mod(b.subtract(ua.ONE)),j=m.mod(v.subtract(ua.ONE));t.setPrivate(o,a,c,d,p,P.toBuffer(),j.toBuffer(),u),t.sshcomment=Mt(s).toString("ascii")},publicExport:function(t,e){let r=Buffer.alloc(4);for(r.writeUInt32BE(t.e,0);r[0]===0;)r=r.slice(1);let n=t.n.toBuffer(),i=Buffer.alloc(r.byteLength+4+n.byteLength+4+7+4),s={buf:i,off:0};Ft(s,Buffer.from("ssh-rsa")),Ft(s,r),Ft(s,n);let o=t.sshcomment||"";return e.type==="der"?s.buf:"ssh-rsa "+i.toString("base64")+" "+o+`
`},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),t0.isString(e)){if(e.substring(0,8)!=="ssh-rsa ")throw Error("Unsupported key format");let c=e.indexOf(" ",8);c===-1?c=e.length:t.sshcomment=e.substring(c+1).replace(/\s+|\n\r|\n|\r$/gm,"");let u=e.substring(8,c).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(u,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");let i={buf:n,off:0},s=Mt(i).toString("ascii");if(s!=="ssh-rsa")throw Error("Invalid key type: "+s);let o=Mt(i),a=Mt(i);t.setPublic(a,o)},autoImport:function(t,e){return/^[\S\s]*-----BEGIN OPENSSH PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END OPENSSH PRIVATE KEY-----[\S\s]*$/g.test(e)?(Cu.exports.privateImport(t,e),!0):/^[\S\s]*ssh-rsa \s*(?=(([A-Za-z0-9+/=]+\s*)+))\1[\S\s]*$/g.test(e)?(Cu.exports.publicImport(t,e),!0):!1}};function Mt(t){let e=t.buf.readInt32BE(t.off);t.off+=4;let r=t.buf.slice(t.off,t.off+e);return t.off+=e,r}function Ft(t,e){t.buf.writeInt32BE(e.byteLength,t.off),t.off+=4,t.off+=e.copy(t.buf,t.off)}});var a0=y((L8,Tt)=>{var k8=Zt()._;function o0(t){t=t.split("-");for(var e="private",r={type:"default"},n=1;n<t.length;n++)if(t[n])switch(t[n]){case"public":e=t[n];break;case"private":e=t[n];break;case"pem":r.type=t[n];break;case"der":r.type=t[n];break}return{scheme:t[0],keyType:e,keyOpt:r}}Tt.exports={pkcs1:V_(),pkcs8:Z_(),components:e0(),openssh:s0(),isPrivateExport:function(t){return Tt.exports[t]&&typeof Tt.exports[t].privateExport=="function"},isPrivateImport:function(t){return Tt.exports[t]&&typeof Tt.exports[t].privateImport=="function"},isPublicExport:function(t){return Tt.exports[t]&&typeof Tt.exports[t].publicExport=="function"},isPublicImport:function(t){return Tt.exports[t]&&typeof Tt.exports[t].publicImport=="function"},detectAndImport:function(t,e,r){if(r===void 0){for(var n in Tt.exports)if(typeof Tt.exports[n].autoImport=="function"&&Tt.exports[n].autoImport(t,e))return!0}else if(r){var i=o0(r);if(Tt.exports[i.scheme])i.keyType==="private"?Tt.exports[i.scheme].privateImport(t,e,i.keyOpt):Tt.exports[i.scheme].publicImport(t,e,i.keyOpt);else throw Error("Unsupported key format")}return!1},detectAndExport:function(t,e){if(e){var r=o0(e);if(Tt.exports[r.scheme])if(r.keyType==="private"){if(!t.isPrivate())throw Error("This is not private key");return Tt.exports[r.scheme].privateExport(t,r.keyOpt)}else{if(!t.isPublic())throw Error("This is not public key");return Tt.exports[r.scheme].publicExport(t,r.keyOpt)}else throw Error("Unsupported key format")}}}});var vd=y((j8,f0)=>{var c0=require("constants"),wO=q_(),M8=require("crypto"),F8=hu().Ber,Sr=Zt()._,CO=Zt(),u0=Fi(),l0=a0();typeof c0.RSA_NO_PADDING>"u"&&(c0.RSA_NO_PADDING=3);f0.exports=function(){var t={node10:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],node:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],iojs:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],browser:["md5","ripemd160","sha1","sha256","sha512"]},e="pkcs1_oaep",r="pkcs1",n="private",i={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function s(o,a,c){if(!(this instanceof s))return new s(o,a,c);Sr.isObject(a)&&(c=a,a=void 0),this.$options={signingScheme:r,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:e,encryptionSchemeOptions:{hash:"sha1",label:null},environment:CO.detectEnvironment(),rsaUtils:this},this.keyPair=new wO.Key,this.$cache={},Buffer.isBuffer(o)||Sr.isString(o)?this.importKey(o,a):Sr.isObject(o)&&this.generateKeyPair(o.b,o.e),this.setOptions(c)}return s.prototype.setOptions=function(o){if(o=o||{},o.environment&&(this.$options.environment=o.environment),o.signingScheme){if(Sr.isString(o.signingScheme)){var a=o.signingScheme.toLowerCase().split("-");a.length==1?t.node.indexOf(a[0])>-1?(this.$options.signingSchemeOptions={hash:a[0]},this.$options.signingScheme=r):(this.$options.signingScheme=a[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:a[1]},this.$options.signingScheme=a[0])}else Sr.isObject(o.signingScheme)&&(this.$options.signingScheme=o.signingScheme.scheme||r,this.$options.signingSchemeOptions=Sr.omit(o.signingScheme,"scheme"));if(!u0.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&t[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash)===-1)throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(o.encryptionScheme){if(Sr.isString(o.encryptionScheme)?(this.$options.encryptionScheme=o.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):Sr.isObject(o.encryptionScheme)&&(this.$options.encryptionScheme=o.encryptionScheme.scheme||e,this.$options.encryptionSchemeOptions=Sr.omit(o.encryptionScheme,"scheme")),!u0.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&t[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash)===-1)throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},s.prototype.generateKeyPair=function(o,a){if(o=o||2048,a=a||65537,o%8!==0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(o,a.toString(16)),this.$cache={},this},s.prototype.importKey=function(o,a){if(!o)throw Error("Empty key given");if(a&&(a=i[a]||a),!l0.detectAndImport(this.keyPair,o,a)&&a===void 0)throw Error("Key format must be specified");return this.$cache={},this},s.prototype.exportKey=function(o){return o=o||n,o=i[o]||o,this.$cache[o]||(this.$cache[o]=l0.detectAndExport(this.keyPair,o)),this.$cache[o]},s.prototype.isPrivate=function(){return this.keyPair.isPrivate()},s.prototype.isPublic=function(o){return this.keyPair.isPublic(o)},s.prototype.isEmpty=function(o){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},s.prototype.encrypt=function(o,a,c){return this.$$encryptKey(!1,o,a,c)},s.prototype.decrypt=function(o,a){return this.$$decryptKey(!1,o,a)},s.prototype.encryptPrivate=function(o,a,c){return this.$$encryptKey(!0,o,a,c)},s.prototype.decryptPublic=function(o,a){return this.$$decryptKey(!0,o,a)},s.prototype.$$encryptKey=function(o,a,c,u){try{var d=this.keyPair.encrypt(this.$getDataForEncrypt(a,u),o);return c=="buffer"||!c?d:d.toString(c)}catch(p){throw Error("Error during encryption. Original error: "+p)}},s.prototype.$$decryptKey=function(o,a,c){try{a=Sr.isString(a)?Buffer.from(a,"base64"):a;var u=this.keyPair.decrypt(a,o);if(u===null)throw Error("Key decrypt method returns null.");return this.$getDecryptedData(u,c)}catch(d){throw Error("Error during decryption (probably incorrect key). Original error: "+d)}},s.prototype.sign=function(o,a,c){if(!this.isPrivate())throw Error("This is not private key");var u=this.keyPair.sign(this.$getDataForEncrypt(o,c));return a&&a!="buffer"&&(u=u.toString(a)),u},s.prototype.verify=function(o,a,c,u){if(!this.isPublic())throw Error("This is not public key");return u=!u||u=="buffer"?null:u,this.keyPair.verify(this.$getDataForEncrypt(o,c),a,u)},s.prototype.getKeySize=function(){return this.keyPair.keySize},s.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},s.prototype.$getDataForEncrypt=function(o,a){if(Sr.isString(o)||Sr.isNumber(o))return Buffer.from(""+o,a||"utf8");if(Buffer.isBuffer(o))return o;if(Sr.isObject(o))return Buffer.from(JSON.stringify(o));throw Error("Unexpected data type")},s.prototype.$getDecryptedData=function(o,a){return a=a||"buffer",a=="buffer"?o:a=="json"?JSON.parse(o.toString()):o.toString(a)},s}()});var yd=y(($8,d0)=>{"use strict";function SO(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}d0.exports=SO});var Dt=y((n6,C0)=>{"use strict";var PO=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.enableDebug&&console.info(t.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.disableWarnings||console.warn(t.TAG+e,r)},t.enableDebug=!1,t.disableWarnings=!1,t.disableErrors=!1,t.TAG="ApplicationInsights:",t}();C0.exports=PO});var Tu=y(pi=>{"use strict";var S0=pi&&pi.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(pi,"__esModule",{value:!0});var ji=$i(),xO=require("events"),qO;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(qO=pi.SpanKind||(pi.SpanKind={}));var b0=function(){function t(){}return t.prototype.active=function(){var e=this,r=ji.CorrelationContextManager.getCurrentContext();return S0({},r,{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,s=t._spanToContext(e,n,i);return ji.CorrelationContextManager.runWithContext(s,r)()},t.prototype.bind=function(e){return typeof e=="function"?ji.CorrelationContextManager.wrapCallback(e):(e instanceof xO.EventEmitter&&ji.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return ji.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return ji.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=r?"|"+e.context().traceId+"."+r+".":e.context().traceId,s=S0({},e.context(),{traceFlags:e.context().traceFlags.toString()}),o=ji.CorrelationContextManager.spanToContextObject(s,i,n);return o},t}();pi.OpenTelemetryScopeManagerWrapper=b0;pi.AsyncScopeManager=new b0});var H0=y((ee,$0)=>{ee=$0.exports=me;var Ie;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Ie=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Ie=function(){};ee.SEMVER_SPEC_VERSION="2.0.0";var fa=256,Ru=Number.MAX_SAFE_INTEGER||9007199254740991,wd=16,OO=fa-6,da=ee.re=[],Fe=ee.safeRe=[],L=ee.src=[],de=0,Rd="[a-zA-Z0-9-]",Cd=[["\\s",1],["\\d",fa],[Rd,OO]];function Ou(t){for(var e=0;e<Cd.length;e++){var r=Cd[e][0],n=Cd[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Ks=de++;L[Ks]="0|[1-9]\\d*";var Vs=de++;L[Vs]="\\d+";var Dd=de++;L[Dd]="\\d*[a-zA-Z-]"+Rd+"*";var R0=de++;L[R0]="("+L[Ks]+")\\.("+L[Ks]+")\\.("+L[Ks]+")";var D0=de++;L[D0]="("+L[Vs]+")\\.("+L[Vs]+")\\.("+L[Vs]+")";var Sd=de++;L[Sd]="(?:"+L[Ks]+"|"+L[Dd]+")";var bd=de++;L[bd]="(?:"+L[Vs]+"|"+L[Dd]+")";var Id=de++;L[Id]="(?:-("+L[Sd]+"(?:\\."+L[Sd]+")*))";var Pd=de++;L[Pd]="(?:-?("+L[bd]+"(?:\\."+L[bd]+")*))";var Td=de++;L[Td]=Rd+"+";var ha=de++;L[ha]="(?:\\+("+L[Td]+"(?:\\."+L[Td]+")*))";var xd=de++,I0="v?"+L[R0]+L[Id]+"?"+L[ha]+"?";L[xd]="^"+I0+"$";var qd="[v=\\s]*"+L[D0]+L[Pd]+"?"+L[ha]+"?",Od=de++;L[Od]="^"+qd+"$";var Js=de++;L[Js]="((?:<|>)?=?)";var Du=de++;L[Du]=L[Vs]+"|x|X|\\*";var Iu=de++;L[Iu]=L[Ks]+"|x|X|\\*";var Hi=de++;L[Hi]="[v=\\s]*("+L[Iu]+")(?:\\.("+L[Iu]+")(?:\\.("+L[Iu]+")(?:"+L[Id]+")?"+L[ha]+"?)?)?";var Xs=de++;L[Xs]="[v=\\s]*("+L[Du]+")(?:\\.("+L[Du]+")(?:\\.("+L[Du]+")(?:"+L[Pd]+")?"+L[ha]+"?)?)?";var P0=de++;L[P0]="^"+L[Js]+"\\s*"+L[Hi]+"$";var x0=de++;L[x0]="^"+L[Js]+"\\s*"+L[Xs]+"$";var q0=de++;L[q0]="(?:^|[^\\d])(\\d{1,"+wd+"})(?:\\.(\\d{1,"+wd+"}))?(?:\\.(\\d{1,"+wd+"}))?(?:$|[^\\d])";var Au=de++;L[Au]="(?:~>?)";var Ys=de++;L[Ys]="(\\s*)"+L[Au]+"\\s+";da[Ys]=new RegExp(L[Ys],"g");Fe[Ys]=new RegExp(Ou(L[Ys]),"g");var AO="$1~",O0=de++;L[O0]="^"+L[Au]+L[Hi]+"$";var A0=de++;L[A0]="^"+L[Au]+L[Xs]+"$";var Nu=de++;L[Nu]="(?:\\^)";var Qs=de++;L[Qs]="(\\s*)"+L[Nu]+"\\s+";da[Qs]=new RegExp(L[Qs],"g");Fe[Qs]=new RegExp(Ou(L[Qs]),"g");var NO="$1^",N0=de++;L[N0]="^"+L[Nu]+L[Hi]+"$";var k0=de++;L[k0]="^"+L[Nu]+L[Xs]+"$";var Ad=de++;L[Ad]="^"+L[Js]+"\\s*("+qd+")$|^$";var Nd=de++;L[Nd]="^"+L[Js]+"\\s*("+I0+")$|^$";var Bi=de++;L[Bi]="(\\s*)"+L[Js]+"\\s*("+qd+"|"+L[Hi]+")";da[Bi]=new RegExp(L[Bi],"g");Fe[Bi]=new RegExp(Ou(L[Bi]),"g");var kO="$1$2$3",L0=de++;L[L0]="^\\s*("+L[Hi]+")\\s+-\\s+("+L[Hi]+")\\s*$";var M0=de++;L[M0]="^\\s*("+L[Xs]+")\\s+-\\s+("+L[Xs]+")\\s*$";var F0=de++;L[F0]="(<|>)?=?\\s*\\*";for(mn=0;mn<de;mn++)Ie(mn,L[mn]),da[mn]||(da[mn]=new RegExp(L[mn]),Fe[mn]=new RegExp(Ou(L[mn])));var mn;ee.parse=Ui;function Ui(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof me)return t;if(typeof t!="string"||t.length>fa)return null;var r=e.loose?Fe[Od]:Fe[xd];if(!r.test(t))return null;try{return new me(t,e)}catch{return null}}ee.valid=LO;function LO(t,e){var r=Ui(t,e);return r?r.version:null}ee.clean=MO;function MO(t,e){var r=Ui(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}ee.SemVer=me;function me(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof me){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>fa)throw new TypeError("version is longer than "+fa+" characters");if(!(this instanceof me))return new me(t,e);Ie("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Fe[Od]:Fe[xd]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ru||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ru||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ru||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Ru)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}me.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};me.prototype.toString=function(){return this.version};me.prototype.compare=function(t){return Ie("SemVer.compare",this.version,this.options,t),t instanceof me||(t=new me(t,this.options)),this.compareMain(t)||this.comparePre(t)};me.prototype.compareMain=function(t){return t instanceof me||(t=new me(t,this.options)),Gs(this.major,t.major)||Gs(this.minor,t.minor)||Gs(this.patch,t.patch)};me.prototype.comparePre=function(t){if(t instanceof me||(t=new me(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Ie("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Gs(r,n)}while(++e)};me.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};ee.inc=FO;function FO(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new me(t,r).inc(e,n).version}catch{return null}}ee.diff=jO;function jO(t,e){if(kd(t,e))return null;var r=Ui(t),n=Ui(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==n[o])return i+o;return s}ee.compareIdentifiers=Gs;var T0=/^[0-9]+$/;function Gs(t,e){var r=T0.test(t),n=T0.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}ee.rcompareIdentifiers=$O;function $O(t,e){return Gs(e,t)}ee.major=HO;function HO(t,e){return new me(t,e).major}ee.minor=BO;function BO(t,e){return new me(t,e).minor}ee.patch=UO;function UO(t,e){return new me(t,e).patch}ee.compare=An;function An(t,e,r){return new me(t,r).compare(new me(e,r))}ee.compareLoose=WO;function WO(t,e){return An(t,e,!0)}ee.rcompare=zO;function zO(t,e,r){return An(e,t,r)}ee.sort=KO;function KO(t,e){return t.sort(function(r,n){return ee.compare(r,n,e)})}ee.rsort=VO;function VO(t,e){return t.sort(function(r,n){return ee.rcompare(r,n,e)})}ee.gt=pa;function pa(t,e,r){return An(t,e,r)>0}ee.lt=Pu;function Pu(t,e,r){return An(t,e,r)<0}ee.eq=kd;function kd(t,e,r){return An(t,e,r)===0}ee.neq=j0;function j0(t,e,r){return An(t,e,r)!==0}ee.gte=Ld;function Ld(t,e,r){return An(t,e,r)>=0}ee.lte=Md;function Md(t,e,r){return An(t,e,r)<=0}ee.cmp=xu;function xu(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return kd(t,r,n);case"!=":return j0(t,r,n);case">":return pa(t,r,n);case">=":return Ld(t,r,n);case"<":return Pu(t,r,n);case"<=":return Md(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}ee.Comparator=jr;function jr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof jr){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof jr))return new jr(t,e);t=t.trim().split(/\s+/).join(" "),Ie("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===ga?this.value="":this.value=this.operator+this.semver.version,Ie("comp",this)}var ga={};jr.prototype.parse=function(t){var e=this.options.loose?Fe[Ad]:Fe[Nd],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new me(r[2],this.options.loose):this.semver=ga};jr.prototype.toString=function(){return this.value};jr.prototype.test=function(t){return Ie("Comparator.test",t,this.options.loose),this.semver===ga?!0:(typeof t=="string"&&(t=new me(t,this.options)),xu(t,this.operator,this.semver,this.options))};jr.prototype.intersects=function(t,e){if(!(t instanceof jr))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Ye(t.value,e),qu(this.value,r,e);if(t.operator==="")return r=new Ye(this.value,e),qu(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=xu(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=xu(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&o||a||c};ee.Range=Ye;function Ye(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ye)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Ye(t.raw,e);if(t instanceof jr)return new Ye(t.value,e);if(!(this instanceof Ye))return new Ye(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Ye.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Ye.prototype.toString=function(){return this.range};Ye.prototype.parseRange=function(t){var e=this.options.loose,r=e?Fe[M0]:Fe[L0];t=t.replace(r,n1),Ie("hyphen replace",t),t=t.replace(Fe[Bi],kO),Ie("comparator trim",t,Fe[Bi]),t=t.replace(Fe[Ys],AO),t=t.replace(Fe[Qs],NO);var n=e?Fe[Ad]:Fe[Nd],i=t.split(" ").map(function(s){return XO(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new jr(s,this.options)},this),i};Ye.prototype.intersects=function(t,e){if(!(t instanceof Ye))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};ee.toComparators=GO;function GO(t,e){return new Ye(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function XO(t,e){return Ie("comp",t,e),t=JO(t,e),Ie("caret",t),t=YO(t,e),Ie("tildes",t),t=e1(t,e),Ie("xrange",t),t=r1(t,e),Ie("stars",t),t}function rr(t){return!t||t.toLowerCase()==="x"||t==="*"}function YO(t,e){return t.trim().split(/\s+/).map(function(r){return QO(r,e)}).join(" ")}function QO(t,e){var r=e.loose?Fe[A0]:Fe[O0];return t.replace(r,function(n,i,s,o,a){Ie("tilde",t,n,i,s,o,a);var c;return rr(i)?c="":rr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":rr(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(Ie("replaceTilde pr",a),c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",Ie("tilde return",c),c})}function JO(t,e){return t.trim().split(/\s+/).map(function(r){return ZO(r,e)}).join(" ")}function ZO(t,e){Ie("caret",t,e);var r=e.loose?Fe[k0]:Fe[N0];return t.replace(r,function(n,i,s,o,a){Ie("caret",t,n,i,s,o,a);var c;return rr(i)?c="":rr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":rr(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(Ie("replaceCaret pr",a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+"-"+a+" <"+(+i+1)+".0.0"):(Ie("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),Ie("caret return",c),c})}function e1(t,e){return Ie("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return t1(r,e)}).join(" ")}function t1(t,e){t=t.trim();var r=e.loose?Fe[x0]:Fe[P0];return t.replace(r,function(n,i,s,o,a,c){Ie("xRange",t,n,i,s,o,a,c);var u=rr(s),d=u||rr(o),p=d||rr(a),m=p;return i==="="&&m&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(d&&(o=0),a=0,i===">"?(i=">=",d?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",d?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):d?n=">="+s+".0.0 <"+(+s+1)+".0.0":p&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),Ie("xRange return",n),n})}function r1(t,e){return Ie("replaceStars",t,e),t.trim().replace(Fe[F0],"")}function n1(t,e,r,n,i,s,o,a,c,u,d,p,m){return rr(r)?e="":rr(n)?e=">="+r+".0.0":rr(i)?e=">="+r+"."+n+".0":e=">="+e,rr(c)?a="":rr(u)?a="<"+(+c+1)+".0.0":rr(d)?a="<"+c+"."+(+u+1)+".0":p?a="<="+c+"."+u+"."+d+"-"+p:a="<="+a,(e+" "+a).trim()}Ye.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new me(t,this.options));for(var e=0;e<this.set.length;e++)if(i1(this.set[e],t,this.options))return!0;return!1};function i1(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Ie(t[n].semver),t[n].semver!==ga&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}ee.satisfies=qu;function qu(t,e,r){try{e=new Ye(e,r)}catch{return!1}return e.test(t)}ee.maxSatisfying=s1;function s1(t,e,r){var n=null,i=null;try{var s=new Ye(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new me(n,r))}),n}ee.minSatisfying=o1;function o1(t,e,r){var n=null,i=null;try{var s=new Ye(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new me(n,r))}),n}ee.minVersion=a1;function a1(t,e){t=new Ye(t,e);var r=new me("0.0.0");if(t.test(r)||(r=new me("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(s){var o=new me(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!r||pa(r,o))&&(r=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}ee.validRange=c1;function c1(t,e){try{return new Ye(t,e).range||"*"}catch{return null}}ee.ltr=u1;function u1(t,e,r){return Fd(t,e,"<",r)}ee.gtr=l1;function l1(t,e,r){return Fd(t,e,">",r)}ee.outside=Fd;function Fd(t,e,r,n){t=new me(t,n),e=new Ye(e,n);var i,s,o,a,c;switch(r){case">":i=pa,s=Md,o=Pu,a=">",c=">=";break;case"<":i=Pu,s=Ld,o=pa,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qu(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var d=e.set[u],p=null,m=null;if(d.forEach(function(v){v.semver===ga&&(v=new jr(">=0.0.0")),p=p||v,m=m||v,i(v.semver,p.semver,n)?p=v:o(v.semver,m.semver,n)&&(m=v)}),p.operator===a||p.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0}ee.prerelease=f1;function f1(t,e){var r=Ui(t,e);return r&&r.prerelease.length?r.prerelease:null}ee.intersects=d1;function d1(t,e,r){return t=new Ye(t,r),e=new Ye(e,r),t.intersects(e)}ee.coerce=p1;function p1(t){if(t instanceof me)return t;if(typeof t!="string")return null;var e=t.match(Fe[q0]);return e==null?null:Ui(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var $d=y(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var h1=require("path"),g1=H0(),U0=require("module"),m1=Object.keys(process.binding("natives")),B0=U0.prototype.require;function v1(t){var e={};return function(n){var i=B0.apply(this,arguments);if(t[n]){var s=U0._resolveFilename(n,this);if(e.hasOwnProperty(s))return e[s];var o=void 0;if(m1.indexOf(n)<0)try{o=B0.call(this,h1.join(n,"package.json")).version}catch{return i}else o=process.version.substring(1);var a=o.indexOf("-");a>=0&&(o=o.substring(0,a));for(var c=i,u=0,d=t[n];u<d.length;u++){var p=d[u];g1.satisfies(o,p.versionSpecifier)&&(c=p.patch(c,s))}return e[s]=c}return i}}jd.makePatchingRequire=v1});var W0=y((o6,y1)=>{y1.exports={name:"diagnostic-channel",version:"0.3.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var dt=y(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var _1=$d(),E1=$d();ku.makePatchingRequire=E1.makePatchingRequire;var z0=function(t){return!0},w1=function(){function t(){this.version=W0().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(s){var o=s.listener,a=s.filter;try{a&&a(!0)&&o(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n){n===void 0&&(n=z0),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n})},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=z0);var i=this.subscribers[e];if(i){for(var s=0;s<i.length;++s)if(i[s].listener===r&&i[s].filter===n)return i.splice(s,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t}();global.diagnosticsSource||(global.diagnosticsSource=new w1,K0=require("module"),K0.prototype.require=_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var K0;ku.channel=global.diagnosticsSource});var G0=y(Nn=>{"use strict";var C1=Nn&&Nn.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Nn,"__esModule",{value:!0});var Lu=dt();Nn.AzureMonitorSymbol="Azure_Monitor_Tracer";var V0=!1,S1=function(t){if(V0)return t;try{var e=require("@opentelemetry/tracing"),r=require("@opentelemetry/api"),n=Lu.channel.spanContextPropagator?{contextManager:Lu.channel.spanContextPropagator}:void 0;new e.BasicTracerProvider().register(n);var i=r.trace.getTracer("applicationinsights tracer"),s=i.startSpan;i.startSpan=function(o,a){if(!a||!a.parent){var c=r.getSpan(r.context.active());c&&c.operation&&c.operation.traceparent&&(a=C1({},a,{parent:{traceId:c.operation.traceparent.traceId,spanId:c.operation.traceparent.spanId,traceFlags:1}}))}var u=s.call(this,o,a),d=u.end;return u.end=function(){var p=d.apply(this,arguments);return Lu.channel.publish("azure-coretracing",u),p},u},r.getSpan(r.context.active()),i[Nn.AzureMonitorSymbol]=!0,t.setTracer(i),V0=!0}catch{}return t};Nn.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:S1};function b1(){Lu.channel.registerMonkeyPatch("@azure/core-tracing",Nn.azureCoreTracing)}Nn.enable=b1});var Y0=y(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var X0=dt(),T1=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var s=i;s||(s=e.call(this,r,!0)),X0.channel.publish("bunyan",{level:r.level,result:s})}return i},t};ma.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:T1};function R1(){X0.channel.registerMonkeyPatch("bunyan",ma.bunyan)}ma.enable=R1});var J0=y(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var Hd=dt(),Q0=require("stream"),D1=function(t){var e=new Q0.Writable,r=new Q0.Writable;e.write=function(u){if(!u)return!0;var d=u.toString();return Hd.channel.publish("console",{message:d}),!0},r.write=function(u){if(!u)return!0;var d=u.toString();return Hd.channel.publish("console",{message:d,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],s=function(u){var d=t[u];d&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return d.apply(t,arguments)})},o=0,a=i;o<a.length;o++){var c=a[o];s(c)}return t};va.console={versionSpecifier:">= 4.0.0",patch:D1};function I1(){Hd.channel.registerMonkeyPatch("console",va.console),require("console")}va.enable=I1});var Z0=y(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var Bd=dt(),P1=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Bd.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Bd.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t};ya.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:P1};function x1(){Bd.channel.registerMonkeyPatch("mongodb-core",ya.mongoCore)}ya.enable=x1});var tE=y(Qr=>{"use strict";var eE=Qr&&Qr.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Qr,"__esModule",{value:!0});var Vt=dt(),q1=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return Vt.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=eE({},n,{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Vt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Vt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Vt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Vt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},O1=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Vt.channel.bindToContext(function(s){return s()}),r[i.requestId]=eE({},i,{time:new Date}))}),e.on("succeeded",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Vt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Vt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!1})}),delete n[i.requestId])}),t},A1=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Vt.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var s=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Vt.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t},N1=function(t){A1(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Vt.channel.bindToContext(function(s){return s()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Vt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Vt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!1})}),delete n[i.requestId])}),t};Qr.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:q1};Qr.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:O1};Qr.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:N1};function k1(){Vt.channel.registerMonkeyPatch("mongodb",Qr.mongo2),Vt.channel.registerMonkeyPatch("mongodb",Qr.mongo3),Vt.channel.registerMonkeyPatch("mongodb",Qr.mongo330)}Qr.enable=k1});var nE=y(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var Mu=dt(),rE=require("path"),L1=function(t,e){var r=function(c,u){return function(d,p){var m=c[d];m&&(c[d]=function(){for(var b=arguments.length-1,P=arguments.length-1;P>=0;--P)if(typeof arguments[P]=="function"){b=P;break}else if(typeof arguments[P]<"u")break;var j=arguments[b],A={result:null,startTime:null,startDate:null};typeof j=="function"&&(p?(A.startTime=process.hrtime(),A.startDate=new Date,arguments[b]=Mu.channel.bindToContext(p(A,j))):arguments[b]=Mu.channel.bindToContext(j));var D=m.apply(this,arguments);return A.result=D,D})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],s=require(rE.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(s,"Connection")(c)}),r(s,"Connection")("createQuery",function(c,u){return function(d){var p=process.hrtime(c.startTime),m=p[0]*1e3+p[1]/1e6|0;Mu.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:d,duration:m,time:c.startDate}),u.apply(this,arguments)}});var o=["_enqueueCallback"],a=require(rE.dirname(e)+"/lib/Pool");return o.forEach(function(c){return n(a,"Pool")(c)}),t};_a.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:L1};function M1(){Mu.channel.registerMonkeyPatch("mysql",_a.mysql)}_a.enable=M1});var sE=y(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var iE=dt();function F1(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=iE.channel.bindToContext(n)),e.apply(this,arguments)},t}Ea.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:F1};function j1(){iE.channel.registerMonkeyPatch("pg-pool",Ea.postgresPool1)}Ea.enable=j1});var aE=y(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var Zs=dt(),oE=require("events");function $1(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,o,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),d;function p(m){m&&m[n]&&(m=m[n]);var v=Zs.channel.bindToContext(function(b,P){var j=process.hrtime(u);if(c.result=P&&{rowCount:P.rowCount,command:P.command},c.error=b,c.duration=Math.ceil(j[0]*1e3+j[1]/1e6),Zs.channel.publish("postgres",c),b){if(m)return m.apply(this,arguments);d&&d instanceof oE.EventEmitter&&d.emit("error",b)}else m&&m.apply(this,arguments)});try{return Object.defineProperty(v,n,{value:m}),v}catch{return m}}try{typeof s=="string"?o instanceof Array?(c.query.preparable={text:s,args:o},a=p(a)):(c.query.text=s,a?a=p(a):o=p(o)):(typeof s.name=="string"?c.query.plan=s.name:s.values instanceof Array?c.query.preparable={text:s.text,args:s.values}:c.query.text=s.text,a?a=p(a):o?o=p(o):s.callback=p(s.callback))}catch{return r.apply(this,arguments)}return arguments[0]=s,arguments[1]=o,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),d},t}function H1(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,o,a){var c=this,u=!!a,d={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},p=process.hrtime(),m;function v(b){b&&b[n]&&(b=b[n]);var P=Zs.channel.bindToContext(function(j,A){var D=process.hrtime(p);if(d.result=A&&{rowCount:A.rowCount,command:A.command},d.error=j,d.duration=Math.ceil(D[0]*1e3+D[1]/1e6),Zs.channel.publish("postgres",d),j){if(b)return b.apply(this,arguments);m&&m instanceof oE.EventEmitter&&m.emit("error",j)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(P,n,{value:b}),P}catch{return b}}try{typeof s=="string"?o instanceof Array?(d.query.preparable={text:s,args:o},u=typeof a=="function",a=u?v(a):a):(d.query.text=s,a?(u=typeof a=="function",a=u?v(a):a):(u=typeof o=="function",o=u?v(o):o)):(typeof s.name=="string"?d.query.plan=s.name:s.values instanceof Array?d.query.preparable={text:s.text,args:s.values}:d.query.text=s.text,a?(u=typeof a=="function",a=v(a)):o?(u=typeof o=="function",o=u?v(o):o):(u=typeof s.callback=="function",s.callback=u?v(s.callback):s.callback))}catch{return r.apply(this,arguments)}return arguments[0]=s,arguments[1]=o,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,m=r.apply(this,arguments),u?m:m.then(function(b){return v()(void 0,b),new c._Promise(function(P,j){P(b)})}).catch(function(b){return v()(b,void 0),new c._Promise(function(P,j){j(b)})})},t}Wi.postgres6={versionSpecifier:"6.*",patch:$1};Wi.postgres7={versionSpecifier:">=7.* <=8.*",patch:H1};function B1(){Zs.channel.registerMonkeyPatch("pg",Wi.postgres6),Zs.channel.registerMonkeyPatch("pg",Wi.postgres7)}Wi.enable=B1});var cE=y(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var Ud=dt(),U1=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,s=process.hrtime(),o=new Date;r.callback=Ud.channel.bindToContext(function(a,c){var u=process.hrtime(s),d=u[0]*1e3+u[1]/1e6|0;Ud.channel.publish("redis",{duration:d,address:i,commandObj:r,err:a,result:c,time:o}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};wa.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:U1};function W1(){Ud.channel.registerMonkeyPatch("redis",wa.redis)}wa.enable=W1});var uE=y(zi=>{"use strict";var z1=zi&&zi.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(zi,"__esModule",{value:!0});var Wd=dt(),K1=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(s){var o=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return Wd.channel.bindToContext(function(c,u,d){var p=process.hrtime(o);a=z1({},a,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:d},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(p[0]*1e3+p[1]/1e6)}),Wd.channel.publish("tedious",a),s.call(this,c,u,d)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};zi.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:K1};function V1(){Wd.channel.registerMonkeyPatch("tedious",zi.tedious)}zi.enable=V1});var lE=y(Jr=>{"use strict";var G1=Jr&&Jr.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X1=Jr&&Jr.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Jr,"__esModule",{value:!0});var Fu=dt(),Y1=function(t){var e=t.Logger.prototype.log,r,n=function(i,s,o){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",Fu.channel.publish("winston",{level:i,message:s,meta:o,levelKind:a}),s};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(s){return s!==n}),this.filters.push(n)),e.apply(this,arguments)},t},Q1=function(t){var e=function(o,a){var c;return o.config.npm.levels[a]!=null?c="npm":o.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(o){G1(a,o);function a(c,u){var d=o.call(this,u)||this;return d.winston=c,d}return a.prototype.log=function(c,u){var d=c.message,p=c.level,m=c.meta,v=X1(c,["message","level","meta"]);p=typeof Symbol.for=="function"?c[Symbol.for("level")]:p,d=c instanceof Error?c:d;var b=e(this.winston,p);m=m||{};for(var P in v)v.hasOwnProperty(P)&&(m[P]=v[P]);Fu.channel.publish("winston",{message:d,level:p,levelKind:b,meta:m}),u()},a}(t.Transport);function n(){var o=arguments[0].levels||t.config.npm.levels,a;for(var c in o)o.hasOwnProperty(c)&&(a=a===void 0||o[c]>o[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=arguments[0].levels||t.config.npm.levels,c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var d=i.apply(this,arguments);d.add(new r(t,{level:c}));var p=d.configure;return d.configure=function(){p.apply(this,arguments),n.apply(this,arguments)},d};var s=t.configure;return t.configure=function(){s.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Jr.winston3={versionSpecifier:"3.x",patch:Q1};Jr.winston2={versionSpecifier:"2.x",patch:Y1};function J1(){Fu.channel.registerMonkeyPatch("winston",Jr.winston2),Fu.channel.registerMonkeyPatch("winston",Jr.winston3)}Jr.enable=J1});var CE=y(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});var fE=G0();hr.azuresdk=fE;var dE=Y0();hr.bunyan=dE;var pE=J0();hr.console=pE;var hE=Z0();hr.mongodbCore=hE;var gE=tE();hr.mongodb=gE;var mE=nE();hr.mysql=mE;var vE=sE();hr.pgPool=vE;var yE=aE();hr.pg=yE;var _E=cE();hr.redis=_E;var EE=uE();hr.tedious=EE;var wE=lE();hr.winston=wE;function Z1(){dE.enable(),pE.enable(),hE.enable(),gE.enable(),mE.enable(),yE.enable(),vE.enable(),_E.enable(),wE.enable(),fE.enable(),EE.enable()}hr.enable=Z1});var Hu=y(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});var eA=Tu(),zd=Dt();eo.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var Kd="DiagnosticChannel";if(eo.IsInitialized){Zr=CE(),SE=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",ju=SE.split(","),Vd={bunyan:Zr.bunyan,console:Zr.console,mongodb:Zr.mongodb,mongodbCore:Zr.mongodbCore,mysql:Zr.mysql,redis:Zr.redis,pg:Zr.pg,pgPool:Zr.pgPool,winston:Zr.winston,azuresdk:Zr.azuresdk};for($u in Vd)ju.indexOf($u)===-1&&(Vd[$u].enable(),zd.info(Kd,"Subscribed to "+$u+" events"));ju.length>0&&zd.info(Kd,"Some modules will not be patched",ju)}else zd.info(Kd,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Zr,SE,ju,Vd,$u;function tA(t){if(!!eo.IsInitialized){var e=dt();e.channel.addContextPreservation(t),e.channel.spanContextPropagator=eA.AsyncScopeManager}}eo.registerContextPreservation=tA});var to=y((w6,bE)=>{"use strict";bE.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var br=y((Yd,RE)=>{"use strict";var Gd=Yd&&Yd.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rA=require("http"),TE=require("https"),Xd=require("url"),Bu=require("constants"),Ca=Dt(),ro=to(),nA=function(){function t(){}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",s=r.split(";"),o=0;o<s.length;o++){var r=s[o];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,s[o].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),s=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),o=s.toString("base64");return o.substr(0,o.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var s=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+s+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return e instanceof Error},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,s=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var o=s>0?s+".":"";return o+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){Ca.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",s=e[n],o=typeof s;if(t.isPrimitive(s))i=s.toString();else if(s===null||o==="undefined")i="";else if(o==="function"){Ca.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(s)?s:t.extractObject(s);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=s.constructor.name.toString()+" (Error: "+c.message+")",Ca.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var s=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(s.test(Xd.parse(r).hostname))return!1}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[ro.requestContextHeader];if(n)for(var i=n.split(","),s=0;s<i.length;++s){var o=i[s].split("=");if(o.length==2&&o[0]==r)return o[1]}},t.makeRequest=function(e,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var s=Xd.parse(r),o=Gd({},n,{host:s.hostname,port:s.port,path:s.pathname}),a=void 0;if(s.protocol==="https:"&&(a=e.proxyHttpsUrl||void 0),s.protocol==="http:"&&(a=e.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var c=Xd.parse(a);c.protocol==="https:"?(Ca.info("Proxies that use HTTPS are not supported"),a=void 0):o=Gd({},o,{host:c.hostname,port:c.port||"80",path:r,headers:Gd({},o.headers,{Host:s.hostname})})}var u=s.protocol==="https:"&&!a;return u&&e.httpsAgent!==void 0?o.agent=e.httpsAgent:!u&&e.httpAgent!==void 0?o.agent=e.httpAgent:u&&(o.agent=t.tlsRestrictedAgent),u?TE.request(o,i):rA.request(o,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(s){Ca.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",s,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(ro.requestContextHeader,ro.requestContextSourceKey+"="+e.config.correlationId)},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),s=ro.requestContextSourceKey+"=",o=i.some(function(a){return a.substring(0,s.length)===s});o||r.setHeader(ro.requestContextHeader,n+","+ro.requestContextSourceKey+"="+e.config.correlationId)},t.MAX_PROPERTY_LENGTH=8192,t.tlsRestrictedAgent=new TE.Agent({secureOptions:Bu.SSL_OP_NO_SSLv2|Bu.SSL_OP_NO_SSLv3|Bu.SSL_OP_NO_TLSv1|Bu.SSL_OP_NO_TLSv1_1}),t}();RE.exports=nA});var Ki=y((C6,DE)=>{"use strict";var Uu=br(),Qd=Dt(),iA=function(){function t(){}return t.queryCorrelationId=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(t.completedLookups.hasOwnProperty(n)){r(t.completedLookups[n]);return}else if(t.pendingLookups[n]){t.pendingLookups[n].push(r);return}t.pendingLookups[n]=[r];var i=function(){if(!!t.pendingLookups[n]){var s={method:"GET",disableAppInsightsAutoCollection:!0};Qd.info(t.TAG,s);var o=Uu.makeRequest(e,n,s,function(a){if(a.statusCode===200){var c="";a.setEncoding("utf-8"),a.on("data",function(u){c+=u}),a.on("end",function(){Qd.info(t.TAG,c);var u=t.correlationIdPrefix+c;t.completedLookups[n]=u,t.pendingLookups[n]&&t.pendingLookups[n].forEach(function(d){return d(u)}),delete t.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(t.completedLookups[n]=void 0,delete t.pendingLookups[n]):setTimeout(i,e.correlationIdRetryIntervalMs)});o&&(o.on("error",function(a){Qd.warn(t.TAG,a)}),o.end())}};setTimeout(i,0)},t.cancelCorrelationIdQuery=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId",i=t.pendingLookups[n];i&&(t.pendingLookups[n]=i.filter(function(s){return s!=r}),t.pendingLookups[n].length==0&&delete t.pendingLookups[n])},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+Uu.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var s=e[i-1];if(s==="."||s==="_")break}if(i<=1)return t.generateRootId();for(r=Uu.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.TAG="CorrelationIdManager",t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.pendingLookups={},t.completedLookups={},t.requestIdMaxLength=1024,t.currentRootId=Uu.randomu32(),t}();DE.exports=iA});var Sa=y((S6,IE)=>{"use strict";var jt=br(),sA=Ki(),oA=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=jt.w3cTraceId(),this.spanId=jt.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=jt.w3cTraceId(),this.spanId=jt.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=jt.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=jt.w3cTraceId(),this.spanId=jt.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=jt.w3cTraceId(),this.spanId=jt.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=jt.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=jt.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=jt.w3cTraceId().substr(0,16),this.traceId=jt.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var s=sA.getRootId(r);t.isValidTraceId(s)||(this.legacyRootId=s,s=jt.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=s,this.spanId=r}else this.traceId=jt.w3cTraceId(),this.spanId=jt.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=jt.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();IE.exports=oA});var Jd=y((b6,PE)=>{"use strict";var aA=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),s=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return s&&o}else if(r.length==1)return Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var s=0,o=i;s<o.length;s++){var a=o[s],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();PE.exports=aA});var kn=y((T6,xE)=>{"use strict";var cA=function(){function t(){}return t}();xE.exports=cA});var OE=y((Zd,qE)=>{"use strict";var uA=Zd&&Zd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lA=kn(),fA=function(t){uA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(lA);qE.exports=fA});var ep=y((R6,AE)=>{"use strict";var dA=function(){function t(){}return t}();AE.exports=dA});var kE=y((D6,NE)=>{"use strict";var pA=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();NE.exports=pA});var ME=y((tp,LE)=>{"use strict";var hA=tp&&tp.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gA=ep(),mA=function(t){hA(e,t);function e(){return t.call(this)||this}return e}(gA);LE.exports=mA});var np=y((I6,FE)=>{"use strict";var rp;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(rp||(rp={}));FE.exports=rp});var $E=y((P6,jE)=>{"use strict";var vA=np(),yA=function(){function t(){this.kind=vA.Measurement}return t}();jE.exports=yA});var BE=y((x6,HE)=>{"use strict";var _A=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();HE.exports=_A});var sp=y((ip,UE)=>{"use strict";var EA=ip&&ip.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wA=kn(),CA=function(t){EA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(wA);UE.exports=CA});var zE=y((op,WE)=>{"use strict";var SA=op&&op.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bA=kn(),TA=function(t){SA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(bA);WE.exports=TA});var VE=y((q6,KE)=>{"use strict";var RA=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();KE.exports=RA});var XE=y((ap,GE)=>{"use strict";var DA=ap&&ap.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IA=kn(),PA=function(t){DA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(IA);GE.exports=PA});var QE=y((cp,YE)=>{"use strict";var xA=cp&&cp.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qA=kn(),OA=function(t){xA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(qA);YE.exports=OA});var ZE=y((up,JE)=>{"use strict";var AA=up&&up.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NA=sp(),kA=function(t){AA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(NA);JE.exports=kA});var tw=y((lp,ew)=>{"use strict";var LA=lp&&lp.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MA=kn(),FA=function(t){LA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(MA);ew.exports=FA});var nw=y((fp,rw)=>{"use strict";var jA=fp&&fp.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$A=kn(),HA=function(t){jA(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}($A);rw.exports=HA});var pp=y((O6,iw)=>{"use strict";var dp;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(dp||(dp={}));iw.exports=dp});var ow=y((A6,sw)=>{"use strict";var BA=function(){function t(){}return t}();sw.exports=BA});var hp=y(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.AvailabilityData=OE();yt.Base=ep();yt.ContextTagKeys=kE();yt.Data=ME();yt.DataPoint=$E();yt.DataPointType=np();yt.Domain=kn();yt.Envelope=BE();yt.EventData=sp();yt.ExceptionData=zE();yt.ExceptionDetails=VE();yt.MessageData=XE();yt.MetricData=QE();yt.PageViewData=ZE();yt.RemoteDependencyData=tw();yt.RequestData=nw();yt.SeverityLevel=pp();yt.StackFrame=ow()});var aw=y(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Vi=hp(),UA=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();Wu.RemoteDependencyDataConstants=UA;function WA(t){return"properties"in t||t instanceof Vi.EventData||t instanceof Vi.ExceptionData||t instanceof Vi.MessageData||t instanceof Vi.MetricData||t instanceof Vi.PageViewData||t instanceof Vi.RemoteDependencyData||t instanceof Vi.RequestData}Wu.domainSupportsProperties=WA});var cw=y(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});function zA(t){switch(t){case $t.Event:return"EventData";case $t.Exception:return"ExceptionData";case $t.Trace:return"MessageData";case $t.Metric:return"MetricData";case $t.Request:return"RequestData";case $t.Dependency:return"RemoteDependencyData";case $t.Availability:return"AvailabilityData";case $t.PageView:return"PageViewData"}}Gi.telemetryTypeToBaseType=zA;function KA(t){switch(t){case"EventData":return $t.Event;case"ExceptionData":return $t.Exception;case"MessageData":return $t.Trace;case"MetricData":return $t.Metric;case"RequestData":return $t.Request;case"RemoteDependencyData":return $t.Dependency;case"AvailabilityData":return $t.Availability;case"PageViewData":return $t.PageView}}Gi.baseTypeToTelemetryType=KA;Gi.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var $t;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})($t=Gi.TelemetryType||(Gi.TelemetryType={}))});var uw=y(zu=>{"use strict";function VA(t){for(var e in t)zu.hasOwnProperty(e)||(zu[e]=t[e])}Object.defineProperty(zu,"__esModule",{value:!0});VA(cw())});var Tr=y(Ku=>{"use strict";function gp(t){for(var e in t)Ku.hasOwnProperty(e)||(Ku[e]=t[e])}Object.defineProperty(Ku,"__esModule",{value:!0});gp(aw());gp(hp());gp(uw())});var mp=y((j6,lw)=>{"use strict";var GA=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var s in r)i[s]=r[s]&&r[s].toString&&r[s].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();lw.exports=GA});var _p=y((yp,dw)=>{"use strict";var XA=yp&&yp.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vu=require("url"),YA=Tr(),fw=br(),Xi=to(),QA=mp(),hi=Ki(),JA=Jd(),vp=Sa(),ZA=function(t){XA(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+Vu.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId("ai_session"),n[e.keys.userId]=r[e.keys.userId]||this._getId("ai_user"),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId("ai_authUser"),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){return r[e.keys.operationName]||this.method+" "+Vu.parse(this.url).pathname},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=Vu.parse(r.url),s=i.pathname,o=i.search,a=Vu.format({protocol:n?"https":"http",host:r.headers.host,pathname:s,search:o});return a},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(s){var o=r.exec(s);if(o)return o[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=e.parseId(fw.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=fw.getCorrelationContextTarget(r,Xi.requestContextSourceKey),r.headers){var i=r.headers[Xi.traceStateHeader],s=r.headers[Xi.traceparentHeader],o=r.headers[Xi.requestIdHeader],a=r.headers[Xi.parentIdHeader],c=r.headers[Xi.rootIdHeader];this.correlationContextHeader=r.headers[Xi.correlationContextHeader],hi.w3cEnabled&&(s||i)?(this.traceparent=new vp(s),this.tracestate=s&&i&&new JA(i),this.setBackCompatFromThisTraceContext()):o?hi.w3cEnabled?(this.traceparent=new vp(null,o),this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=hi.generateRequestId(this.parentId),this.operationId=hi.getRootId(this.requestId)):hi.w3cEnabled?(this.traceparent=new vp,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=hi.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=hi.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=hi.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new YA.ContextTagKeys,e}(QA);dw.exports=ZA});var Pw=y((te,Iw)=>{te=Iw.exports=ve;var Pe;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Pe=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Pe=function(){};te.SEMVER_SPEC_VERSION="2.0.0";var ba=256,Gu=Number.MAX_SAFE_INTEGER||9007199254740991,Ep=16,eN=ba-6,Ta=te.re=[],je=te.safeRe=[],M=te.src=[],pe=0,Tp="[a-zA-Z0-9-]",wp=[["\\s",1],["\\d",ba],[Tp,eN]];function el(t){for(var e=0;e<wp.length;e++){var r=wp[e][0],n=wp[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var no=pe++;M[no]="0|[1-9]\\d*";var io=pe++;M[io]="\\d+";var Rp=pe++;M[Rp]="\\d*[a-zA-Z-]"+Tp+"*";var hw=pe++;M[hw]="("+M[no]+")\\.("+M[no]+")\\.("+M[no]+")";var gw=pe++;M[gw]="("+M[io]+")\\.("+M[io]+")\\.("+M[io]+")";var Cp=pe++;M[Cp]="(?:"+M[no]+"|"+M[Rp]+")";var Sp=pe++;M[Sp]="(?:"+M[io]+"|"+M[Rp]+")";var Dp=pe++;M[Dp]="(?:-("+M[Cp]+"(?:\\."+M[Cp]+")*))";var Ip=pe++;M[Ip]="(?:-?("+M[Sp]+"(?:\\."+M[Sp]+")*))";var bp=pe++;M[bp]=Tp+"+";var Da=pe++;M[Da]="(?:\\+("+M[bp]+"(?:\\."+M[bp]+")*))";var Pp=pe++,mw="v?"+M[hw]+M[Dp]+"?"+M[Da]+"?";M[Pp]="^"+mw+"$";var xp="[v=\\s]*"+M[gw]+M[Ip]+"?"+M[Da]+"?",qp=pe++;M[qp]="^"+xp+"$";var uo=pe++;M[uo]="((?:<|>)?=?)";var Xu=pe++;M[Xu]=M[io]+"|x|X|\\*";var Yu=pe++;M[Yu]=M[no]+"|x|X|\\*";var Yi=pe++;M[Yi]="[v=\\s]*("+M[Yu]+")(?:\\.("+M[Yu]+")(?:\\.("+M[Yu]+")(?:"+M[Dp]+")?"+M[Da]+"?)?)?";var oo=pe++;M[oo]="[v=\\s]*("+M[Xu]+")(?:\\.("+M[Xu]+")(?:\\.("+M[Xu]+")(?:"+M[Ip]+")?"+M[Da]+"?)?)?";var vw=pe++;M[vw]="^"+M[uo]+"\\s*"+M[Yi]+"$";var yw=pe++;M[yw]="^"+M[uo]+"\\s*"+M[oo]+"$";var _w=pe++;M[_w]="(?:^|[^\\d])(\\d{1,"+Ep+"})(?:\\.(\\d{1,"+Ep+"}))?(?:\\.(\\d{1,"+Ep+"}))?(?:$|[^\\d])";var tl=pe++;M[tl]="(?:~>?)";var ao=pe++;M[ao]="(\\s*)"+M[tl]+"\\s+";Ta[ao]=new RegExp(M[ao],"g");je[ao]=new RegExp(el(M[ao]),"g");var tN="$1~",Ew=pe++;M[Ew]="^"+M[tl]+M[Yi]+"$";var ww=pe++;M[ww]="^"+M[tl]+M[oo]+"$";var rl=pe++;M[rl]="(?:\\^)";var co=pe++;M[co]="(\\s*)"+M[rl]+"\\s+";Ta[co]=new RegExp(M[co],"g");je[co]=new RegExp(el(M[co]),"g");var rN="$1^",Cw=pe++;M[Cw]="^"+M[rl]+M[Yi]+"$";var Sw=pe++;M[Sw]="^"+M[rl]+M[oo]+"$";var Op=pe++;M[Op]="^"+M[uo]+"\\s*("+xp+")$|^$";var Ap=pe++;M[Ap]="^"+M[uo]+"\\s*("+mw+")$|^$";var Qi=pe++;M[Qi]="(\\s*)"+M[uo]+"\\s*("+xp+"|"+M[Yi]+")";Ta[Qi]=new RegExp(M[Qi],"g");je[Qi]=new RegExp(el(M[Qi]),"g");var nN="$1$2$3",bw=pe++;M[bw]="^\\s*("+M[Yi]+")\\s+-\\s+("+M[Yi]+")\\s*$";var Tw=pe++;M[Tw]="^\\s*("+M[oo]+")\\s+-\\s+("+M[oo]+")\\s*$";var Rw=pe++;M[Rw]="(<|>)?=?\\s*\\*";for(vn=0;vn<pe;vn++)Pe(vn,M[vn]),Ta[vn]||(Ta[vn]=new RegExp(M[vn]),je[vn]=new RegExp(el(M[vn])));var vn;te.parse=Ji;function Ji(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ve)return t;if(typeof t!="string"||t.length>ba)return null;var r=e.loose?je[qp]:je[Pp];if(!r.test(t))return null;try{return new ve(t,e)}catch{return null}}te.valid=iN;function iN(t,e){var r=Ji(t,e);return r?r.version:null}te.clean=sN;function sN(t,e){var r=Ji(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}te.SemVer=ve;function ve(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ve){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>ba)throw new TypeError("version is longer than "+ba+" characters");if(!(this instanceof ve))return new ve(t,e);Pe("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?je[qp]:je[Pp]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Gu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Gu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Gu||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Gu)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}ve.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ve.prototype.toString=function(){return this.version};ve.prototype.compare=function(t){return Pe("SemVer.compare",this.version,this.options,t),t instanceof ve||(t=new ve(t,this.options)),this.compareMain(t)||this.comparePre(t)};ve.prototype.compareMain=function(t){return t instanceof ve||(t=new ve(t,this.options)),so(this.major,t.major)||so(this.minor,t.minor)||so(this.patch,t.patch)};ve.prototype.comparePre=function(t){if(t instanceof ve||(t=new ve(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Pe("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return so(r,n)}while(++e)};ve.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};te.inc=oN;function oN(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new ve(t,r).inc(e,n).version}catch{return null}}te.diff=aN;function aN(t,e){if(Np(t,e))return null;var r=Ji(t),n=Ji(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==n[o])return i+o;return s}te.compareIdentifiers=so;var pw=/^[0-9]+$/;function so(t,e){var r=pw.test(t),n=pw.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}te.rcompareIdentifiers=cN;function cN(t,e){return so(e,t)}te.major=uN;function uN(t,e){return new ve(t,e).major}te.minor=lN;function lN(t,e){return new ve(t,e).minor}te.patch=fN;function fN(t,e){return new ve(t,e).patch}te.compare=Ln;function Ln(t,e,r){return new ve(t,r).compare(new ve(e,r))}te.compareLoose=dN;function dN(t,e){return Ln(t,e,!0)}te.rcompare=pN;function pN(t,e,r){return Ln(e,t,r)}te.sort=hN;function hN(t,e){return t.sort(function(r,n){return te.compare(r,n,e)})}te.rsort=gN;function gN(t,e){return t.sort(function(r,n){return te.rcompare(r,n,e)})}te.gt=Ra;function Ra(t,e,r){return Ln(t,e,r)>0}te.lt=Qu;function Qu(t,e,r){return Ln(t,e,r)<0}te.eq=Np;function Np(t,e,r){return Ln(t,e,r)===0}te.neq=Dw;function Dw(t,e,r){return Ln(t,e,r)!==0}te.gte=kp;function kp(t,e,r){return Ln(t,e,r)>=0}te.lte=Lp;function Lp(t,e,r){return Ln(t,e,r)<=0}te.cmp=Ju;function Ju(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Np(t,r,n);case"!=":return Dw(t,r,n);case">":return Ra(t,r,n);case">=":return kp(t,r,n);case"<":return Qu(t,r,n);case"<=":return Lp(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}te.Comparator=$r;function $r(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof $r){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof $r))return new $r(t,e);t=t.trim().split(/\s+/).join(" "),Pe("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Ia?this.value="":this.value=this.operator+this.semver.version,Pe("comp",this)}var Ia={};$r.prototype.parse=function(t){var e=this.options.loose?je[Op]:je[Ap],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new ve(r[2],this.options.loose):this.semver=Ia};$r.prototype.toString=function(){return this.value};$r.prototype.test=function(t){return Pe("Comparator.test",t,this.options.loose),this.semver===Ia?!0:(typeof t=="string"&&(t=new ve(t,this.options)),Ju(t,this.operator,this.semver,this.options))};$r.prototype.intersects=function(t,e){if(!(t instanceof $r))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Qe(t.value,e),Zu(this.value,r,e);if(t.operator==="")return r=new Qe(this.value,e),Zu(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=Ju(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=Ju(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&o||a||c};te.Range=Qe;function Qe(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Qe)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Qe(t.raw,e);if(t instanceof $r)return new Qe(t.value,e);if(!(this instanceof Qe))return new Qe(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Qe.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Qe.prototype.toString=function(){return this.range};Qe.prototype.parseRange=function(t){var e=this.options.loose,r=e?je[Tw]:je[bw];t=t.replace(r,TN),Pe("hyphen replace",t),t=t.replace(je[Qi],nN),Pe("comparator trim",t,je[Qi]),t=t.replace(je[ao],tN),t=t.replace(je[co],rN);var n=e?je[Op]:je[Ap],i=t.split(" ").map(function(s){return vN(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new $r(s,this.options)},this),i};Qe.prototype.intersects=function(t,e){if(!(t instanceof Qe))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};te.toComparators=mN;function mN(t,e){return new Qe(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function vN(t,e){return Pe("comp",t,e),t=EN(t,e),Pe("caret",t),t=yN(t,e),Pe("tildes",t),t=CN(t,e),Pe("xrange",t),t=bN(t,e),Pe("stars",t),t}function nr(t){return!t||t.toLowerCase()==="x"||t==="*"}function yN(t,e){return t.trim().split(/\s+/).map(function(r){return _N(r,e)}).join(" ")}function _N(t,e){var r=e.loose?je[ww]:je[Ew];return t.replace(r,function(n,i,s,o,a){Pe("tilde",t,n,i,s,o,a);var c;return nr(i)?c="":nr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":nr(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(Pe("replaceTilde pr",a),c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",Pe("tilde return",c),c})}function EN(t,e){return t.trim().split(/\s+/).map(function(r){return wN(r,e)}).join(" ")}function wN(t,e){Pe("caret",t,e);var r=e.loose?je[Sw]:je[Cw];return t.replace(r,function(n,i,s,o,a){Pe("caret",t,n,i,s,o,a);var c;return nr(i)?c="":nr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":nr(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(Pe("replaceCaret pr",a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+"-"+a+" <"+(+i+1)+".0.0"):(Pe("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),Pe("caret return",c),c})}function CN(t,e){return Pe("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return SN(r,e)}).join(" ")}function SN(t,e){t=t.trim();var r=e.loose?je[yw]:je[vw];return t.replace(r,function(n,i,s,o,a,c){Pe("xRange",t,n,i,s,o,a,c);var u=nr(s),d=u||nr(o),p=d||nr(a),m=p;return i==="="&&m&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(d&&(o=0),a=0,i===">"?(i=">=",d?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",d?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):d?n=">="+s+".0.0 <"+(+s+1)+".0.0":p&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),Pe("xRange return",n),n})}function bN(t,e){return Pe("replaceStars",t,e),t.trim().replace(je[Rw],"")}function TN(t,e,r,n,i,s,o,a,c,u,d,p,m){return nr(r)?e="":nr(n)?e=">="+r+".0.0":nr(i)?e=">="+r+"."+n+".0":e=">="+e,nr(c)?a="":nr(u)?a="<"+(+c+1)+".0.0":nr(d)?a="<"+c+"."+(+u+1)+".0":p?a="<="+c+"."+u+"."+d+"-"+p:a="<="+a,(e+" "+a).trim()}Qe.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new ve(t,this.options));for(var e=0;e<this.set.length;e++)if(RN(this.set[e],t,this.options))return!0;return!1};function RN(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Pe(t[n].semver),t[n].semver!==Ia&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}te.satisfies=Zu;function Zu(t,e,r){try{e=new Qe(e,r)}catch{return!1}return e.test(t)}te.maxSatisfying=DN;function DN(t,e,r){var n=null,i=null;try{var s=new Qe(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new ve(n,r))}),n}te.minSatisfying=IN;function IN(t,e,r){var n=null,i=null;try{var s=new Qe(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new ve(n,r))}),n}te.minVersion=PN;function PN(t,e){t=new Qe(t,e);var r=new ve("0.0.0");if(t.test(r)||(r=new ve("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(s){var o=new ve(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!r||Ra(r,o))&&(r=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}te.validRange=xN;function xN(t,e){try{return new Qe(t,e).range||"*"}catch{return null}}te.ltr=qN;function qN(t,e,r){return Mp(t,e,"<",r)}te.gtr=ON;function ON(t,e,r){return Mp(t,e,">",r)}te.outside=Mp;function Mp(t,e,r,n){t=new ve(t,n),e=new Qe(e,n);var i,s,o,a,c;switch(r){case">":i=Ra,s=Lp,o=Qu,a=">",c=">=";break;case"<":i=Qu,s=kp,o=Ra,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zu(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var d=e.set[u],p=null,m=null;if(d.forEach(function(v){v.semver===Ia&&(v=new $r(">=0.0.0")),p=p||v,m=m||v,i(v.semver,p.semver,n)?p=v:o(v.semver,m.semver,n)&&(m=v)}),p.operator===a||p.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0}te.prerelease=AN;function AN(t,e){var r=Ji(t,e);return r&&r.prerelease.length?r.prerelease:null}te.intersects=NN;function NN(t,e,r){return t=new Qe(t,r),e=new Qe(e,r),t.intersects(e)}te.coerce=kN;function kN(t){if(t instanceof ve)return t;if(typeof t!="string")return null;var e=t.match(je[_w]);return e==null?null:Ji(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var nl=y(($6,Ow)=>{"use strict";function Fp(t){return typeof t=="function"}var ir=console.error.bind(console);function Pa(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function xa(t){t&&t.logger&&(Fp(t.logger)?ir=t.logger:ir("new logger isn't a function, not replacing"))}function xw(t,e,r){if(!t||!t[e]){ir("no original function "+e+" to wrap");return}if(!r){ir("no wrapper function"),ir(new Error().stack);return}if(!Fp(t[e])||!Fp(r)){ir("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return Pa(i,"__original",n),Pa(i,"__unwrap",function(){t[e]===i&&Pa(t,e,n)}),Pa(i,"__wrapped",!0),Pa(t,e,i),i}function LN(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{ir("must provide one or more modules to patch"),ir(new Error().stack);return}if(!(e&&Array.isArray(e))){ir("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){xw(n,i,r)})})}function qw(t,e){if(!t||!t[e]){ir("no function to unwrap."),ir(new Error().stack);return}if(!t[e].__unwrap)ir("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function MN(t,e){if(t)Array.isArray(t)||(t=[t]);else{ir("must provide one or more modules to patch"),ir(new Error().stack);return}if(!(e&&Array.isArray(e))){ir("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){qw(r,n)})})}xa.wrap=xw;xa.massWrap=LN;xa.unwrap=qw;xa.massUnwrap=MN;Ow.exports=xa});var ol=y((H6,Lw)=>{"use strict";var Nw=nl(),lo=Nw.wrap,il=Nw.unwrap,Mn="wrap@before";function sl(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function FN(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],s=t[Mn];if(typeof s=="function")s(i);else if(Array.isArray(s))for(var o=s.length,a=0;a<o;a++)s[a](i)}}function kw(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function jN(t,e,r){var n=kw(t,e),i=n.filter(function(s){return r.indexOf(s)===-1});i.length>0&&FN(t,i)}function Aw(t,e){if(!!t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Lw.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(o){return function(c,u){var d=kw(this,c).slice();try{var p=o.call(this,c,u);return jN(this,c,d),p}finally{this.on.__wrapped||lo(this,"on",i),this.addListener.__wrapped||lo(this,"addListener",i)}}}function s(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function d(p){return function(){this._events[c]=u;try{return p.apply(this,arguments)}finally{u=this._events[c],this._events[c]=Aw(u,n)}}}lo(this,"removeListener",d);try{return this._events[c]=Aw(u,n),o.apply(this,arguments)}finally{il(this,"removeListener"),this._events[c]=u}}}e[Mn]?typeof e[Mn]=="function"?sl(e,Mn,[e[Mn],r]):Array.isArray(e[Mn])&&e[Mn].push(r):sl(e,Mn,r),e.__wrapped||(lo(e,"addListener",i),lo(e,"on",i),lo(e,"emit",s),sl(e,"__unwrap",function(){il(e,"addListener"),il(e,"on"),il(e,"emit"),delete e[Mn],delete e.__wrapped}),sl(e,"__wrapped",!0))}});var $w=y((B6,jw)=>{"use strict";var Se=require("util"),Fn=require("assert"),$N=ol(),Be=require("async_hooks"),qa="cls@contexts",Oa="error@context",Je=process.env.DEBUG_CLS_HOOKED,Ce=-1;jw.exports={getNamespace:Mw,createNamespace:HN,destroyNamespace:Fw,reset:BN,ERROR_SYMBOL:Oa};function Hr(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Hr.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Je){let n=" ".repeat(this._indent<0?0:this._indent);Ve(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Ce+" active:"+Se.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Hr.prototype.get=function(e){if(!this.active){if(Je){let r=Be.currentId(),n=Be.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ve(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Ce} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Je){let r=Be.executionAsyncId(),n=Be.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ve(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Ce+" active:"+Se.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Ve(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Ce} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${Se.inspect(this.active)}`)}return this.active[e]};Hr.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Ce,Je){let r=Be.executionAsyncId(),n=Be.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ve(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Ce} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${Se.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Hr.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Je){let n=Be.triggerAsyncId(),i=Be.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ve(`${s}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Ce} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${Se.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[Oa]=r),n}finally{if(Je){let n=Be.triggerAsyncId(),i=Be.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ve(`${s}CONTEXT-RUN END: (${this.name}) currentUid:${Ce} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${Se.inspect(r)}`)}this.exit(r)}};Hr.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Hr.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Je&&Ve("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Ce+" len:"+this._set.length+" "+Se.inspect(r)),n.then(i=>(Je&&Ve("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Ce+" len:"+this._set.length+" "+Se.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Oa]=r,Je&&Ve("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Ce+" len:"+this._set.length+" "+Se.inspect(r)),this.exit(r),i})};Hr.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[Oa]=r),s}finally{n.exit(r)}}};Hr.prototype.enter=function(e){if(Fn.ok(e,"context must be provided for entering"),Je){let r=Be.executionAsyncId(),n=Be.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ve(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Ce} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${Se.inspect(e)}`)}this._set.push(this.active),this.active=e};Hr.prototype.exit=function(e){if(Fn.ok(e,"context must be provided for exiting"),Je){let n=Be.executionAsyncId(),i=Be.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ve(`${s}CONTEXT-EXIT: (${this.name}) currentUid:${Ce} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${Se.inspect(e)}`)}if(this.active===e){Fn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Je&&Ve("??ERROR?? context exiting but not entered - ignoring: "+Se.inspect(e)),Fn.ok(r>=0,`context not currently entered; can't exit. 
`+Se.inspect(this)+`
`+Se.inspect(e))):(Fn.ok(r,"can't remove top context"),this._set.splice(r,1))};Hr.prototype.bindEmitter=function(e){Fn.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(o){!o||(o[qa]||(o[qa]=Object.create(null)),o[qa][n]={namespace:r,context:r.active})}function s(o){if(!(o&&o[qa]))return o;let a=o,c=o[qa];return Object.keys(c).forEach(function(u){let d=c[u];a=d.namespace.bind(a,d.context)}),a}$N(e,i,s)};Hr.prototype.fromException=function(e){return e[Oa]};function Mw(t){return process.namespaces[t]}function HN(t){Fn.ok(t,"namespace must be given a name."),Je&&Ve(`NS-CREATING NAMESPACE (${t})`);let e=new Hr(t);return e.id=Ce,Be.createHook({init(n,i,s,o){if(Ce=Be.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Je){let a=" ".repeat(e._indent<0?0:e._indent);Ve(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(Ce===0){let a=Be.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),Je){let u=" ".repeat(e._indent<0?0:e._indent);Ve(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Ce} triggerId:${a} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(Je){let u=" ".repeat(e._indent<0?0:e._indent);Ve(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Ce} triggerId:${a} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(Je&&i==="PROMISE"){Ve(Se.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(e._indent<0?0:e._indent);Ve(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){Ce=Be.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ce),i){if(Je){let s=Be.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Ve(`${o}BEFORE (${t}) asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`),e._indent+=2}e.enter(i)}else if(Je){let s=Be.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Ve(`${o}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${Se.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Ce=Be.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ce),i){if(Je){let s=Be.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);Ve(`${o}AFTER (${t}) asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`)}e.exit(i)}else if(Je){let s=Be.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);Ve(`${o}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ce} triggerId:${s} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`)}},destroy(n){if(Ce=Be.executionAsyncId(),Je){let i=Be.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Ve(`${s}DESTROY (${t}) currentUid:${Ce} asyncId:${n} triggerId:${i} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(e._contexts.get(Ce))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Fw(t){let e=Mw(t);Fn.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Fn.ok(e.id,"don't assign to process.namespaces directly! "+Se.inspect(e)),process.namespaces[t]=null}function BN(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Fw(t)}),process.namespaces=Object.create(null)}process.namespaces={};function Ve(...t){Je&&process._rawDebug(`${Se.format(...t)}`)}});var Bw=y((U6,Hw)=>{"use strict";function UN(){}Hw.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let s=i[0];if(typeof s!="function")throw new TypeError("callback is not a function");let o=new UN,a=--r.counter;return e.init.call(o,a,0,null,null),i[0]=function(){e.pre.call(o,a);let c=!0;try{s.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(o,a,!0),e.destroy.call(null,a)})}e.post.call(o,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var Ww=y((W6,Uw)=>{"use strict";function WN(){}Uw.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function s(u,d,p,m){return typeof u!="function"?m?o(p):a(p):function(){e.pre.call(d,p);try{return u.apply(this,arguments)}finally{e.post.call(d,p,!1),e.destroy.call(null,p)}}}function o(u){return function(p){return e.destroy.call(null,u),p}}function a(u){return function(p){throw e.destroy.call(null,u),p}}function c(u,d){if(!r.enabled)return i.call(this,u,d);let p=new WN,m=--r.counter;return e.init.call(p,m,0,null,null),i.call(this,s(u,p,m,!0),s(d,p,m,!1))}}});var Kw=y((z6,zw)=>{"use strict";var Rr=require("timers");function zN(){}function KN(){}function VN(){}var GN=new Map,XN=new Map,YN=new Map,jp=null,$p=!1;zw.exports=function(){Hp(this._hooks,this._state,"setTimeout","clearTimeout",zN,GN,!0),Hp(this._hooks,this._state,"setInterval","clearInterval",KN,XN,!1),Hp(this._hooks,this._state,"setImmediate","clearImmediate",VN,YN,!0),global.setTimeout=Rr.setTimeout,global.setInterval=Rr.setInterval,global.setImmediate=Rr.setImmediate,global.clearTimeout=Rr.clearTimeout,global.clearInterval=Rr.clearInterval,global.clearImmediate=Rr.clearImmediate};function Hp(t,e,r,n,i,s,o){let a=Rr[r],c=Rr[n];Rr[r]=function(){if(!e.enabled)return a.apply(Rr,arguments);let u=new Array(arguments.length);for(let b=0;b<arguments.length;b++)u[b]=arguments[b];let d=u[0];if(typeof d!="function")throw new TypeError('"callback" argument must be a function');let p=new i,m=--e.counter,v;return t.init.call(p,m,0,null,null),u[0]=function(){jp=v,t.pre.call(p,m);let b=!0;try{d.apply(this,arguments),b=!1}finally{b&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(p,m,!0),s.delete(v),t.destroy.call(null,m)})}t.post.call(p,m,!1),jp=null,(o||$p)&&($p=!1,s.delete(v),t.destroy.call(null,m))},v=a.apply(Rr,u),s.set(v,m),v},Rr[n]=function(u){if(jp===u&&u!==null)$p=!0;else if(s.has(u)){let d=s.get(u);s.delete(u),t.destroy.call(null,d)}c.apply(Rr,arguments)}}});var Bp=y((K6,QN)=>{QN.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var Xw=y((V6,Gw)=>{"use strict";var Na=process.binding("async_wrap"),JN=Na.Providers.TIMERWRAP,Vw={nextTick:Bw(),promise:Ww(),timers:Kw()},Aa=new Set;function ZN(){this.enabled=!1,this.counter=0}function Up(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,s,o,a){if(s===JN){Aa.add(i);return}for(let c of t)c(i,this,s,o,a)},this.pre=function(i){if(!Aa.has(i))for(let s of e)s(i,this)},this.post=function(i,s){if(!Aa.has(i))for(let o of r)o(i,this,s)},this.destroy=function(i){if(Aa.has(i)){Aa.delete(i);return}for(let s of n)s(i)}}Up.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function al(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}Up.prototype.remove=function(t){t.init&&al(this.initFns,t.init),t.pre&&al(this.preFns,t.pre),t.post&&al(this.postFns,t.post),t.destroy&&al(this.destroyFns,t.destroy)};function ka(){this._state=new ZN,this._hooks=new Up,this.version=Bp().version,this.providers=Na.Providers;for(let t of Object.keys(Vw))Vw[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),Na.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Gw.exports=ka;ka.prototype.addHooks=function(t){this._hooks.add(t)};ka.prototype.removeHooks=function(t){this._hooks.remove(t)};ka.prototype.enable=function(){this._state.enabled=!0,Na.enable()};ka.prototype.disable=function(){this._state.enabled=!1,Na.disable()}});var Wp=y((G6,ek)=>{ek.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var Qw=y((X6,Yw)=>{function tk(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}Yw.exports=function(e,r){var n=[];n.push(tk(e));for(var i=0;i<r.length;i++){var s=r[i],o;try{o=s.toString()}catch(a){try{o="<error: "+a+">"}catch{o="<error>"}}n.push("    at "+o)}return n.join(`
`)}});var tC=y((Y6,eC)=>{var cl=Qw();function Zw(){this.extend=new La,this.filter=new La,this.format=new Ma,this.version=Wp().version}var Kp=!1;Zw.prototype.callSite=function t(e){e||(e={}),Kp=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return Kp=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var gi=new Zw;function La(){this._modifiers=[]}La.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};La.prototype.attach=function(t){this._modifiers.push(t)};La.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function Ma(){this._formater=cl,this._previous=void 0}Ma.prototype.replace=function(t){t?this._formater=t:this.restore()};Ma.prototype.restore=function(){this._formater=cl,this._previous=void 0};Ma.prototype._backup=function(){this._previous=this._formater};Ma.prototype._roolback=function(){this._previous===cl?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&gi.format.replace(Error.prepareStackTrace);var zp=!1;function Jw(t,e){if(Kp)return e;if(zp)return cl(t,e);var r=e.concat();r=gi.extend._modify(t,r),r=gi.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),zp=!0;var n=gi.format._formater(t,r);return zp=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Jw},set:function(t){t===Jw?gi.format._roolback():(gi.format._backup(),gi.format.replace(t))}});function rk(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:rk,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});eC.exports=gi});var Gp=y((Q6,Vp)=>{if(global._stackChain)if(global._stackChain.version===Wp().version)Vp.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else Vp.exports=global._stackChain=tC()});var rC=y((J6,Xp)=>{"use strict";var nk=Xw();if(global._asyncHook)if(global._asyncHook.version===Bp().version)Xp.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Gp().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),Xp.exports=global._asyncHook=new nk});var cC=y((Z6,aC)=>{"use strict";var ht=require("util"),jn=require("assert"),ik=ol(),fo=rC(),Fa="cls@contexts",ja="error@context",iC=[];for(let t in fo.providers)iC[fo.providers[t]]=t;var nt=process.env.DEBUG_CLS_HOOKED,_t=-1;aC.exports={getNamespace:sC,createNamespace:sk,destroyNamespace:oC,reset:ok,ERROR_SYMBOL:ja};function Br(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Br.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return nt&&pt("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+_t+" active:"+ht.inspect(this.active,!0)),this.active[e]=r,r};Br.prototype.get=function(e){if(!this.active){nt&&pt("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+_t+" active:"+ht.inspect(this.active,!0));return}return nt&&pt("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+_t+" active:"+ht.inspect(this.active,!0)),this.active[e]};Br.prototype.createContext=function(){nt&&pt("   CREATING Context: "+this.name+" uid:"+_t+" len:"+this._set.length+"  active:"+ht.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=_t,nt&&pt("   CREATED Context: "+this.name+" uid:"+_t+" len:"+this._set.length+"  context:"+ht.inspect(e,!0,2,!0)),e};Br.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return nt&&pt(" BEFORE RUN: "+this.name+" uid:"+_t+" len:"+this._set.length+" "+ht.inspect(r)),e(r),r}catch(n){throw n&&(n[ja]=r),n}finally{nt&&pt(" AFTER RUN: "+this.name+" uid:"+_t+" len:"+this._set.length+" "+ht.inspect(r)),this.exit(r)}};Br.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Br.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return nt&&pt(" BEFORE runPromise: "+this.name+" uid:"+_t+" len:"+this._set.length+" "+ht.inspect(r)),n.then(i=>(nt&&pt(" AFTER runPromise: "+this.name+" uid:"+_t+" len:"+this._set.length+" "+ht.inspect(r)),this.exit(r),i)).catch(i=>{throw i[ja]=r,nt&&pt(" AFTER runPromise: "+this.name+" uid:"+_t+" len:"+this._set.length+" "+ht.inspect(r)),this.exit(r),i})};Br.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[ja]=r),s}finally{n.exit(r)}}};Br.prototype.enter=function(e){jn.ok(e,"context must be provided for entering"),nt&&pt("  ENTER "+this.name+" uid:"+_t+" len:"+this._set.length+" context: "+ht.inspect(e)),this._set.push(this.active),this.active=e};Br.prototype.exit=function(e){if(jn.ok(e,"context must be provided for exiting"),nt&&pt("  EXIT "+this.name+" uid:"+_t+" len:"+this._set.length+" context: "+ht.inspect(e)),this.active===e){jn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(nt&&pt("??ERROR?? context exiting but not entered - ignoring: "+ht.inspect(e)),jn.ok(r>=0,`context not currently entered; can't exit. 
`+ht.inspect(this)+`
`+ht.inspect(e))):(jn.ok(r,"can't remove top context"),this._set.splice(r,1))};Br.prototype.bindEmitter=function(e){jn.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(o){!o||(o[Fa]||(o[Fa]=Object.create(null)),o[Fa][n]={namespace:r,context:r.active})}function s(o){if(!(o&&o[Fa]))return o;let a=o,c=o[Fa];return Object.keys(c).forEach(function(u){let d=c[u];a=d.namespace.bind(a,d.context)}),a}ik(e,i,s)};Br.prototype.fromException=function(e){return e[ja]};function sC(t){return process.namespaces[t]}function sk(t){jn.ok(t,"namespace must be given a name."),nt&&pt("CREATING NAMESPACE "+t);let e=new Br(t);return e.id=_t,fo.addHooks({init(r,n,i,s,o){_t=r,s?(e._contexts.set(r,e._contexts.get(s)),nt&&pt("PARENTID: "+t+" uid:"+r+" parent:"+s+" provider:"+i)):e._contexts.set(_t,e.active),nt&&pt("INIT "+t+" uid:"+r+" parent:"+s+" provider:"+iC[i]+" active:"+ht.inspect(e.active,!0))},pre(r,n){_t=r;let i=e._contexts.get(r);i?(nt&&pt(" PRE "+t+" uid:"+r+" handle:"+ul(n)+" context:"+ht.inspect(i)),e.enter(i)):nt&&pt(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+ul(n))},post(r,n){_t=r;let i=e._contexts.get(r);i?(nt&&pt(" POST "+t+" uid:"+r+" handle:"+ul(n)+" context:"+ht.inspect(i)),e.exit(i)):nt&&pt(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+ul(n))},destroy(r){_t=r,nt&&pt("DESTROY "+t+" uid:"+r+" context:"+ht.inspect(e._contexts.get(_t))+" active:"+ht.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function oC(t){let e=sC(t);jn.ok(e,`can't delete nonexistent namespace! "`+t+'"'),jn.ok(e.id,"don't assign to process.namespaces directly! "+ht.inspect(e)),process.namespaces[t]=null}function ok(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){oC(t)}),process.namespaces=Object.create(null)}process.namespaces={};fo._state&&!fo._state.enabled&&fo.enable();function pt(t){process.env.DEBUG&&process._rawDebug(t)}function ul(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(nt){Yp=Gp();for(nC in Yp.filter._modifiers)Yp.filter.deattach(nC)}var Yp,nC});var uC=y((eW,Qp)=>{"use strict";var ak=Pw();process&&ak.gte(process.versions.node,"8.0.0")?Qp.exports=$w():Qp.exports=cC()});var RC=y((re,TC)=>{re=TC.exports=ye;var xe;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?xe=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:xe=function(){};re.SEMVER_SPEC_VERSION="2.0.0";var $a=256,ll=Number.MAX_SAFE_INTEGER||9007199254740991,Jp=16,ck=$a-6,Ha=re.re=[],$e=re.safeRe=[],F=re.src=[],he=0,nh="[a-zA-Z0-9-]",Zp=[["\\s",1],["\\d",$a],[nh,ck]];function ml(t){for(var e=0;e<Zp.length;e++){var r=Zp[e][0],n=Zp[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var po=he++;F[po]="0|[1-9]\\d*";var ho=he++;F[ho]="\\d+";var ih=he++;F[ih]="\\d*[a-zA-Z-]"+nh+"*";var fC=he++;F[fC]="("+F[po]+")\\.("+F[po]+")\\.("+F[po]+")";var dC=he++;F[dC]="("+F[ho]+")\\.("+F[ho]+")\\.("+F[ho]+")";var eh=he++;F[eh]="(?:"+F[po]+"|"+F[ih]+")";var th=he++;F[th]="(?:"+F[ho]+"|"+F[ih]+")";var sh=he++;F[sh]="(?:-("+F[eh]+"(?:\\."+F[eh]+")*))";var oh=he++;F[oh]="(?:-?("+F[th]+"(?:\\."+F[th]+")*))";var rh=he++;F[rh]=nh+"+";var Ua=he++;F[Ua]="(?:\\+("+F[rh]+"(?:\\."+F[rh]+")*))";var ah=he++,pC="v?"+F[fC]+F[sh]+"?"+F[Ua]+"?";F[ah]="^"+pC+"$";var ch="[v=\\s]*"+F[dC]+F[oh]+"?"+F[Ua]+"?",uh=he++;F[uh]="^"+ch+"$";var _o=he++;F[_o]="((?:<|>)?=?)";var fl=he++;F[fl]=F[ho]+"|x|X|\\*";var dl=he++;F[dl]=F[po]+"|x|X|\\*";var Zi=he++;F[Zi]="[v=\\s]*("+F[dl]+")(?:\\.("+F[dl]+")(?:\\.("+F[dl]+")(?:"+F[sh]+")?"+F[Ua]+"?)?)?";var mo=he++;F[mo]="[v=\\s]*("+F[fl]+")(?:\\.("+F[fl]+")(?:\\.("+F[fl]+")(?:"+F[oh]+")?"+F[Ua]+"?)?)?";var hC=he++;F[hC]="^"+F[_o]+"\\s*"+F[Zi]+"$";var gC=he++;F[gC]="^"+F[_o]+"\\s*"+F[mo]+"$";var mC=he++;F[mC]="(?:^|[^\\d])(\\d{1,"+Jp+"})(?:\\.(\\d{1,"+Jp+"}))?(?:\\.(\\d{1,"+Jp+"}))?(?:$|[^\\d])";var vl=he++;F[vl]="(?:~>?)";var vo=he++;F[vo]="(\\s*)"+F[vl]+"\\s+";Ha[vo]=new RegExp(F[vo],"g");$e[vo]=new RegExp(ml(F[vo]),"g");var uk="$1~",vC=he++;F[vC]="^"+F[vl]+F[Zi]+"$";var yC=he++;F[yC]="^"+F[vl]+F[mo]+"$";var yl=he++;F[yl]="(?:\\^)";var yo=he++;F[yo]="(\\s*)"+F[yl]+"\\s+";Ha[yo]=new RegExp(F[yo],"g");$e[yo]=new RegExp(ml(F[yo]),"g");var lk="$1^",_C=he++;F[_C]="^"+F[yl]+F[Zi]+"$";var EC=he++;F[EC]="^"+F[yl]+F[mo]+"$";var lh=he++;F[lh]="^"+F[_o]+"\\s*("+ch+")$|^$";var fh=he++;F[fh]="^"+F[_o]+"\\s*("+pC+")$|^$";var es=he++;F[es]="(\\s*)"+F[_o]+"\\s*("+ch+"|"+F[Zi]+")";Ha[es]=new RegExp(F[es],"g");$e[es]=new RegExp(ml(F[es]),"g");var fk="$1$2$3",wC=he++;F[wC]="^\\s*("+F[Zi]+")\\s+-\\s+("+F[Zi]+")\\s*$";var CC=he++;F[CC]="^\\s*("+F[mo]+")\\s+-\\s+("+F[mo]+")\\s*$";var SC=he++;F[SC]="(<|>)?=?\\s*\\*";for(yn=0;yn<he;yn++)xe(yn,F[yn]),Ha[yn]||(Ha[yn]=new RegExp(F[yn]),$e[yn]=new RegExp(ml(F[yn])));var yn;re.parse=ts;function ts(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ye)return t;if(typeof t!="string"||t.length>$a)return null;var r=e.loose?$e[uh]:$e[ah];if(!r.test(t))return null;try{return new ye(t,e)}catch{return null}}re.valid=dk;function dk(t,e){var r=ts(t,e);return r?r.version:null}re.clean=pk;function pk(t,e){var r=ts(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}re.SemVer=ye;function ye(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ye){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>$a)throw new TypeError("version is longer than "+$a+" characters");if(!(this instanceof ye))return new ye(t,e);xe("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?$e[uh]:$e[ah]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ll||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ll||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ll||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<ll)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}ye.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ye.prototype.toString=function(){return this.version};ye.prototype.compare=function(t){return xe("SemVer.compare",this.version,this.options,t),t instanceof ye||(t=new ye(t,this.options)),this.compareMain(t)||this.comparePre(t)};ye.prototype.compareMain=function(t){return t instanceof ye||(t=new ye(t,this.options)),go(this.major,t.major)||go(this.minor,t.minor)||go(this.patch,t.patch)};ye.prototype.comparePre=function(t){if(t instanceof ye||(t=new ye(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(xe("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return go(r,n)}while(++e)};ye.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};re.inc=hk;function hk(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new ye(t,r).inc(e,n).version}catch{return null}}re.diff=gk;function gk(t,e){if(dh(t,e))return null;var r=ts(t),n=ts(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==n[o])return i+o;return s}re.compareIdentifiers=go;var lC=/^[0-9]+$/;function go(t,e){var r=lC.test(t),n=lC.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}re.rcompareIdentifiers=mk;function mk(t,e){return go(e,t)}re.major=vk;function vk(t,e){return new ye(t,e).major}re.minor=yk;function yk(t,e){return new ye(t,e).minor}re.patch=_k;function _k(t,e){return new ye(t,e).patch}re.compare=$n;function $n(t,e,r){return new ye(t,r).compare(new ye(e,r))}re.compareLoose=Ek;function Ek(t,e){return $n(t,e,!0)}re.rcompare=wk;function wk(t,e,r){return $n(e,t,r)}re.sort=Ck;function Ck(t,e){return t.sort(function(r,n){return re.compare(r,n,e)})}re.rsort=Sk;function Sk(t,e){return t.sort(function(r,n){return re.rcompare(r,n,e)})}re.gt=Ba;function Ba(t,e,r){return $n(t,e,r)>0}re.lt=pl;function pl(t,e,r){return $n(t,e,r)<0}re.eq=dh;function dh(t,e,r){return $n(t,e,r)===0}re.neq=bC;function bC(t,e,r){return $n(t,e,r)!==0}re.gte=ph;function ph(t,e,r){return $n(t,e,r)>=0}re.lte=hh;function hh(t,e,r){return $n(t,e,r)<=0}re.cmp=hl;function hl(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return dh(t,r,n);case"!=":return bC(t,r,n);case">":return Ba(t,r,n);case">=":return ph(t,r,n);case"<":return pl(t,r,n);case"<=":return hh(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}re.Comparator=Ur;function Ur(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ur){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Ur))return new Ur(t,e);t=t.trim().split(/\s+/).join(" "),xe("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Wa?this.value="":this.value=this.operator+this.semver.version,xe("comp",this)}var Wa={};Ur.prototype.parse=function(t){var e=this.options.loose?$e[lh]:$e[fh],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new ye(r[2],this.options.loose):this.semver=Wa};Ur.prototype.toString=function(){return this.value};Ur.prototype.test=function(t){return xe("Comparator.test",t,this.options.loose),this.semver===Wa?!0:(typeof t=="string"&&(t=new ye(t,this.options)),hl(t,this.operator,this.semver,this.options))};Ur.prototype.intersects=function(t,e){if(!(t instanceof Ur))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Ze(t.value,e),gl(this.value,r,e);if(t.operator==="")return r=new Ze(this.value,e),gl(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=hl(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=hl(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&o||a||c};re.Range=Ze;function Ze(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ze)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Ze(t.raw,e);if(t instanceof Ur)return new Ze(t.value,e);if(!(this instanceof Ze))return new Ze(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Ze.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Ze.prototype.toString=function(){return this.range};Ze.prototype.parseRange=function(t){var e=this.options.loose,r=e?$e[CC]:$e[wC];t=t.replace(r,Ak),xe("hyphen replace",t),t=t.replace($e[es],fk),xe("comparator trim",t,$e[es]),t=t.replace($e[vo],uk),t=t.replace($e[yo],lk);var n=e?$e[lh]:$e[fh],i=t.split(" ").map(function(s){return Tk(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new Ur(s,this.options)},this),i};Ze.prototype.intersects=function(t,e){if(!(t instanceof Ze))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};re.toComparators=bk;function bk(t,e){return new Ze(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Tk(t,e){return xe("comp",t,e),t=Ik(t,e),xe("caret",t),t=Rk(t,e),xe("tildes",t),t=xk(t,e),xe("xrange",t),t=Ok(t,e),xe("stars",t),t}function sr(t){return!t||t.toLowerCase()==="x"||t==="*"}function Rk(t,e){return t.trim().split(/\s+/).map(function(r){return Dk(r,e)}).join(" ")}function Dk(t,e){var r=e.loose?$e[yC]:$e[vC];return t.replace(r,function(n,i,s,o,a){xe("tilde",t,n,i,s,o,a);var c;return sr(i)?c="":sr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":sr(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(xe("replaceTilde pr",a),c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",xe("tilde return",c),c})}function Ik(t,e){return t.trim().split(/\s+/).map(function(r){return Pk(r,e)}).join(" ")}function Pk(t,e){xe("caret",t,e);var r=e.loose?$e[EC]:$e[_C];return t.replace(r,function(n,i,s,o,a){xe("caret",t,n,i,s,o,a);var c;return sr(i)?c="":sr(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":sr(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(xe("replaceCaret pr",a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+"-"+a+" <"+(+i+1)+".0.0"):(xe("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),xe("caret return",c),c})}function xk(t,e){return xe("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return qk(r,e)}).join(" ")}function qk(t,e){t=t.trim();var r=e.loose?$e[gC]:$e[hC];return t.replace(r,function(n,i,s,o,a,c){xe("xRange",t,n,i,s,o,a,c);var u=sr(s),d=u||sr(o),p=d||sr(a),m=p;return i==="="&&m&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(d&&(o=0),a=0,i===">"?(i=">=",d?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",d?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):d?n=">="+s+".0.0 <"+(+s+1)+".0.0":p&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),xe("xRange return",n),n})}function Ok(t,e){return xe("replaceStars",t,e),t.trim().replace($e[SC],"")}function Ak(t,e,r,n,i,s,o,a,c,u,d,p,m){return sr(r)?e="":sr(n)?e=">="+r+".0.0":sr(i)?e=">="+r+"."+n+".0":e=">="+e,sr(c)?a="":sr(u)?a="<"+(+c+1)+".0.0":sr(d)?a="<"+c+"."+(+u+1)+".0":p?a="<="+c+"."+u+"."+d+"-"+p:a="<="+a,(e+" "+a).trim()}Ze.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new ye(t,this.options));for(var e=0;e<this.set.length;e++)if(Nk(this.set[e],t,this.options))return!0;return!1};function Nk(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(xe(t[n].semver),t[n].semver!==Wa&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}re.satisfies=gl;function gl(t,e,r){try{e=new Ze(e,r)}catch{return!1}return e.test(t)}re.maxSatisfying=kk;function kk(t,e,r){var n=null,i=null;try{var s=new Ze(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new ye(n,r))}),n}re.minSatisfying=Lk;function Lk(t,e,r){var n=null,i=null;try{var s=new Ze(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new ye(n,r))}),n}re.minVersion=Mk;function Mk(t,e){t=new Ze(t,e);var r=new ye("0.0.0");if(t.test(r)||(r=new ye("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(s){var o=new ye(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!r||Ba(r,o))&&(r=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}re.validRange=Fk;function Fk(t,e){try{return new Ze(t,e).range||"*"}catch{return null}}re.ltr=jk;function jk(t,e,r){return gh(t,e,"<",r)}re.gtr=$k;function $k(t,e,r){return gh(t,e,">",r)}re.outside=gh;function gh(t,e,r,n){t=new ye(t,n),e=new Ze(e,n);var i,s,o,a,c;switch(r){case">":i=Ba,s=hh,o=pl,a=">",c=">=";break;case"<":i=pl,s=ph,o=Ba,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gl(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var d=e.set[u],p=null,m=null;if(d.forEach(function(v){v.semver===Wa&&(v=new Ur(">=0.0.0")),p=p||v,m=m||v,i(v.semver,p.semver,n)?p=v:o(v.semver,m.semver,n)&&(m=v)}),p.operator===a||p.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0}re.prerelease=Hk;function Hk(t,e){var r=ts(t,e);return r&&r.prerelease.length?r.prerelease:null}re.intersects=Bk;function Bk(t,e,r){return t=new Ze(t,r),e=new Ze(e,r),t.intersects(e)}re.coerce=Uk;function Uk(t){if(t instanceof ye)return t;if(typeof t!="string")return null;var e=t.match($e[mC]);return e==null?null:ts(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var PC=y((tW,IC)=>{var Wk=nl().wrap,vh=1<<0,yh=1<<1,_h=1<<2,El=1<<3,ke=[],zk=0,Gt=!1,mi=[],Eo,Eh;function wh(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var s=0;s<r;s++)i[s]=t[s];if(n===0)return i;for(var o=0;o<n;o++){var a=!0;for(s=0;s<r;s++)if(t[s].uid===e[o].uid){a=!1;break}a&&i.push(e[o])}return i}process._fatalException?(_l=!1,Eo=function(e){var r=ke.length;if(_l||r===0)return!1;var n=!1;_l=!0;for(var i=0;i<r;++i){var s=ke[i];if((s.flags&El)!==0){var o=wo&&wo[s.uid];n=s.error(o,e)||n}}return _l=!1,mi.length>0&&(ke=mi.pop()),wo=void 0,n&&!Gt},Eh=function(e,r,n){var i=[];Gt=!0;for(var s=0;s<n;++s){var o=r[s];if(i[o.uid]=o.data,(o.flags&vh)!==0){var a=o.create(o.data);a!==void 0&&(i[o.uid]=a)}}return Gt=!1,function(){wo=i,mi.push(ke),ke=wh(r,ke),Gt=!0;for(var c=0;c<n;++c)(r[c].flags&yh)>0&&r[c].before(this,i[r[c].uid]);Gt=!1;var u=e.apply(this,arguments);for(Gt=!0,c=0;c<n;++c)(r[c].flags&_h)>0&&r[c].after(this,i[r[c].uid]);return Gt=!1,ke=mi.pop(),wo=void 0,u}},Wk(process,"_fatalException",function(t){return function(r){return Eo(r)||t(r)}})):(mh=!1,Eo=function(e){if(mh)throw e;for(var r=!1,n=ke.length,i=0;i<n;++i){var s=ke[i];(s.flags&El)!==0&&(r=s.error(null,e)||r)}if(!r&&Gt)throw e},Eh=function(e,r,n){var i=[];Gt=!0;for(var s=0;s<n;++s){var o=r[s];if(i[o.uid]=o.data,(o.flags&vh)!==0){var a=o.create(o.data);a!==void 0&&(i[o.uid]=a)}}return Gt=!1,function(){var c=!1,u=!1;mi.push(ke),ke=wh(r,ke),Gt=!0;for(var d=0;d<n;++d)(r[d].flags&yh)>0&&r[d].before(this,i[r[d].uid]);Gt=!1;var p;try{p=e.apply(this,arguments)}catch(m){c=!0;for(var d=0;d<n;++d)if((ke[d].flags&El)!=0)try{u=ke[d].error(i[r[d].uid],m)||u}catch(b){throw mh=!0,b}if(!u)throw process.removeListener("uncaughtException",Eo),process._originalNextTick(function(){process.addListener("uncaughtException",Eo)}),m}finally{if(!c||u){for(Gt=!0,d=0;d<n;++d)(r[d].flags&_h)>0&&r[d].after(this,i[r[d].uid]);Gt=!1}ke=mi.pop()}return p}},process.addListener("uncaughtException",Eo));var _l,wo,mh;function Kk(t,e,r){Gt=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return Gt=!1,function(){mi.push(ke),ke=wh(e,ke);var s=t.apply(this,arguments);return ke=mi.pop(),s}}function Vk(t){var e=ke.length;if(e===0)return t;for(var r=ke.slice(),n=0;n<e;++n)if(r[n].flags>0)return Eh(t,r,e);return Kk(t,r,e)}function _n(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=vh),typeof t.before=="function"&&(this.before=t.before,this.flags|=yh),typeof t.after=="function"&&(this.after=t.after,this.flags|=_h),typeof t.error=="function"&&(this.error=t.error,this.flags|=El),this.uid=++zk,this.data=e===void 0?null:e}_n.prototype.create=void 0;_n.prototype.before=void 0;_n.prototype.after=void 0;_n.prototype.error=void 0;_n.prototype.data=void 0;_n.prototype.uid=0;_n.prototype.flags=0;function DC(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof _n?t:new _n(t,e)}function Gk(t,e){var r;t instanceof _n?r=t:r=DC(t,e);for(var n=!1,i=0;i<ke.length;i++)if(r===ke[i]){n=!0;break}return n||ke.push(r),r}function Xk(t){for(var e=0;e<ke.length;e++)if(t===ke[e]){ke.splice(e,1);break}}process.createAsyncListener=DC;process.addAsyncListener=Gk;process.removeAsyncListener=Xk;IC.exports=Vk});var qC=y((nW,xC)=>{"use strict";xC.exports=(t,e)=>class extends t{constructor(n){var i,s;super(a);var o=this;try{n.apply(i,s)}catch(c){s[1](c)}return o;function a(c,u){i=this,s=[d,p];function d(m){return e(o,!1),c(m)}function p(m){return e(o,!1),u(m)}}}}});var FC=y(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var kC=nl(),Cl=RC(),gr=kC.wrap,vi=kC.massWrap,et=PC(),Yk=require("util"),Qk=Cl.gte(process.version,"6.0.0"),bh=Cl.gte(process.version,"7.0.0"),Jk=Cl.gte(process.version,"8.0.0"),Zk=Cl.gte(process.version,"11.0.0"),En=require("net");bh&&!En._normalizeArgs?En._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:iL(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!bh&&!En._normalizeConnectArgs&&(En._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in En.Server.prototype?gr(En.Server.prototype,"_setUpListenHandle",OC):gr(En.Server.prototype,"_listen2",OC);function OC(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=et(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=et(this._handle.onconnection))}}}function LC(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=et(e._originalOnread)}}gr(En.Socket.prototype,"connect",function(t){return function(){var e;Jk&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=bh?En._normalizeArgs(arguments):En._normalizeConnectArgs(arguments),e[1]&&(e[1]=et(e[1]));var r=t.apply(this,e);return LC(this),r}});var eL=require("http");gr(eL.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=et(function(n){return LC(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var Ch=require("child_process");function AC(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=et(e._handle.onread),gr(e._handle,"close",Sl))}),t._handle&&(t._handle.onexit=et(t._handle.onexit))}Ch.ChildProcess?gr(Ch.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return AC(this),e}}):vi(Ch,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return AC(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var Dh=[];process._nextDomainTick&&Dh.push("_nextDomainTick");process._tickDomainCallback&&Dh.push("_tickDomainCallback");vi(process,Dh,wn);gr(process,"nextTick",Sl);var Ih=["setTimeout","setInterval"];global.setImmediate&&Ih.push("setImmediate");var MC=require("timers"),tL=global.setTimeout===MC.setTimeout;vi(MC,Ih,Sl);tL&&vi(global,Ih,Sl);var Th=require("dns");vi(Th,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],wn);Th.resolveNaptr&&gr(Th,"resolveNaptr",wn);var ns=require("fs");vi(ns,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],wn);ns.lchown&&gr(ns,"lchown",wn);ns.lchmod&&gr(ns,"lchmod",wn);ns.ftruncate&&gr(ns,"ftruncate",wn);var za;try{za=require("zlib")}catch{}za&&za.Deflate&&za.Deflate.prototype&&(rs=Object.getPrototypeOf(za.Deflate.prototype),rs._transform?gr(rs,"_transform",wn):rs.write&&rs.flush&&rs.end&&vi(rs,["write","flush","end"],wn));var rs,Rh;try{Rh=require("crypto")}catch{}Rh&&(Sh=["pbkdf2","randomBytes"],Zk||Sh.push("pseudoRandomBytes"),vi(Rh,Sh,wn));var Sh,wl=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";wl&&(NC=process.addAsyncListener({create:function(){wl=!1}}),global.Promise.resolve(!0).then(function(){wl=!1}),process.removeAsyncListener(NC));var NC;wl&&rL();function rL(){var t=global.Promise;function e(o){if(!(this instanceof e))return t(o);if(typeof o!="function")return new t(o);var a,c,u=new t(d);u.__proto__=e.prototype;try{o.apply(a,c)}catch(p){c[1](p)}return u;function d(p,m){a=this,c=[v,b];function v(P){return n(u,!1),p(P)}function b(P){return n(u,!1),m(P)}}}if(Yk.inherits(e,t),gr(t.prototype,"then",s),t.prototype.chain&&gr(t.prototype,"chain",s),Qk)global.Promise=qC()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(o){typeof t[o]=="function"&&(e[o]=t[o])}),global.Promise=e}function n(o,a){(!o.__asl_wrapper||a)&&(o.__asl_wrapper=et(i))}function i(o,a,c,u){var d;try{return d=a.call(o,c),{returnVal:d,error:!1}}catch(p){return{errorVal:p,error:!0}}finally{d instanceof t?u.__asl_wrapper=function(){var m=d.__asl_wrapper||i;return m.apply(this,arguments)}:n(u,!0)}}function s(o){return function(){var c=this,u=o.apply(c,Array.prototype.map.call(arguments,d));return u.__asl_wrapper=function(m,v,b,P){return c.__asl_wrapper?(c.__asl_wrapper(m,function(){},null,u),u.__asl_wrapper(m,v,b,P)):i(m,v,b,P)},u;function d(p){return typeof p!="function"?p:et(function(m){var v=(c.__asl_wrapper||i)(this,p,m,u);if(v.error)throw v.errorVal;return v.returnVal})}}}}function wn(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=et(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=et(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=et(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,s){return arguments.length!==4?e.apply(this,arguments):(typeof s=="function"&&(s=et(s)),t.call(this,r,n,i,s))};case 5:return function(r,n,i,s,o){return arguments.length!==5?e.apply(this,arguments):(typeof o=="function"&&(o=et(o)),t.call(this,r,n,i,s,o))};case 6:return function(r,n,i,s,o,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=et(a)),t.call(this,r,n,i,s,o,a))};default:return e}}function Sl(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=et(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,s){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r,n,i,s))};case 5:return function(r,n,i,s,o){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r,n,i,s,o))};case 6:return function(r,n,i,s,o,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=et(r)),t.call(this,r,n,i,s,o,a))};default:return e}}function nL(t){return(t=Number(t))>=0?t:!1}function iL(t){return typeof t=="string"&&nL(t)===!1}});var UC=y((oW,BC)=>{"use strict";var Hn=require("assert"),sL=ol(),Ka="cls@contexts",Ph="error@context";process.addAsyncListener||FC();function en(t){this.name=t,this.active=null,this._set=[],this.id=null}en.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};en.prototype.get=function(t){if(!!this.active)return this.active[t]};en.prototype.createContext=function(){return Object.create(this.active)};en.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[Ph]=e),r}finally{this.exit(e)}};en.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};en.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[Ph]=e),n}finally{r.exit(e)}}};en.prototype.enter=function(t){Hn.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};en.prototype.exit=function(t){if(Hn.ok(t,"context must be provided for exiting"),this.active===t){Hn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Hn.ok(e>=0,"context not currently entered; can't exit"),Hn.ok(e,"can't remove top context"),this._set.splice(e,1)};en.prototype.bindEmitter=function(t){Hn.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(s){!s||(s[Ka]||(s[Ka]=Object.create(null)),s[Ka][r]={namespace:e,context:e.active})}function i(s){if(!(s&&s[Ka]))return s;var o=s,a=s[Ka];return Object.keys(a).forEach(function(c){var u=a[c];o=u.namespace.bind(o,u.context)}),o}sL(t,n,i)};en.prototype.fromException=function(t){return t[Ph]};function jC(t){return process.namespaces[t]}function oL(t){Hn.ok(t,"namespace must be given a name!");var e=new en(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function $C(t){var e=jC(t);Hn.ok(e,"can't delete nonexistent namespace!"),Hn.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function HC(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){$C(t)}),process.namespaces=Object.create(null)}process.namespaces||HC();BC.exports={getNamespace:jC,createNamespace:oL,destroyNamespace:$C,reset:HC}});var $i=y(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});var zC=Dt(),aL=Hu(),Va=Sa(),xh=Jd(),WC=_p(),cL=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,s,o){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:s,tracestate:o},customProperties:new uL(i)}:null},t.spanToContextObject=function(e,r,n){var i=new Va;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=e.traceFlags||Va.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){if(t.enabled)return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))();return r();var n},t.wrapEmitter=function(e){t.enabled&&t.session.bindEmitter(e)},t.wrapCallback=function(e,r){if(t.enabled)return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0);return e;var n},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=uC():this.cls=UC()),t.session=this.cls.createNamespace("AI-CLS-Session"),aL.registerContextPreservation(function(r){return t.session.bind(r)})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.traceId?e:null,s=e&&e.headers;if(i){var o=new Va("00-"+i.traceId+"-"+i.spanId+"-01"),a=new xh(i.tracestate),c=t.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,o,a);return c}if(n){var o=new Va(n.traceparent),a=new xh(n.tracestate),u=typeof r=="object"?new WC(r):null,c=t.generateContextObject(o.traceId,o.parentId,typeof r=="string"?r:u.getOperationName({}),u&&u.getCorrelationContextHeader()||void 0,o,a);return c}if(s){var o=new Va(s.traceparent),a=new xh(s.tracestate),u=new WC(e),c=t.generateContextObject(o.traceId,o.parentId,u.getOperationName({}),u.getCorrelationContextHeader(),o,a);return c}return zC.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();qh.CorrelationContextManager=cL;var uL=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){zC.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var VC=y(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var KC=Tr(),Oh=dt(),is=[],Ah=function(t){var e=t.data.message;is.forEach(function(r){e instanceof Error?r.trackException({exception:e}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?KC.SeverityLevel.Warning:KC.SeverityLevel.Information}))})};function lL(t,e){t?(is.length===0&&Oh.channel.subscribe("console",Ah),is.push(e)):(is=is.filter(function(r){return r!=e}),is.length===0&&Oh.channel.unsubscribe("console",Ah))}bl.enable=lL;function fL(){Oh.channel.unsubscribe("console",Ah),is=[]}bl.dispose=fL});var GC=y(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var Co=Tr(),Nh=dt(),ss=[],dL={10:Co.SeverityLevel.Verbose,20:Co.SeverityLevel.Verbose,30:Co.SeverityLevel.Information,40:Co.SeverityLevel.Warning,50:Co.SeverityLevel.Error,60:Co.SeverityLevel.Critical},kh=function(t){var e=t.data.result;ss.forEach(function(r){var n=dL[t.data.level];e instanceof Error?r.trackException({exception:e}):r.trackTrace({message:e,severity:n})})};function pL(t,e){t?(ss.length===0&&Nh.channel.subscribe("bunyan",kh),ss.push(e)):(ss=ss.filter(function(r){return r!=e}),ss.length===0&&Nh.channel.unsubscribe("bunyan",kh))}Tl.enable=pL;function hL(){Nh.channel.unsubscribe("bunyan",kh),ss=[]}Tl.dispose=hL});var XC=y(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var Ht=Tr(),Lh=dt(),os=[],gL={syslog:function(t){var e={emerg:Ht.SeverityLevel.Critical,alert:Ht.SeverityLevel.Critical,crit:Ht.SeverityLevel.Critical,error:Ht.SeverityLevel.Error,warning:Ht.SeverityLevel.Warning,notice:Ht.SeverityLevel.Information,info:Ht.SeverityLevel.Information,debug:Ht.SeverityLevel.Verbose};return e[t]===void 0?Ht.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Ht.SeverityLevel.Error,warn:Ht.SeverityLevel.Warning,info:Ht.SeverityLevel.Information,verbose:Ht.SeverityLevel.Verbose,debug:Ht.SeverityLevel.Verbose,silly:Ht.SeverityLevel.Verbose};return e[t]===void 0?Ht.SeverityLevel.Information:e[t]},unknown:function(t){return Ht.SeverityLevel.Information}},Mh=function(t){var e=t.data.message;os.forEach(function(r){if(e instanceof Error)r.trackException({exception:e,properties:t.data.meta});else{var n=gL[t.data.levelKind](t.data.level);r.trackTrace({message:e,severity:n,properties:t.data.meta})}})};function mL(t,e){t?(os.length===0&&Lh.channel.subscribe("winston",Mh),os.push(e)):(os=os.filter(function(r){return r!=e}),os.length===0&&Lh.channel.unsubscribe("winston",Mh))}Rl.enable=mL;function vL(){Lh.channel.unsubscribe("winston",Mh),os=[]}Rl.dispose=vL});var QC=y((fW,YC)=>{"use strict";var yL=Hu(),_L=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){yL.IsInitialized&&(VC().enable(e&&r,this._client),GC().enable(e,this._client),XC().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();YC.exports=_L});var ZC=y((dW,JC)=>{"use strict";var EL=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(s,o,a){a===void 0&&(a=new Error(t._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:a}),r._client.flush({isAppCrashing:!0}),s&&o&&process.listeners(o).length===1&&(console.error(a),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();JC.exports=EL});var yi=y(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Ee.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Ee.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Xt;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Xt=Ee.QuickPulseCounter||(Ee.QuickPulseCounter={}));var Dl;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Dl=Ee.PerformanceCounter||(Ee.PerformanceCounter={}));Ee.PerformanceToQuickPulseCounter=(tn={},tn[Dl.PROCESSOR_TIME]=Xt.PROCESSOR_TIME,tn[Dl.REQUEST_RATE]=Xt.REQUEST_RATE,tn[Dl.REQUEST_DURATION]=Xt.REQUEST_DURATION,tn[Xt.COMMITTED_BYTES]=Xt.COMMITTED_BYTES,tn[Xt.REQUEST_FAILURE_RATE]=Xt.REQUEST_FAILURE_RATE,tn[Xt.DEPENDENCY_RATE]=Xt.DEPENDENCY_RATE,tn[Xt.DEPENDENCY_FAILURE_RATE]=Xt.DEPENDENCY_FAILURE_RATE,tn[Xt.DEPENDENCY_DURATION]=Xt.DEPENDENCY_DURATION,tn[Xt.EXCEPTION_RATE]=Xt.EXCEPTION_RATE,tn);Ee.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Ee.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Ee.TelemetryTypeStringToQuickPulseType={EventData:Ee.QuickPulseType.Event,ExceptionData:Ee.QuickPulseType.Exception,MessageData:Ee.QuickPulseType.Trace,MetricData:Ee.QuickPulseType.Metric,RequestData:Ee.QuickPulseType.Request,RemoteDependencyData:Ee.QuickPulseType.Dependency,AvailabilityData:Ee.QuickPulseType.Availability,PageViewData:Ee.QuickPulseType.PageView};Ee.TelemetryTypeStringToQuickPulseDocumentType={EventData:Ee.QuickPulseDocumentType.Event,ExceptionData:Ee.QuickPulseDocumentType.Exception,MessageData:Ee.QuickPulseDocumentType.Trace,MetricData:Ee.QuickPulseDocumentType.Metric,RequestData:Ee.QuickPulseDocumentType.Request,RemoteDependencyData:Ee.QuickPulseDocumentType.Dependency,AvailabilityData:Ee.QuickPulseDocumentType.Availability,PageViewData:Ee.QuickPulseDocumentType.PageView};Ee.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};Ee.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};Ee.HeartBeatMetricName="HeartBeat";var tn});var Pl=y((hW,eS)=>{"use strict";var Il=require("os"),Wr=yi(),wL=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=Il.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=Il.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,s=0,o=0,a=0;!!e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],d="% cpu("+a+") ",p=c.model,m=c.speed,v=c.times,b=u.times,P=v.user-b.user||0;r+=P;var j=v.sys-b.sys||0;n+=j;var A=v.nice-b.nice||0;i+=A;var D=v.idle-b.idle||0;s+=D;var O=v.irq-b.irq||0;o+=O}var x=void 0;if(typeof process.cpuUsage=="function"){var H=process.cpuUsage(),le=process.hrtime(),Ne=H.user-this._lastAppCpuUsage.user+(H.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var Ke=(le[0]-this._lastHrtime[0])*1e6+(le[1]-this._lastHrtime[1])/1e3||0;x=100*Ne/(Ke*e.length)}this._lastAppCpuUsage=H,this._lastHrtime=le}var Te=r+n+i+s+o||1;this._client.trackMetric({name:Wr.PerformanceCounter.PROCESSOR_TIME,value:(Te-s)/Te*100}),this._client.trackMetric({name:Wr.PerformanceCounter.PROCESS_TIME,value:x||r/Te*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=Il.freemem(),r=process.memoryUsage().rss,n=Il.totalmem()-e;this._client.trackMetric({name:Wr.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Wr.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Wr.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,s=r.time-e.time,o=s/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,s>0){var c=n/o,u=i/o;this._client.trackMetric({name:Wr.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Wr.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Wr.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,s=r.time-e.time,o=s/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,s>0){var c=n/o,u=i/o;this._client.trackMetric({name:Wr.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:Wr.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Wr.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,s=i/1e3;if(i>0){var o=n/s;this._client.trackMetric({name:Wr.QuickPulseCounter.EXCEPTION_RATE,value:o})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._lastRequestExecutionTime=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._lastDependencyExecutionTime=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();eS.exports=wL});var Ga=y((gW,iS)=>{"use strict";var Bn=require("os"),tS=require("fs"),rS=require("path"),CL=Tr(),nS=Dt(),SL=function(){function t(e){this.keys=new CL.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){if(e=e||rS.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";try{var r=JSON.parse(tS.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}catch(n){nS.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=t.appVersion[e]},t.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=Bn&&Bn.hostname(),this.tags[this.keys.deviceOSVersion]=Bn&&Bn.type()+" "+Bn.release(),this.tags[this.keys.cloudRole]=t.DefaultRoleName,this.tags["ai.device.osArchitecture"]=Bn&&Bn.arch(),this.tags["ai.device.osPlatform"]=Bn&&Bn.platform()},t.prototype._loadInternalContext=function(){var e=rS.resolve(__dirname,"../../package.json");if(!t.sdkVersion){t.sdkVersion="unknown";try{var r=JSON.parse(tS.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.sdkVersion=r.version)}catch(n){nS.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();iS.exports=SL});var oS=y((jh,sS)=>{"use strict";var bL=jh&&jh.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn=require("url"),Fh=Tr(),TL=br(),RL=to(),DL=mp(),IL=Ki(),PL=function(t){bL(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=TL.getCorrelationContextTarget(r,RL.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=rn.parse(this.url);i.search=void 0,i.hash=void 0;var s=this.method.toUpperCase()+" "+i.pathname,o=Fh.RemoteDependencyDataConstants.TYPE_HTTP,a=i.hostname;i.port&&(a+=":"+i.port),this.correlationId?(o=Fh.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==IL.correlationIdPrefix&&(a+=" | "+this.correlationId)):o=Fh.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:s,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:a};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=rn.parse(r);else{var i=rn.parse(r);i.host==="443"?r=rn.parse("https://"+r):r=rn.parse("http://"+r)}else{if(r&&typeof rn.URL=="function"&&r instanceof rn.URL)return rn.format(r);var s=r;r={},s&&Object.keys(s).forEach(function(c){r[c]=s[c]})}if(r.path){var o=rn.parse(r.path);r.pathname=o.pathname,r.search=o.search}if(r.host&&r.port){var a=rn.parse("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",rn.format(r)},e}(DL);sS.exports=PL});var cS=y(Xa=>{"use strict";var aS=Xa&&Xa.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Xa,"__esModule",{value:!0});var xL=Tu(),mr=yi();function $h(t){var e=aS({},t);return Object.keys(mr.SpanAttribute).forEach(function(r){delete e[r]}),e}function qL(t){var e="|"+t.context().traceId+"."+t.context().spanId+".",r=Math.round(t._duration[0]*1e3+t._duration[1]/1e6),n=t.attributes["peer.address"]?t.attributes["peer.address"].toString():"",i=t.attributes.component?t.attributes.component.toString():"",s=i.toUpperCase()===mr.DependencyTypeName.Http||!!t.attributes[mr.SpanAttribute.HttpUrl],o=i.toLowerCase()===mr.DependencyTypeName.Grpc;if(s){var a=t.attributes[mr.SpanAttribute.HttpMethod]||"GET",c=new URL(t.attributes[mr.SpanAttribute.HttpUrl].toString()),u=t.attributes[mr.SpanAttribute.HttpHost]||c.host,d=t.attributes[mr.SpanAttribute.HttpPort]||c.port||null,p=c.pathname||"/",m=a+" "+p,v=mr.DependencyTypeName.Http,b=d?(u+":"+d).toString():u.toString(),P=c.toString(),j=t.attributes[mr.SpanAttribute.HttpStatusCode]||t.status.code||0,A=j<400;return{id:e,name:m,dependencyTypeName:v,target:b,data:P,success:A,duration:r,url:P,resultCode:String(j),properties:$h(t.attributes)}}else if(o){var a=t.attributes[mr.SpanAttribute.GrpcMethod]||"rpc",D=t.attributes[mr.SpanAttribute.GrpcService],O=D?a+" "+D:t.name;return{id:e,duration:r,name:O,target:D.toString(),data:D.toString()||O,url:D.toString()||O,dependencyTypeName:mr.DependencyTypeName.Grpc,resultCode:String(t.status.code||0),success:t.status.code===0,properties:$h(t.attributes)}}else{var x=t.name,H=t.links&&t.links.map(function(le){return{operation_Id:le.context.traceId,id:le.context.spanId}});return{id:e,duration:r,name:x,target:n,data:n||x,url:n||x,dependencyTypeName:t.kind===xL.SpanKind.INTERNAL?mr.DependencyTypeName.InProc:i||t.name,resultCode:String(t.status.code||0),success:t.status.code===0,properties:aS({},$h(t.attributes),{"_MS.links":H||void 0})}}}Xa.spanToTelemetryContract=qL});var lS=y(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var uS=dt(),OL=Sa(),AL=cS(),xl=Tu(),So=[];bo.subscriber=function(t){var e=t.data,r=AL.spanToTelemetryContract(e),n=e.context(),i=new OL;i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=n.traceFlags.toString(),i.parentId=e.parentSpanId?"|"+n.traceId+"."+e.parentSpanId+".":null,xl.AsyncScopeManager.with(e,function(){So.forEach(function(s){e.kind===xl.SpanKind.SERVER?s.trackRequest(r):(e.kind===xl.SpanKind.CLIENT||e.kind===xl.SpanKind.INTERNAL)&&s.trackDependency(r)})})};function NL(t,e){t?(So.length===0&&uS.channel.subscribe("azure-coretracing",bo.subscriber),So.push(e)):(So=So.filter(function(r){return r!=e}),So.length===0&&uS.channel.unsubscribe("azure-coretracing",bo.subscriber))}bo.enable=NL});var dS=y(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var fS=dt(),To=[];Ro.subscriber=function(t){t.data.event.commandName!=="ismaster"&&To.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};function kL(t,e){t?(To.length===0&&fS.channel.subscribe("mongodb",Ro.subscriber),To.push(e)):(To=To.filter(function(r){return r!=e}),To.length===0&&fS.channel.unsubscribe("mongodb",Ro.subscriber))}Ro.enable=kL});var hS=y(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var pS=dt(),Do=[];Io.subscriber=function(t){Do.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,s=r._connection||{},o=s.config||{},a=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};function LL(t,e){t?(Do.length===0&&pS.channel.subscribe("mysql",Io.subscriber),Do.push(e)):(Do=Do.filter(function(r){return r!=e}),Do.length===0&&pS.channel.unsubscribe("mysql",Io.subscriber))}Io.enable=LL});var mS=y(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var gS=dt(),Po=[];xo.subscriber=function(t){Po.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};function ML(t,e){t?(Po.length===0&&gS.channel.subscribe("redis",xo.subscriber),Po.push(e)):(Po=Po.filter(function(r){return r!=e}),Po.length===0&&gS.channel.unsubscribe("redis",xo.subscriber))}xo.enable=ML});var yS=y(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});var vS=dt(),qo=[];Oo.subscriber=function(t){qo.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,s=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:s,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};function FL(t,e){t?(qo.length===0&&vS.channel.subscribe("postgres",Oo.subscriber),qo.push(e)):(qo=qo.filter(function(r){return r!=e}),qo.length===0&&vS.channel.unsubscribe("postgres",Oo.subscriber))}Oo.enable=FL});var No=y((CW,CS)=>{"use strict";var as=require("http"),Ao=require("https"),Hh=Dt(),_S=br(),_i=to(),jL=oS(),ES=$i(),wS=Ki(),Bh=Sa(),$L=Hu(),HL=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),$L.IsInitialized&&(lS().enable(!0,this._client),dS().enable(e,this._client),hS().enable(e,this._client),mS().enable(e,this._client),yS().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=as.get,n=as.request,i=Ao.request,s=function(o,a){var c=!a[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag];a.headers&&a.headers["user-agent"]&&a.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(c=!1),o[t.alreadyAutoCollectedFlag]=!0,o&&a&&c&&(ES.CorrelationContextManager.wrapEmitter(o),t.trackRequest(e._client,{options:a,request:o}))};as.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=n.call.apply(n,[as,o].concat(a));return s(u,o),u},Ao.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=i.call.apply(i,[Ao,o].concat(a));return s(u,o),u},as.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(d=as.request).call.apply(d,[as,o].concat(a));return u.end(),u;var d},Ao.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(d=Ao.request).call.apply(d,[Ao,o].concat(a));return u.end(),u;var d}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){Hh.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new jL(r.options,r.request),i=ES.CorrelationContextManager.getCurrentContext(),s,o;if(i&&i.operation&&i.operation.traceparent&&Bh.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),s=i.operation.traceparent.getBackCompatRequestId();else if(wS.w3cEnabled){var a=new Bh;o=a.toString(),s=a.getBackCompatRequestId()}else s=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(_S.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(_i.requestContextHeader);try{_S.safeIncludeCorrelationHeader(e,r.request,c)}catch(p){Hh.warn("Request-Context header could not be set. Correlation of requests may be lost",p)}if(i&&i.operation)try{if(r.request.setHeader(_i.requestIdHeader,s),e.config.ignoreLegacyHeaders||(r.request.setHeader(_i.parentIdHeader,i.operation.id),r.request.setHeader(_i.rootIdHeader,s)),o||i.operation.traceparent)r.request.setHeader(_i.traceparentHeader,o||i.operation.traceparent.toString());else if(wS.w3cEnabled){var a=new Bh().toString();r.request.setHeader(_i.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(_i.traceStateHeader,u)}var d=i.customProperties.serializeToHeader();d&&r.request.setHeader(_i.correlationContextHeader,d)}catch(p){Hh.warn("Correlation headers could not be set. Correlation of requests may be lost.",p)}}r.request.on&&(r.request.on("response",function(p){n.onResponse(p);var m=n.getDependencyTelemetry(r,s);m.contextObjects=m.contextObjects||{},m.contextObjects["http.RequestOptions"]=r.options,m.contextObjects["http.ClientRequest"]=r.request,m.contextObjects["http.ClientResponse"]=p,e.trackDependency(m)}),r.request.on("error",function(p){n.onError(p);var m=n.getDependencyTelemetry(r,s);m.contextObjects=m.contextObjects||{},m.contextObjects["http.RequestOptions"]=r.options,m.contextObjects["http.ClientRequest"]=r.request,m.contextObjects.Error=p,e.trackDependency(m)}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();CS.exports=HL});var TS=y((SW,bS)=>{"use strict";var BL=require("os"),SS=yi(),UL=br(),WL=Ga(),zL=No(),KL="http://169.254.169.254/metadata/instance/compute",VL="api-version=2017-12-01",GL="format=json",XL="ENETUNREACH",YL=function(){function t(e){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n=this,i=!1,s={},o=WL.sdkVersion;s.sdk=o,s.osType=BL.type(),process.env.WEBSITE_SITE_NAME?(s.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",s.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",s.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?s.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(this._isVM===void 0?(i=!0,this._getAzureComputeMetadata(e,function(){n._isVM&&Object.keys(n._vmData).length>0&&(s.azInst_vmId=n._vmData.vmId||"",s.azInst_subscriptionId=n._vmData.subscriptionId||"",s.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:SS.HeartBeatMetricName,value:0,properties:s}),r()})):this._isVM&&(s.azInst_vmId=this._azInst_vmId,s.azInst_subscriptionId=this._azInst_subscriptionId,s.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:SS.HeartBeatMetricName,value:0,properties:s}),r())},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.prototype._getAzureComputeMetadata=function(e,r){var n=this,i=KL+"?"+VL+"&"+GL,s=(a={method:"GET"},a[zL.disableCollectionRequestOption]=!0,a.headers={Metadata:"True"},a),o=UL.makeRequest(e,i,s,function(c){if(c.statusCode===200){n._isVM=!0;var u="";c.on("data",function(d){u+=d}),c.on("end",function(){n._vmData=n._isJSON(u)?JSON.parse(u):{},r()})}else r()});o&&(o.on("error",function(c){c&&c.message&&c.message.indexOf(XL)>-1&&(n._isVM=!1),r()}),o.end());var a},t.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},t}();bS.exports=YL});var Wh=y((bW,xS)=>{"use strict";var RS=require("http"),DS=require("https"),IS=Dt(),PS=br(),QL=to(),Uh=_p(),Un=$i(),JL=Pl(),ZL=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||JL.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?Un.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&Un.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(!!this._isAutoCorrelating)return Un.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=function(o){if(!!o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(a,c){Un.CorrelationContextManager.wrapEmitter(a),Un.CorrelationContextManager.wrapEmitter(c);var u=a&&!a[t.alreadyAutoCollectedFlag];if(a&&u){var d=new Uh(a),p=e._generateCorrelationContext(d);Un.CorrelationContextManager.runWithContext(p,function(){e._isEnabled&&(a[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(e._client,{request:a,response:c},d)),typeof o=="function"&&o(a,c)})}else typeof o=="function"&&o(a,c)}}},n=function(o){var a=o.addListener.bind(o);o.addListener=function(c,u){switch(c){case"request":case"checkContinue":return a(c,r(u));default:return a(c,u)}},o.on=o.addListener},i=RS.createServer;RS.createServer=function(o,a){if(a&&typeof a=="function"){var c=i(o,r(a));return n(c),c}else{var c=i(r(o));return n(c),c}};var s=DS.createServer;DS.createServer=function(o,a){var c=s(o,r(a));return n(c),c}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){IS.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}t.addResponseCorrelationIdHeader(e,r.response);var n=Un.CorrelationContextManager.getCurrentContext(),i=new Uh(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){IS.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}var i=Un.CorrelationContextManager.getCurrentContext(),s=n||new Uh(r.request,i&&i.operation.parentId);PS.canIncludeCorrelationHeader(e,s.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=s.getOperationId(e.context.tags)||i.operation.id,i.operation.name=s.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=s.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(s.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,s,r,null,null)}),r.request.on&&r.request.on("error",function(o){t.endRequest(e,s,r,null,o)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(QL.requestContextHeader);PS.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,s){s?r.onError(s,i):r.onResponse(n.response,i);var o=r.getRequestTelemetry(n);if(o.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)o.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(o.properties.ai_legacyRootId=c),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,Un.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();xS.exports=ZL});var AS=y((TW,OS)=>{"use strict";var qS=yi(),eM=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(s,o){var a=o.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];s[c]=u}return s},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||qS.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||qS.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();OS.exports=eM});var ql=y((RW,LS)=>{"use strict";var zh=Ki(),NS=AS(),tM=Dt(),kS=yi(),rM=require("url"),nM=function(){function t(e){var r=this;this.endpointBase=kS.DEFAULT_BREEZE_ENDPOINT;var n=process.env[t.ENV_connectionString],i=NS.parse(e),s=NS.parse(n),o=!i.instrumentationkey&&Object.keys(i).length>0?null:e;this.instrumentationKey=i.instrumentationkey||o||s.instrumentationkey||t._getInstrumentationKey(),t._validateInstrumentationKey(this.instrumentationKey)||tM.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||s.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(a){return r.correlationId=a},this.proxyHttpUrl=process.env[t.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[t.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||s.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||s.liveendpoint||process.env[t.ENV_quickPulseHost]||kS.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=rM.parse(this._quickPulseHost).host)}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){zh.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=zh.correlationIdPrefix,zh.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!0,configurable:!0}),t._getInstrumentationKey=function(){var e=process.env[t.ENV_iKey]||process.env[t.ENV_azurePrefix+t.ENV_iKey]||process.env[t.legacy_ENV_iKey]||process.env[t.ENV_azurePrefix+t.legacy_ENV_iKey];if(!e||e=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",t.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",t.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",t.ENV_http_proxy="http_proxy",t.ENV_https_proxy="https_proxy",t}();LS.exports=nM});var jS=y((Vh,FS)=>{"use strict";var Ya=Vh&&Vh.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Kh=require("os"),cs=Tr(),MS=yi(),iM=br(),sM=Dt(),oM=iM.w3cTraceId(),aM=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var s=Kh&&typeof Kh.hostname=="function"&&Kh.hostname()||"Unknown",o=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||s,a={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:oM,MachineName:s,Instance:o};return a},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case cs.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case cs.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case cs.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case cs.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case cs.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=Ya({},r,{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=Ya({},r,{Message:e.data.baseData.message,SeverityLevel:cs.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",s="",o="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),s=n[0].message,o=n[0].typeName);var a=Ya({},r,{Exception:i,ExceptionMessage:s,ExceptionType:o});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Ya({},r,{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Ya({},r,{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,s;e.data.baseType?(n=MS.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=MS.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):sM.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],s=t.aggregateProperties(e);var o={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:s};return o},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],o={key:i,value:s};r.push(o)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var s=a[i],o={key:i,value:s};r.push(o)}return r},t.keys=new cs.ContextTagKeys,t}();FS.exports=aM});var HS=y((DW,$S)=>{"use strict";var cM=function(){return(Date.now()+621355968e5)*1e4};$S.exports={getTransmissionTime:cM}});var WS=y((IW,US)=>{"use strict";var uM=require("https"),lM=No(),BS=Dt(),fM=HS(),dM=br(),Gh={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},pM=function(){function t(e){this._config=e,this._consecutiveErrors=0}return t.prototype.ping=function(e,r){this._submitData(e,r,"ping")},t.prototype.post=function(e,r){this._submitData([e],r,"post")},t.prototype._submitData=function(e,r,n){var i=this,s=JSON.stringify(e),o=(c={},c[lM.disableCollectionRequestOption]=!0,c.host=this._config.quickPulseHost,c.method=Gh.method,c.path="/QuickPulseService.svc/"+n+"?ikey="+this._config.instrumentationKey,c.headers=(u={Expect:"100-continue"},u[Gh.time]=fM.getTransmissionTime(),u["Content-Type"]="application/json",u["Content-Length"]=Buffer.byteLength(s),u),c);this._config.httpsAgent?o.agent=this._config.httpsAgent:o.agent=dM.tlsRestrictedAgent;var a=uM.request(o,function(d){var p=d.headers[Gh.subscribed]==="true";i._consecutiveErrors=0,r(p,d)});a.on("error",function(d){i._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";i._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(p="Live Metrics endpoint could not be reached "+i._consecutiveErrors+" consecutive times. Most recent error:",BS.warn(t.TAG,p,d)):BS.info(t.TAG,p,d),r()}),a.write(s),a.end();var c,u},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();US.exports=pM});var KS=y((PW,zS)=>{"use strict";var hM=Dt(),gM=ql(),Xh=jS(),mM=WS(),vM=yi(),yM=Ga(),_M=function(){function t(e,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new gM(e),this.context=r||new yM,this._sender=new mM(this.config),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){var r=Xh.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=vM.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=Xh.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){var e=this,r=Object.keys(this._metrics).map(function(s){return e._metrics[s]}),n=Xh.createQuickPulseEnvelope(r,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(n):this._ping(n);var i=this._isCollectingData?t.POST_INTERVAL:t.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref()},t.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))},t.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))},t.prototype._quickPulseDone=function(e,r){e!=null?(this._isCollectingData!==e&&(hM.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();zS.exports=_M});var GS=y(Ja=>{"use strict";var EM=Ja&&Ja.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Ja,"__esModule",{value:!0});var VS=ql(),Qa=Ga(),wM=Dt(),CM=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!t.isNodeVersionCompatible()){if(t._metricsAvailable==null&&e&&!this._isInitialized)try{var s=require("applicationinsights-native-metrics");t._emitter=new s,t._metricsAvailable=!0,wM.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref()):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e){var r=process.env[VS.ENV_nativeMetricsDisableAll],n=process.env[VS.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),s={};if(i.length>0)for(var o=0,a=i;o<a.length;o++){var c=a[o];s[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:EM({},e,s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var e=t._emitter.getGCData();for(var r in e){var n=e[r].metrics,i=r+" Garbage Collection Duration",s=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,max:n.max,min:n.min,stdDev:s,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Qa.sdkVersion,o)})}var o}},t.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var e=t._emitter.getLoopData(),r=e.loopUsage;if(r.count!=0){var n="Event Loop CPU Time",i=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:n,value:r.total,count:r.count,min:r.min,max:r.max,stdDev:i,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Qa.sdkVersion,s)});var s}}},t.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var e=process.memoryUsage(),r=e.heapUsed,n=e.heapTotal,i=e.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:r,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Qa.sdkVersion,s)}),this._client.trackMetric({name:"Memory Total (Heap)",value:n,count:1,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Qa.sdkVersion,o)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:i-n,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Qa.sdkVersion,a)});var s,o,a}},t}();Ja.AutoCollectNativePerformance=CM});var QS=y((qW,YS)=>{"use strict";var XS=Dt(),SM=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){XS.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n=="string"){if(this._buffer.push(n),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;if(!n){var i=this._buffer.join(`
`);e?(this._sender.saveOnCrash(i),typeof r=="function"&&r("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(i):new Buffer(i),r)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(r){XS.warn("Failed to serialize payload",r,e)}},t}();YS.exports=SM});var JS=y(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});function bM(t,e){process.env.WEBSITE_SITE_NAME&&(t.tags[e.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}Yh.azureRoleEnvironmentTelemetryProcessor=bM});var tb=y(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var ZS=Tr();function TM(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&ZS.TelemetryType.Metric===ZS.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=eb(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Ol.samplingTelemetryProcessor=TM;function eb(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}Ol.getSamplingHashCode=eb});var rb=y(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});var Qh=Pl(),Jh=Tr();function RM(t,e){switch(e&&e.addDocument(t),t.data.baseType){case Jh.TelemetryTypeString.Exception:Qh.countException();break;case Jh.TelemetryTypeString.Request:var r=t.data.baseData;Qh.countRequest(r.duration,r.success);break;case Jh.TelemetryTypeString.Dependency:var n=t.data.baseData;Qh.countDependency(n.duration,n.success);break}return!0}Zh.performanceMetricsTelemetryProcessor=RM});var nb=y(Al=>{"use strict";function eg(t){for(var e in t)Al.hasOwnProperty(e)||(Al[e]=t[e])}Object.defineProperty(Al,"__esModule",{value:!0});eg(JS());eg(tb());eg(rb())});var sb=y((LW,ib)=>{"use strict";var or=require("fs"),Nl=require("os"),Wn=require("path"),DM=require("zlib"),ko=require("child_process"),Yt=Dt(),IM=No(),PM=br(),xM=function(){function t(e,r,n){if(this._config=e,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._resendTimer=null,!t.OS_PROVIDES_FILE_PROTECTION)if(t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=or.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||Yt.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0}return t.prototype.setDiskRetryMode=function(e,r,n){this._enableDiskRetryMode=t.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!t.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,Yt.warn(t.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},t.prototype.send=function(e,r){var n=this,i=this._config.endpointUrl,s={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};DM.gzip(e,function(o,a){var c=a;o?(Yt.warn(o),c=e,s.headers["Content-Length"]=e.length.toString()):(s.headers["Content-Encoding"]="gzip",s.headers["Content-Length"]=a.length),Yt.info(t.TAG,s),s[IM.disableCollectionRequestOption]=!0;var u=function(p){p.setEncoding("utf-8");var m="";p.on("data",function(v){m+=v}),p.on("end",function(){n._numConsecutiveFailures=0,Yt.info(t.TAG,m),typeof n._onSuccess=="function"&&n._onSuccess(m),typeof r=="function"&&r(m),n._enableDiskRetryMode&&(p.statusCode===200?n._resendTimer||(n._resendTimer=setTimeout(function(){n._resendTimer=null,n._sendFirstFileOnDisk()},n._resendInterval),n._resendTimer.unref()):(p.statusCode===408||p.statusCode===429||p.statusCode===439||p.statusCode===500||p.statusCode===503)&&n._storeToDisk(e))})},d=PM.makeRequest(n._config,i,s,u);d.on("error",function(p){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var m="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(m="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),Yt.warn(t.TAG,m,p)}else{var m="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";Yt.info(t.TAG,m,p)}if(n._onErrorHelper(p),typeof r=="function"){var v="error sending telemetry";p&&typeof p.toString=="function"&&(v=p.toString()),r(v)}n._enableDiskRetryMode&&n._storeToDisk(e)}),d.write(c),d.end()})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},t.prototype._runICACLS=function(e,r){var n=ko.spawn(t.ICACLS_PATH,e,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,s){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},t.prototype._runICACLSSync=function(e){if(ko.spawnSync){var r=ko.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t.prototype._getACLIdentity=function(e){if(t.ACL_IDENTITY)return e(null,t.ACL_IDENTITY);var r=ko.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return e(i,null)}),r.on("close",function(i,s){return t.ACL_IDENTITY=n&&n.trim(),e(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),t.ACL_IDENTITY)})},t.prototype._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(ko.spawnSync){var e=ko.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t.prototype._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.prototype._applyACLRules=function(e,r){var n=this;if(!t.USE_ICACLS)return r(null);if(t.ACLED_DIRECTORIES[e]===void 0)t.ACLED_DIRECTORIES[e]=!1,this._getACLIdentity(function(i,s){if(i)return t.ACLED_DIRECTORIES[e]=!1,r(i);n._runICACLS(n._getACLArguments(e,s),function(o){return t.ACLED_DIRECTORIES[e]=!o,r(o)})});else return r(t.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},t.prototype._applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t.prototype._confirmDirExists=function(e,r){var n=this;or.lstat(e,function(i,s){i&&i.code==="ENOENT"?or.mkdir(e,function(o){o&&o.code!=="EEXIST"?r(o):n._applyACLRules(e,r)}):!i&&s.isDirectory()?n._applyACLRules(e,r):r(i||new Error("Path existed but was not a directory"))})},t.prototype._getShallowDirectorySize=function(e,r){or.readdir(e,function(n,i){if(n)return r(n,-1);var s=null,o=0,a=0;if(i.length===0){r(null,0);return}for(var c=0;c<i.length;c++)or.stat(Wn.join(e,i[c]),function(u,d){a++,u?s=u:d.isFile()&&(o+=d.size),a===i.length&&(s?r(s,-1):r(s,o))})})},t.prototype._getShallowDirectorySizeSync=function(e){for(var r=or.readdirSync(e),n=0,i=0;i<r.length;i++)n+=or.statSync(Wn.join(e,r[i])).size;return n},t.prototype._storeToDisk=function(e){var r=this,n=Wn.join(Nl.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);Yt.info(t.TAG,"Checking existence of data storage directory: "+n),this._confirmDirExists(n,function(i){if(i){Yt.warn(t.TAG,"Error while checking/creating directory: "+(i&&i.message)),r._onErrorHelper(i);return}r._getShallowDirectorySize(n,function(s,o){if(s||o<0){Yt.warn(t.TAG,"Error while checking directory size: "+(s&&s.message)),r._onErrorHelper(s);return}else if(o>r._maxBytesOnDisk){Yt.warn(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);return}var a=new Date().getTime()+".ai.json",c=Wn.join(n,a);Yt.info(t.TAG,"saving data to disk at: "+c),or.writeFile(c,e,{mode:384},function(u){return r._onErrorHelper(u)})})})},t.prototype._storeToDiskSync=function(e){var r=Wn.join(Nl.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);try{Yt.info(t.TAG,"Checking existence of data storage directory: "+r),or.existsSync(r)||or.mkdirSync(r),this._applyACLRulesSync(r);var n=this._getShallowDirectorySizeSync(r);if(n>this._maxBytesOnDisk){Yt.info(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var i=new Date().getTime()+".ai.json",s=Wn.join(r,i);Yt.info(t.TAG,"saving data before crash to disk at: "+s),or.writeFileSync(s,e,{mode:384})}catch(o){Yt.warn(t.TAG,"Error while saving data to disk: "+(o&&o.message)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){var e=this,r=Wn.join(Nl.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);or.exists(r,function(n){n&&or.readdir(r,function(i,s){if(i)e._onErrorHelper(i);else if(s=s.filter(function(c){return Wn.basename(c).indexOf(".ai.json")>-1}),s.length>0){var o=s[0],a=Wn.join(r,o);or.readFile(a,function(c,u){c?e._onErrorHelper(c):or.unlink(a,function(d){d?e._onErrorHelper(d):e.send(u)})})}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.TAG="Sender",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1e3*1e3,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.TEMPDIR_PREFIX="appInsights-node",t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=Nl.type()==="Windows_NT",t}();ib.exports=xM});var cb=y((MW,ab)=>{"use strict";var J=Tr(),zr=br(),qM=$i(),OM=function(){function t(){}return t.createEnvelope=function(e,r,n,i,s){var o=null;switch(r){case J.TelemetryType.Trace:o=t.createTraceData(e);break;case J.TelemetryType.Dependency:o=t.createDependencyData(e);break;case J.TelemetryType.Event:o=t.createEventData(e);break;case J.TelemetryType.Exception:o=t.createExceptionData(e);break;case J.TelemetryType.Request:o=t.createRequestData(e);break;case J.TelemetryType.Metric:o=t.createMetricData(e);break;case J.TelemetryType.Availability:o=t.createAvailabilityData(e);break;case J.TelemetryType.PageView:o=t.createPageViewData(e);break}if(n&&J.domainSupportsProperties(o.baseData)){if(o&&o.baseData)if(!o.baseData.properties)o.baseData.properties=n;else for(var a in n)o.baseData.properties[a]||(o.baseData.properties[a]=n[a]);o.baseData.properties=zr.validateStringMap(o.baseData.properties)}var c=s&&s.instrumentationKey||"",u=new J.Envelope;return u.data=o,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+o.baseType.substr(0,o.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=s?s.samplingPercentage:100,r===J.TelemetryType.Metric&&(u.sampleRate=100),u},t.createTraceData=function(e){var r=new J.MessageData;r.message=e.message,r.properties=e.properties,isNaN(e.severity)?r.severityLevel=J.SeverityLevel.Information:r.severityLevel=e.severity;var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Trace),n.baseData=r,n},t.createDependencyData=function(e){var r=new J.RemoteDependencyData;typeof e.name=="string"&&(r.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),r.data=e.data,r.target=e.target,r.duration=zr.msToTimeSpan(e.duration),r.success=e.success,r.type=e.dependencyTypeName,r.properties=e.properties,r.resultCode=e.resultCode?e.resultCode+"":"",e.id?r.id=e.id:r.id=zr.w3cTraceId();var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Dependency),n.baseData=r,n},t.createEventData=function(e){var r=new J.EventData;r.name=e.name,r.properties=e.properties,r.measurements=e.measurements;var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Event),n.baseData=r,n},t.createExceptionData=function(e){var r=new J.ExceptionData;r.properties=e.properties,isNaN(e.severity)?r.severityLevel=J.SeverityLevel.Error:r.severityLevel=e.severity,r.measurements=e.measurements,r.exceptions=[];var n=e.exception.stack,i=new J.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=zr.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var s=new J.Data;return s.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Exception),s.baseData=r,s},t.createRequestData=function(e){var r=new J.RequestData;e.id?r.id=e.id:r.id=zr.w3cTraceId(),r.name=e.name,r.url=e.url,r.source=e.source,r.duration=zr.msToTimeSpan(e.duration),r.responseCode=e.resultCode?e.resultCode+"":"",r.success=e.success,r.properties=e.properties;var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Request),n.baseData=r,n},t.createMetricData=function(e){var r=new J.MetricData;r.metrics=[];var n=new J.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=J.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,r.metrics.push(n),r.properties=e.properties;var i=new J.Data;return i.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Metric),i.baseData=r,i},t.createAvailabilityData=function(e){var r=new J.AvailabilityData;e.id?r.id=e.id:r.id=zr.w3cTraceId(),r.name=e.name,r.duration=zr.msToTimeSpan(e.duration),r.success=e.success,r.runLocation=e.runLocation,r.message=e.message,r.measurements=e.measurements,r.properties=e.properties;var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.Availability),n.baseData=r,n},t.createPageViewData=function(e){var r=new J.PageViewData;r.name=e.name,r.duration=zr.msToTimeSpan(e.duration),r.url=e.url,r.measurements=e.measurements,r.properties=e.properties;var n=new J.Data;return n.baseType=J.telemetryTypeToBaseType(J.TelemetryType.PageView),n.baseData=r,n},t.getTags=function(e,r){var n=qM.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var s in e.tags)i[s]=e.tags[s];if(r)for(var s in r)i[s]=r[s];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,s=0,o=0;o<=n.length;o++){var a=n[o];if(ob.regex.test(a)){var c=new ob(n[o],i++);s+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(s>u)for(var d=0,p=r.length-1,m=0,v=d,b=p;d<p;){var P=r[d].sizeInBytes,j=r[p].sizeInBytes;if(m+=P+j,m>u){var A=b-v+1;r.splice(v,A);break}v=d,b=p,d++,p--}}return r},t}(),ob=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=zr.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=zr.trim(n[2])||this.method,this.fileName=zr.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();ab.exports=OM});var db=y((FW,fb)=>{"use strict";var AM=require("url"),NM=ql(),kM=Ga(),zn=Tr(),LM=QS(),tg=nb(),ub=$i(),MM=sb(),FM=br(),lb=Dt(),jM=cb(),$M=function(){function t(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new NM(e);this.config=r,this.context=new kM,this.commonProperties={};var n=new MM(this.config);this.channel=new LM(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,zn.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,zn.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,zn.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,zn.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!FM.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,zn.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,zn.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,zn.TelemetryType.Request)},t.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=AM.parse(e.data).host),this.track(e,zn.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&zn.telemetryTypeToBaseType(r)){var n=jM.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString()),this._enableAzureProperties&&tg.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&tg.samplingTelemetryProcessor(n,{correlationContext:ub.CorrelationContextManager.getCurrentContext()}),i&&(tg.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else lb.warn("track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=ub.CorrelationContextManager.getCurrentContext();for(var s=0;s<i;++s)try{var o=this._telemetryProcessors[s];if(o&&o.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,lb.warn("One of telemetry processors failed, telemetry item will be sent.",a,e)}return n},t}();fb.exports=$M});var gb=y((rg,hb)=>{"use strict";var HM=rg&&rg.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BM=db(),pb=Wh(),UM=No(),kl=Dt(),WM=function(t){HM(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?pb.trackRequestSync(this,r):kl.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&kl.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?pb.trackRequest(this,r):kl.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?UM.trackRequest(this,r):kl.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(BM);hb.exports=WM});var vb=y(mb=>{"use strict";Object.defineProperty(mb,"__esModule",{value:!0})});var Mb=y(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ng=$i(),zM=QC(),KM=ZC(),_b=Pl(),VM=TS(),GM=No(),XM=Wh(),Eb=Ki(),Za=Dt(),YM=KS(),wb=GS();Y.TelemetryClient=gb();Y.Contracts=Tr();Y.azureFunctionsTypes=vb();var Cb;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(Cb=Y.DistributedTracingModes||(Y.DistributedTracingModes={}));var Sb=!0,bb=!1,Tb=!0,Rb=!0,Db=!1,Ib=!0,Pb=!0,xb=!0,ig=!0,qb,Ll=!1,Ob=!0,Ab,Nb=void 0,kb=void 0,ec,tc,rc,nc,Lo,us,ic,Kn=!1,yb;function QM(t){return Y.defaultClient?Za.info("The default client is already setup"):(Y.defaultClient=new Y.TelemetryClient(t),ec=new zM(Y.defaultClient),tc=new KM(Y.defaultClient),rc=new _b(Y.defaultClient),nc=new VM(Y.defaultClient),us=new XM(Y.defaultClient),ic=new GM(Y.defaultClient),Lo||(Lo=new wb.AutoCollectNativePerformance(Y.defaultClient))),Y.defaultClient&&Y.defaultClient.channel&&Y.defaultClient.channel.setUseDiskRetryCaching(xb,Nb,kb),sg}Y.setup=QM;function Lb(){return Y.defaultClient?(Kn=!0,ec.enable(Sb,bb),tc.enable(Tb),rc.enable(Rb),nc.enable(Db,Y.defaultClient.config),Lo.enable(Ob,Ab),us.useAutoCorrelation(ig,qb),us.enable(Ib),ic.enable(Pb),Y.liveMetricsClient&&Ll&&Y.liveMetricsClient.enable(Ll)):Za.warn("Start cannot be called before setup"),sg}Y.start=Lb;function JM(){return ig?ng.CorrelationContextManager.getCurrentContext():null}Y.getCorrelationContext=JM;function ZM(t,e){return ng.CorrelationContextManager.startOperation(t,e)}Y.startOperation=ZM;function eF(t,e){return ng.CorrelationContextManager.wrapCallback(t,e)}Y.wrapWithCorrelationContext=eF;var sg=function(){function t(){}return t.setDistributedTracingMode=function(e){return Eb.w3cEnabled=e===Cb.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),Sb=e,bb=r,Kn&&ec.enable(e,r),t},t.setAutoCollectExceptions=function(e){return Tb=e,Kn&&tc.enable(e),t},t.setAutoCollectPerformance=function(e,r){r===void 0&&(r=!0),Rb=e;var n=wb.AutoCollectNativePerformance.parseEnabled(r);return Ob=n.isEnabled,Ab=n.disabledMetrics,Kn&&(rc.enable(e),Lo.enable(n.isEnabled,n.disabledMetrics)),t},t.setAutoCollectHeartbeat=function(e){return Db=e,Kn&&nc.enable(e,Y.defaultClient.config),t},t.setAutoCollectRequests=function(e){return Ib=e,Kn&&us.enable(e),t},t.setAutoCollectDependencies=function(e){return Pb=e,Kn&&ic.enable(e),t},t.setAutoDependencyCorrelation=function(e,r){return ig=e,qb=r,Kn&&us.useAutoCorrelation(e,r),t},t.setUseDiskRetryCaching=function(e,r,n){return xb=e,Nb=r,kb=n,Y.defaultClient&&Y.defaultClient.channel&&Y.defaultClient.channel.setUseDiskRetryCaching(e,r,n),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),Za.enableDebug=e,Za.disableWarnings=!r,t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),Y.defaultClient?(!Y.liveMetricsClient&&e?(Y.liveMetricsClient=new YM(Y.defaultClient.config.instrumentationKey),yb=new _b(Y.liveMetricsClient,1e3,!0),Y.liveMetricsClient.addCollector(yb),Y.defaultClient.quickPulseClient=Y.liveMetricsClient):Y.liveMetricsClient&&Y.liveMetricsClient.enable(e),Ll=e,t):(Za.warn("Live metrics client cannot be setup without the default client"),t)},t.start=Lb,t}();Y.Configuration=sg;function tF(){Eb.w3cEnabled=!0,Y.defaultClient=null,Kn=!1,ec&&ec.dispose(),tc&&tc.dispose(),rc&&rc.dispose(),nc&&nc.dispose(),Lo&&Lo.dispose(),us&&us.dispose(),ic&&ic.dispose(),Y.liveMetricsClient&&(Y.liveMetricsClient.enable(!1),Ll=!1,Y.liveMetricsClient=void 0)}Y.dispose=tF});var og=y((Ml,Fb)=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.default=iF;var rF=nF(require("crypto"));function nF(t){return t&&t.__esModule?t:{default:t}}function iF(){return rF.default.randomBytes(16)}Fb.exports=Ml.default});var Fl=y((oc,$b)=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.default=void 0;var jb=[];for(sc=0;sc<256;++sc)jb[sc]=(sc+256).toString(16).substr(1);var sc;function sF(t,e){var r=e||0,n=jb;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")}var oF=sF;oc.default=oF;$b.exports=oc.default});var Wb=y((ac,Ub)=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.default=void 0;var aF=Bb(og()),cF=Bb(Fl());function Bb(t){return t&&t.__esModule?t:{default:t}}var Hb,ag,cg=0,ug=0;function uF(t,e,r){var n=e&&r||0,i=e||[];t=t||{};var s=t.node||Hb,o=t.clockseq!==void 0?t.clockseq:ag;if(s==null||o==null){var a=t.random||(t.rng||aF.default)();s==null&&(s=Hb=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=ag=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:new Date().getTime(),u=t.nsecs!==void 0?t.nsecs:ug+1,d=c-cg+(u-ug)/1e4;if(d<0&&t.clockseq===void 0&&(o=o+1&16383),(d<0||c>cg)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");cg=c,ug=u,ag=o,c+=122192928e5;var p=((c&268435455)*1e4+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=p&255;var m=c/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var v=0;v<6;++v)i[n+v]=s[v];return e||(0,cF.default)(i)}var lF=uF;ac.default=lF;Ub.exports=ac.default});var lg=y(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.default=gF;ls.URL=ls.DNS=void 0;var fF=dF(Fl());function dF(t){return t&&t.__esModule?t:{default:t}}function pF(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,function(r){e.push(parseInt(r,16))}),e}function hF(t){t=unescape(encodeURIComponent(t));for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}var zb="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ls.DNS=zb;var Kb="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ls.URL=Kb;function gF(t,e,r){var n=function(i,s,o,a){var c=o&&a||0;if(typeof i=="string"&&(i=hF(i)),typeof s=="string"&&(s=pF(s)),!Array.isArray(i))throw TypeError("value must be an array of bytes");if(!Array.isArray(s)||s.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var u=r(s.concat(i));if(u[6]=u[6]&15|e,u[8]=u[8]&63|128,o)for(var d=0;d<16;++d)o[c+d]=u[d];return o||(0,fF.default)(u)};try{n.name=t}catch{}return n.DNS=zb,n.URL=Kb,n}});var Gb=y((cc,Vb)=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.default=void 0;var mF=vF(require("crypto"));function vF(t){return t&&t.__esModule?t:{default:t}}function yF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),mF.default.createHash("md5").update(t).digest()}var _F=yF;cc.default=_F;Vb.exports=cc.default});var Qb=y((uc,Yb)=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.default=void 0;var EF=Xb(lg()),wF=Xb(Gb());function Xb(t){return t&&t.__esModule?t:{default:t}}var CF=(0,EF.default)("v3",48,wF.default),SF=CF;uc.default=SF;Yb.exports=uc.default});var eT=y((lc,Zb)=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.default=void 0;var bF=Jb(og()),TF=Jb(Fl());function Jb(t){return t&&t.__esModule?t:{default:t}}function RF(t,e,r){var n=e&&r||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||bF.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e)for(var s=0;s<16;++s)e[n+s]=i[s];return e||(0,TF.default)(i)}var DF=RF;lc.default=DF;Zb.exports=lc.default});var rT=y((fc,tT)=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.default=void 0;var IF=PF(require("crypto"));function PF(t){return t&&t.__esModule?t:{default:t}}function xF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),IF.default.createHash("sha1").update(t).digest()}var qF=xF;fc.default=qF;tT.exports=fc.default});var sT=y((dc,iT)=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.default=void 0;var OF=nT(lg()),AF=nT(rT());function nT(t){return t&&t.__esModule?t:{default:t}}var NF=(0,OF.default)("v5",80,AF.default),kF=NF;dc.default=kF;iT.exports=dc.default});var oT=y(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Object.defineProperty(Mo,"v1",{enumerable:!0,get:function(){return LF.default}});Object.defineProperty(Mo,"v3",{enumerable:!0,get:function(){return MF.default}});Object.defineProperty(Mo,"v4",{enumerable:!0,get:function(){return FF.default}});Object.defineProperty(Mo,"v5",{enumerable:!0,get:function(){return jF.default}});var LF=jl(Wb()),MF=jl(Qb()),FF=jl(eT()),jF=jl(sT());function jl(t){return t&&t.__esModule?t:{default:t}}});var gT=y((WW,hT)=>{"use strict";function $F(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}hT.exports=$F});var hc=y((bz,RT)=>{var GF="2.0.0",XF=Number.MAX_SAFE_INTEGER||9007199254740991,YF=16,QF=256-6,JF=["major","premajor","minor","preminor","patch","prepatch","prerelease"];RT.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:YF,MAX_SAFE_BUILD_LENGTH:QF,MAX_SAFE_INTEGER:XF,RELEASE_TYPES:JF,SEMVER_SPEC_VERSION:GF,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var gc=y((Tz,DT)=>{var ZF=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};DT.exports=ZF});var Fo=y((Vn,IT)=>{var{MAX_SAFE_COMPONENT_LENGTH:gg,MAX_SAFE_BUILD_LENGTH:ej,MAX_LENGTH:tj}=hc(),rj=gc();Vn=IT.exports={};var nj=Vn.re=[],ij=Vn.safeRe=[],B=Vn.src=[],U=Vn.t={},sj=0,mg="[a-zA-Z0-9-]",oj=[["\\s",1],["\\d",tj],[mg,ej]],aj=t=>{for(let[e,r]of oj)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ie=(t,e,r)=>{let n=aj(e),i=sj++;rj(t,i,e),U[t]=i,B[i]=e,nj[i]=new RegExp(e,r?"g":void 0),ij[i]=new RegExp(n,r?"g":void 0)};ie("NUMERICIDENTIFIER","0|[1-9]\\d*");ie("NUMERICIDENTIFIERLOOSE","\\d+");ie("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${mg}*`);ie("MAINVERSION",`(${B[U.NUMERICIDENTIFIER]})\\.(${B[U.NUMERICIDENTIFIER]})\\.(${B[U.NUMERICIDENTIFIER]})`);ie("MAINVERSIONLOOSE",`(${B[U.NUMERICIDENTIFIERLOOSE]})\\.(${B[U.NUMERICIDENTIFIERLOOSE]})\\.(${B[U.NUMERICIDENTIFIERLOOSE]})`);ie("PRERELEASEIDENTIFIER",`(?:${B[U.NUMERICIDENTIFIER]}|${B[U.NONNUMERICIDENTIFIER]})`);ie("PRERELEASEIDENTIFIERLOOSE",`(?:${B[U.NUMERICIDENTIFIERLOOSE]}|${B[U.NONNUMERICIDENTIFIER]})`);ie("PRERELEASE",`(?:-(${B[U.PRERELEASEIDENTIFIER]}(?:\\.${B[U.PRERELEASEIDENTIFIER]})*))`);ie("PRERELEASELOOSE",`(?:-?(${B[U.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[U.PRERELEASEIDENTIFIERLOOSE]})*))`);ie("BUILDIDENTIFIER",`${mg}+`);ie("BUILD",`(?:\\+(${B[U.BUILDIDENTIFIER]}(?:\\.${B[U.BUILDIDENTIFIER]})*))`);ie("FULLPLAIN",`v?${B[U.MAINVERSION]}${B[U.PRERELEASE]}?${B[U.BUILD]}?`);ie("FULL",`^${B[U.FULLPLAIN]}$`);ie("LOOSEPLAIN",`[v=\\s]*${B[U.MAINVERSIONLOOSE]}${B[U.PRERELEASELOOSE]}?${B[U.BUILD]}?`);ie("LOOSE",`^${B[U.LOOSEPLAIN]}$`);ie("GTLT","((?:<|>)?=?)");ie("XRANGEIDENTIFIERLOOSE",`${B[U.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ie("XRANGEIDENTIFIER",`${B[U.NUMERICIDENTIFIER]}|x|X|\\*`);ie("XRANGEPLAIN",`[v=\\s]*(${B[U.XRANGEIDENTIFIER]})(?:\\.(${B[U.XRANGEIDENTIFIER]})(?:\\.(${B[U.XRANGEIDENTIFIER]})(?:${B[U.PRERELEASE]})?${B[U.BUILD]}?)?)?`);ie("XRANGEPLAINLOOSE",`[v=\\s]*(${B[U.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[U.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[U.XRANGEIDENTIFIERLOOSE]})(?:${B[U.PRERELEASELOOSE]})?${B[U.BUILD]}?)?)?`);ie("XRANGE",`^${B[U.GTLT]}\\s*${B[U.XRANGEPLAIN]}$`);ie("XRANGELOOSE",`^${B[U.GTLT]}\\s*${B[U.XRANGEPLAINLOOSE]}$`);ie("COERCEPLAIN",`(^|[^\\d])(\\d{1,${gg}})(?:\\.(\\d{1,${gg}}))?(?:\\.(\\d{1,${gg}}))?`);ie("COERCE",`${B[U.COERCEPLAIN]}(?:$|[^\\d])`);ie("COERCEFULL",B[U.COERCEPLAIN]+`(?:${B[U.PRERELEASE]})?(?:${B[U.BUILD]})?(?:$|[^\\d])`);ie("COERCERTL",B[U.COERCE],!0);ie("COERCERTLFULL",B[U.COERCEFULL],!0);ie("LONETILDE","(?:~>?)");ie("TILDETRIM",`(\\s*)${B[U.LONETILDE]}\\s+`,!0);Vn.tildeTrimReplace="$1~";ie("TILDE",`^${B[U.LONETILDE]}${B[U.XRANGEPLAIN]}$`);ie("TILDELOOSE",`^${B[U.LONETILDE]}${B[U.XRANGEPLAINLOOSE]}$`);ie("LONECARET","(?:\\^)");ie("CARETTRIM",`(\\s*)${B[U.LONECARET]}\\s+`,!0);Vn.caretTrimReplace="$1^";ie("CARET",`^${B[U.LONECARET]}${B[U.XRANGEPLAIN]}$`);ie("CARETLOOSE",`^${B[U.LONECARET]}${B[U.XRANGEPLAINLOOSE]}$`);ie("COMPARATORLOOSE",`^${B[U.GTLT]}\\s*(${B[U.LOOSEPLAIN]})$|^$`);ie("COMPARATOR",`^${B[U.GTLT]}\\s*(${B[U.FULLPLAIN]})$|^$`);ie("COMPARATORTRIM",`(\\s*)${B[U.GTLT]}\\s*(${B[U.LOOSEPLAIN]}|${B[U.XRANGEPLAIN]})`,!0);Vn.comparatorTrimReplace="$1$2$3";ie("HYPHENRANGE",`^\\s*(${B[U.XRANGEPLAIN]})\\s+-\\s+(${B[U.XRANGEPLAIN]})\\s*$`);ie("HYPHENRANGELOOSE",`^\\s*(${B[U.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[U.XRANGEPLAINLOOSE]})\\s*$`);ie("STAR","(<|>)?=?\\s*\\*");ie("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ie("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Gl=y((Rz,PT)=>{var cj=Object.freeze({loose:!0}),uj=Object.freeze({}),lj=t=>t?typeof t!="object"?cj:t:uj;PT.exports=lj});var vg=y((Dz,OT)=>{var xT=/^[0-9]+$/,qT=(t,e)=>{let r=xT.test(t),n=xT.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},fj=(t,e)=>qT(e,t);OT.exports={compareIdentifiers:qT,rcompareIdentifiers:fj}});var Qt=y((Iz,LT)=>{var Xl=gc(),{MAX_LENGTH:AT,MAX_SAFE_INTEGER:Yl}=hc(),{safeRe:NT,t:kT}=Fo(),dj=Gl(),{compareIdentifiers:jo}=vg(),Ir=class{constructor(e,r){if(r=dj(r),e instanceof Ir){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>AT)throw new TypeError(`version is longer than ${AT} characters`);Xl("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?NT[kT.LOOSE]:NT[kT.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yl||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Yl)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Xl("SemVer.compare",this.version,this.options,e),!(e instanceof Ir)){if(typeof e=="string"&&e===this.version)return 0;e=new Ir(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ir||(e=new Ir(e,this.options)),jo(this.major,e.major)||jo(this.minor,e.minor)||jo(this.patch,e.patch)}comparePre(e){if(e instanceof Ir||(e=new Ir(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Xl("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return jo(n,i)}while(++r)}compareBuild(e){e instanceof Ir||(e=new Ir(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Xl("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return jo(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),jo(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};LT.exports=Ir});var fs=y((Pz,FT)=>{var MT=Qt(),pj=(t,e,r=!1)=>{if(t instanceof MT)return t;try{return new MT(t,e)}catch(n){if(!r)return null;throw n}};FT.exports=pj});var $T=y((xz,jT)=>{var hj=fs(),gj=(t,e)=>{let r=hj(t,e);return r?r.version:null};jT.exports=gj});var BT=y((qz,HT)=>{var mj=fs(),vj=(t,e)=>{let r=mj(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};HT.exports=vj});var zT=y((Oz,WT)=>{var UT=Qt(),yj=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new UT(t instanceof UT?t.version:t,r).inc(e,n,i).version}catch{return null}};WT.exports=yj});var GT=y((Az,VT)=>{var KT=fs(),_j=(t,e)=>{let r=KT(t,null,!0),n=KT(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};VT.exports=_j});var YT=y((Nz,XT)=>{var Ej=Qt(),wj=(t,e)=>new Ej(t,e).major;XT.exports=wj});var JT=y((kz,QT)=>{var Cj=Qt(),Sj=(t,e)=>new Cj(t,e).minor;QT.exports=Sj});var eR=y((Lz,ZT)=>{var bj=Qt(),Tj=(t,e)=>new bj(t,e).patch;ZT.exports=Tj});var rR=y((Mz,tR)=>{var Rj=fs(),Dj=(t,e)=>{let r=Rj(t,e);return r&&r.prerelease.length?r.prerelease:null};tR.exports=Dj});var Kr=y((Fz,iR)=>{var nR=Qt(),Ij=(t,e,r)=>new nR(t,r).compare(new nR(e,r));iR.exports=Ij});var oR=y((jz,sR)=>{var Pj=Kr(),xj=(t,e,r)=>Pj(e,t,r);sR.exports=xj});var cR=y(($z,aR)=>{var qj=Kr(),Oj=(t,e)=>qj(t,e,!0);aR.exports=Oj});var Ql=y((Hz,lR)=>{var uR=Qt(),Aj=(t,e,r)=>{let n=new uR(t,r),i=new uR(e,r);return n.compare(i)||n.compareBuild(i)};lR.exports=Aj});var dR=y((Bz,fR)=>{var Nj=Ql(),kj=(t,e)=>t.sort((r,n)=>Nj(r,n,e));fR.exports=kj});var hR=y((Uz,pR)=>{var Lj=Ql(),Mj=(t,e)=>t.sort((r,n)=>Lj(n,r,e));pR.exports=Mj});var mc=y((Wz,gR)=>{var Fj=Kr(),jj=(t,e,r)=>Fj(t,e,r)>0;gR.exports=jj});var Jl=y((zz,mR)=>{var $j=Kr(),Hj=(t,e,r)=>$j(t,e,r)<0;mR.exports=Hj});var yg=y((Kz,vR)=>{var Bj=Kr(),Uj=(t,e,r)=>Bj(t,e,r)===0;vR.exports=Uj});var _g=y((Vz,yR)=>{var Wj=Kr(),zj=(t,e,r)=>Wj(t,e,r)!==0;yR.exports=zj});var Zl=y((Gz,_R)=>{var Kj=Kr(),Vj=(t,e,r)=>Kj(t,e,r)>=0;_R.exports=Vj});var ef=y((Xz,ER)=>{var Gj=Kr(),Xj=(t,e,r)=>Gj(t,e,r)<=0;ER.exports=Xj});var Eg=y((Yz,wR)=>{var Yj=yg(),Qj=_g(),Jj=mc(),Zj=Zl(),e2=Jl(),t2=ef(),r2=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Yj(t,r,n);case"!=":return Qj(t,r,n);case">":return Jj(t,r,n);case">=":return Zj(t,r,n);case"<":return e2(t,r,n);case"<=":return t2(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};wR.exports=r2});var SR=y((Qz,CR)=>{var n2=Qt(),i2=fs(),{safeRe:tf,t:rf}=Fo(),s2=(t,e)=>{if(t instanceof n2)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?tf[rf.COERCEFULL]:tf[rf.COERCE]);else{let c=e.includePrerelease?tf[rf.COERCERTLFULL]:tf[rf.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return i2(`${n}.${i}.${s}${o}${a}`,e)};CR.exports=s2});var TR=y((Jz,bR)=>{"use strict";bR.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var DR=y((Zz,RR)=>{"use strict";RR.exports=we;we.Node=ds;we.create=we;function we(t){var e=this;if(e instanceof we||(e=new we),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}we.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};we.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};we.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};we.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)a2(this,arguments[t]);return this.length};we.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)c2(this,arguments[t]);return this.length};we.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};we.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};we.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};we.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};we.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};we.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};we.prototype.map=function(t,e){e=e||this;for(var r=new we,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};we.prototype.mapReverse=function(t,e){e=e||this;for(var r=new we,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};we.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};we.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};we.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};we.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};we.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new we;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};we.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new we;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};we.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=o2(this,i,r[n]);return s};we.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function o2(t,e,r){var n=e===t.head?new ds(r,null,e,t):new ds(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function a2(t,e){t.tail=new ds(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function c2(t,e){t.head=new ds(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ds(t,e,r,n){if(!(this instanceof ds))return new ds(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{TR()(we)}catch{}});var OR=y((e5,qR)=>{"use strict";var u2=DR(),ps=Symbol("max"),Xn=Symbol("length"),$o=Symbol("lengthCalculator"),yc=Symbol("allowStale"),hs=Symbol("maxAge"),Gn=Symbol("dispose"),IR=Symbol("noDisposeOnSet"),It=Symbol("lruList"),nn=Symbol("cache"),xR=Symbol("updateAgeOnGet"),wg=()=>1,Sg=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[ps]=e.max||1/0,n=e.length||wg;if(this[$o]=typeof n!="function"?wg:n,this[yc]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[hs]=e.maxAge||0,this[Gn]=e.dispose,this[IR]=e.noDisposeOnSet||!1,this[xR]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ps]=e||1/0,vc(this)}get max(){return this[ps]}set allowStale(e){this[yc]=!!e}get allowStale(){return this[yc]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[hs]=e,vc(this)}get maxAge(){return this[hs]}set lengthCalculator(e){typeof e!="function"&&(e=wg),e!==this[$o]&&(this[$o]=e,this[Xn]=0,this[It].forEach(r=>{r.length=this[$o](r.value,r.key),this[Xn]+=r.length})),vc(this)}get lengthCalculator(){return this[$o]}get length(){return this[Xn]}get itemCount(){return this[It].length}rforEach(e,r){r=r||this;for(let n=this[It].tail;n!==null;){let i=n.prev;PR(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[It].head;n!==null;){let i=n.next;PR(this,e,n,r),n=i}}keys(){return this[It].toArray().map(e=>e.key)}values(){return this[It].toArray().map(e=>e.value)}reset(){this[Gn]&&this[It]&&this[It].length&&this[It].forEach(e=>this[Gn](e.key,e.value)),this[nn]=new Map,this[It]=new u2,this[Xn]=0}dump(){return this[It].map(e=>nf(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[It]}set(e,r,n){if(n=n||this[hs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[$o](r,e);if(this[nn].has(e)){if(s>this[ps])return Ho(this,this[nn].get(e)),!1;let c=this[nn].get(e).value;return this[Gn]&&(this[IR]||this[Gn](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Xn]+=s-c.length,c.length=s,this.get(e),vc(this),!0}let o=new bg(e,r,s,i,n);return o.length>this[ps]?(this[Gn]&&this[Gn](e,r),!1):(this[Xn]+=o.length,this[It].unshift(o),this[nn].set(e,this[It].head),vc(this),!0)}has(e){if(!this[nn].has(e))return!1;let r=this[nn].get(e).value;return!nf(this,r)}get(e){return Cg(this,e,!0)}peek(e){return Cg(this,e,!1)}pop(){let e=this[It].tail;return e?(Ho(this,e),e.value):null}del(e){Ho(this,this[nn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[nn].forEach((e,r)=>Cg(this,r,!1))}},Cg=(t,e,r)=>{let n=t[nn].get(e);if(n){let i=n.value;if(nf(t,i)){if(Ho(t,n),!t[yc])return}else r&&(t[xR]&&(n.value.now=Date.now()),t[It].unshiftNode(n));return i.value}},nf=(t,e)=>{if(!e||!e.maxAge&&!t[hs])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[hs]&&r>t[hs]},vc=t=>{if(t[Xn]>t[ps])for(let e=t[It].tail;t[Xn]>t[ps]&&e!==null;){let r=e.prev;Ho(t,e),e=r}},Ho=(t,e)=>{if(e){let r=e.value;t[Gn]&&t[Gn](r.key,r.value),t[Xn]-=r.length,t[nn].delete(r.key),t[It].removeNode(e)}},bg=class{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},PR=(t,e,r,n)=>{let i=r.value;nf(t,i)&&(Ho(t,r),t[yc]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};qR.exports=Sg});var Vr=y((t5,LR)=>{var gs=class{constructor(e,r){if(r=f2(r),e instanceof gs)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new gs(e.raw,r);if(e instanceof Tg)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!NR(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&y2(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&m2)|(this.options.loose&&v2))+":"+e,i=AR.get(n);if(i)return i;let s=this.options.loose,o=s?vr[ar.HYPHENRANGELOOSE]:vr[ar.HYPHENRANGE];e=e.replace(o,I2(this.options.includePrerelease)),Ue("hyphen replace",e),e=e.replace(vr[ar.COMPARATORTRIM],p2),Ue("comparator trim",e),e=e.replace(vr[ar.TILDETRIM],h2),Ue("tilde trim",e),e=e.replace(vr[ar.CARETTRIM],g2),Ue("caret trim",e);let a=e.split(" ").map(p=>_2(p,this.options)).join(" ").split(/\s+/).map(p=>D2(p,this.options));s&&(a=a.filter(p=>(Ue("loose invalid filter",p,this.options),!!p.match(vr[ar.COMPARATORLOOSE])))),Ue("range list",a);let c=new Map,u=a.map(p=>new Tg(p,this.options));for(let p of u){if(NR(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return AR.set(n,d),d}intersects(e,r){if(!(e instanceof gs))throw new TypeError("a Range is required");return this.set.some(n=>kR(n,r)&&e.set.some(i=>kR(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new d2(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(P2(this.set[r],e,this.options))return!0;return!1}};LR.exports=gs;var l2=OR(),AR=new l2({max:1e3}),f2=Gl(),Tg=_c(),Ue=gc(),d2=Qt(),{safeRe:vr,t:ar,comparatorTrimReplace:p2,tildeTrimReplace:h2,caretTrimReplace:g2}=Fo(),{FLAG_INCLUDE_PRERELEASE:m2,FLAG_LOOSE:v2}=hc(),NR=t=>t.value==="<0.0.0-0",y2=t=>t.value==="",kR=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},_2=(t,e)=>(Ue("comp",t,e),t=C2(t,e),Ue("caret",t),t=E2(t,e),Ue("tildes",t),t=b2(t,e),Ue("xrange",t),t=R2(t,e),Ue("stars",t),t),cr=t=>!t||t.toLowerCase()==="x"||t==="*",E2=(t,e)=>t.trim().split(/\s+/).map(r=>w2(r,e)).join(" "),w2=(t,e)=>{let r=e.loose?vr[ar.TILDELOOSE]:vr[ar.TILDE];return t.replace(r,(n,i,s,o,a)=>{Ue("tilde",t,n,i,s,o,a);let c;return cr(i)?c="":cr(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:cr(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Ue("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Ue("tilde return",c),c})},C2=(t,e)=>t.trim().split(/\s+/).map(r=>S2(r,e)).join(" "),S2=(t,e)=>{Ue("caret",t,e);let r=e.loose?vr[ar.CARETLOOSE]:vr[ar.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{Ue("caret",t,i,s,o,a,c);let u;return cr(s)?u="":cr(o)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:cr(a)?s==="0"?u=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(Ue("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(Ue("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Ue("caret return",u),u})},b2=(t,e)=>(Ue("replaceXRanges",t,e),t.split(/\s+/).map(r=>T2(r,e)).join(" ")),T2=(t,e)=>{t=t.trim();let r=e.loose?vr[ar.XRANGELOOSE]:vr[ar.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{Ue("xRange",t,n,i,s,o,a,c);let u=cr(s),d=u||cr(o),p=d||cr(a),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(o=0),a=0,i===">"?(i=">=",d?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",d?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):d?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:p&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),Ue("xRange return",n),n})},R2=(t,e)=>(Ue("replaceStars",t,e),t.trim().replace(vr[ar.STAR],"")),D2=(t,e)=>(Ue("replaceGTE0",t,e),t.trim().replace(vr[e.includePrerelease?ar.GTE0PRE:ar.GTE0],"")),I2=t=>(e,r,n,i,s,o,a,c,u,d,p,m,v)=>(cr(n)?r="":cr(i)?r=`>=${n}.0.0${t?"-0":""}`:cr(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,cr(u)?c="":cr(d)?c=`<${+u+1}.0.0-0`:cr(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),P2=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ue(t[n].semver),t[n].semver!==Tg.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var _c=y((r5,BR)=>{var Ec=Symbol("SemVer ANY"),Bo=class{static get ANY(){return Ec}constructor(e,r){if(r=MR(r),e instanceof Bo){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Dg("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Ec?this.value="":this.value=this.operator+this.semver.version,Dg("comp",this)}parse(e){let r=this.options.loose?FR[jR.COMPARATORLOOSE]:FR[jR.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new $R(n[2],this.options.loose):this.semver=Ec}toString(){return this.value}test(e){if(Dg("Comparator.test",e,this.options.loose),this.semver===Ec||e===Ec)return!0;if(typeof e=="string")try{e=new $R(e,this.options)}catch{return!1}return Rg(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Bo))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new HR(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new HR(this.value,r).test(e.semver):(r=MR(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Rg(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Rg(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};BR.exports=Bo;var MR=Gl(),{safeRe:FR,t:jR}=Fo(),Rg=Eg(),Dg=gc(),$R=Qt(),HR=Vr()});var wc=y((n5,UR)=>{var x2=Vr(),q2=(t,e,r)=>{try{e=new x2(e,r)}catch{return!1}return e.test(t)};UR.exports=q2});var zR=y((i5,WR)=>{var O2=Vr(),A2=(t,e)=>new O2(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));WR.exports=A2});var VR=y((s5,KR)=>{var N2=Qt(),k2=Vr(),L2=(t,e,r)=>{let n=null,i=null,s=null;try{s=new k2(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new N2(n,r))}),n};KR.exports=L2});var XR=y((o5,GR)=>{var M2=Qt(),F2=Vr(),j2=(t,e,r)=>{let n=null,i=null,s=null;try{s=new F2(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new M2(n,r))}),n};GR.exports=j2});var JR=y((a5,QR)=>{var Ig=Qt(),$2=Vr(),YR=mc(),H2=(t,e)=>{t=new $2(t,e);let r=new Ig("0.0.0");if(t.test(r)||(r=new Ig("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Ig(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||YR(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||YR(r,s))&&(r=s)}return r&&t.test(r)?r:null};QR.exports=H2});var eD=y((c5,ZR)=>{var B2=Vr(),U2=(t,e)=>{try{return new B2(t,e).range||"*"}catch{return null}};ZR.exports=U2});var sf=y((u5,iD)=>{var W2=Qt(),nD=_c(),{ANY:z2}=nD,K2=Vr(),V2=wc(),tD=mc(),rD=Jl(),G2=ef(),X2=Zl(),Y2=(t,e,r,n)=>{t=new W2(t,n),e=new K2(e,n);let i,s,o,a,c;switch(r){case">":i=tD,s=G2,o=rD,a=">",c=">=";break;case"<":i=rD,s=X2,o=tD,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(V2(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(v=>{v.semver===z2&&(v=new nD(">=0.0.0")),p=p||v,m=m||v,i(v.semver,p.semver,n)?p=v:o(v.semver,m.semver,n)&&(m=v)}),p.operator===a||p.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};iD.exports=Y2});var oD=y((l5,sD)=>{var Q2=sf(),J2=(t,e,r)=>Q2(t,e,">",r);sD.exports=J2});var cD=y((f5,aD)=>{var Z2=sf(),e$=(t,e,r)=>Z2(t,e,"<",r);aD.exports=e$});var fD=y((d5,lD)=>{var uD=Vr(),t$=(t,e,r)=>(t=new uD(t,r),e=new uD(e,r),t.intersects(e,r));lD.exports=t$});var pD=y((p5,dD)=>{var r$=wc(),n$=Kr();dD.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((d,p)=>n$(d,p,r));for(let d of o)r$(d,e,r)?(s=d,i||(i=d)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[d,p]of n)d===p?a.push(d):!p&&d===o[0]?a.push("*"):p?d===o[0]?a.push(`<=${p}`):a.push(`${d} - ${p}`):a.push(`>=${d}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var _D=y((h5,yD)=>{var hD=Vr(),xg=_c(),{ANY:Pg}=xg,Cc=wc(),qg=Kr(),i$=(t,e,r={})=>{if(t===e)return!0;t=new hD(t,r),e=new hD(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=o$(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},s$=[new xg(">=0.0.0-0")],gD=[new xg(">=0.0.0")],o$=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Pg){if(e.length===1&&e[0].semver===Pg)return!0;r.includePrerelease?t=s$:t=gD}if(e.length===1&&e[0].semver===Pg){if(r.includePrerelease)return!0;e=gD}let n=new Set,i,s;for(let v of t)v.operator===">"||v.operator===">="?i=mD(i,v,r):v.operator==="<"||v.operator==="<="?s=vD(s,v,r):n.add(v.semver);if(n.size>1)return null;let o;if(i&&s){if(o=qg(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let v of n){if(i&&!Cc(v,String(i),r)||s&&!Cc(v,String(s),r))return null;for(let b of e)if(!Cc(v,String(b),r))return!1;return!0}let a,c,u,d,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let v of e){if(d=d||v.operator===">"||v.operator===">=",u=u||v.operator==="<"||v.operator==="<=",i){if(m&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===m.major&&v.semver.minor===m.minor&&v.semver.patch===m.patch&&(m=!1),v.operator===">"||v.operator===">="){if(a=mD(i,v,r),a===v&&a!==i)return!1}else if(i.operator===">="&&!Cc(i.semver,String(v),r))return!1}if(s){if(p&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===p.major&&v.semver.minor===p.minor&&v.semver.patch===p.patch&&(p=!1),v.operator==="<"||v.operator==="<="){if(c=vD(s,v,r),c===v&&c!==s)return!1}else if(s.operator==="<="&&!Cc(s.semver,String(v),r))return!1}if(!v.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&d&&!i&&o!==0||m||p)},mD=(t,e,r)=>{if(!t)return e;let n=qg(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},vD=(t,e,r)=>{if(!t)return e;let n=qg(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};yD.exports=i$});var SD=y((g5,CD)=>{var Og=Fo(),ED=hc(),a$=Qt(),wD=vg(),c$=fs(),u$=$T(),l$=BT(),f$=zT(),d$=GT(),p$=YT(),h$=JT(),g$=eR(),m$=rR(),v$=Kr(),y$=oR(),_$=cR(),E$=Ql(),w$=dR(),C$=hR(),S$=mc(),b$=Jl(),T$=yg(),R$=_g(),D$=Zl(),I$=ef(),P$=Eg(),x$=SR(),q$=_c(),O$=Vr(),A$=wc(),N$=zR(),k$=VR(),L$=XR(),M$=JR(),F$=eD(),j$=sf(),$$=oD(),H$=cD(),B$=fD(),U$=pD(),W$=_D();CD.exports={parse:c$,valid:u$,clean:l$,inc:f$,diff:d$,major:p$,minor:h$,patch:g$,prerelease:m$,compare:v$,rcompare:y$,compareLoose:_$,compareBuild:E$,sort:w$,rsort:C$,gt:S$,lt:b$,eq:T$,neq:R$,gte:D$,lte:I$,cmp:P$,coerce:x$,Comparator:q$,Range:O$,satisfies:A$,toComparators:N$,maxSatisfying:k$,minSatisfying:L$,minVersion:M$,validRange:F$,outside:j$,gtr:$$,ltr:H$,intersects:B$,simplifyRange:U$,subset:W$,SemVer:a$,re:Og.re,src:Og.src,tokens:Og.t,SEMVER_SPEC_VERSION:ED.SEMVER_SPEC_VERSION,RELEASE_TYPES:ED.RELEASE_TYPES,compareIdentifiers:wD.compareIdentifiers,rcompareIdentifiers:wD.rcompareIdentifiers}});var Ei=y(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.asPromise=st.thenable=st.typedArray=st.stringArray=st.array=st.func=st.error=st.number=st.string=st.boolean=void 0;function z$(t){return t===!0||t===!1}st.boolean=z$;function bD(t){return typeof t=="string"||t instanceof String}st.string=bD;function K$(t){return typeof t=="number"||t instanceof Number}st.number=K$;function V$(t){return t instanceof Error}st.error=V$;function TD(t){return typeof t=="function"}st.func=TD;function RD(t){return Array.isArray(t)}st.array=RD;function G$(t){return RD(t)&&t.every(e=>bD(e))}st.stringArray=G$;function X$(t,e){return Array.isArray(t)&&t.every(e)}st.typedArray=X$;function DD(t){return t&&TD(t.then)}st.thenable=DD;function Y$(t){return t instanceof Promise?t:DD(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}st.asPromise=Y$});var Yn=y(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});var Ag;function Ng(){if(Ag===void 0)throw new Error("No runtime abstraction layer installed");return Ag}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Ag=r}t.install=e})(Ng||(Ng={}));kg.default=Ng});var Lg=y(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.Disposable=void 0;var Q$;(function(t){function e(r){return{dispose:r}}t.create=e})(Q$=Sc.Disposable||(Sc.Disposable={}))});var ID=y(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.AbstractMessageBuffer=void 0;var J$=13,Z$=10,eH=`\r
`,Mg=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case J$:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case Z$:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=c.byteLength,r++}if(e!==4)return;let s=this._read(i+n),o=new Map,a=this.toString(s,"ascii").split(eH);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){let u=a[c],d=u.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let p=u.substr(0,d),m=u.substr(d+1).trim();o.set(p,m)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);r.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};of.AbstractMessageBuffer=Mg});var qD=y(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});var tH=Yn(),PD=require("util"),ms=Lg(),rH=ID(),Uo=class extends rH.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Uo.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new PD.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};Uo.emptyBuffer=Buffer.allocUnsafe(0);var Fg=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ms.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ms.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ms.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ms.Disposable.create(()=>this.stream.off("data",e))}},jg=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ms.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ms.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ms.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let s=o=>{o==null?n():i(o)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},xD=Object.freeze({messageBuffer:Object.freeze({create:t=>new Uo(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new PD.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new Fg(t),asWritableStream:t=>new jg(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){return setTimeout(t,e,...r)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function $g(){return xD}(function(t){function e(){tH.default.install(xD)}t.install=e})($g||($g={}));Hg.default=$g});var Wo=y(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.stringArray=Jt.array=Jt.func=Jt.error=Jt.number=Jt.string=Jt.boolean=void 0;function nH(t){return t===!0||t===!1}Jt.boolean=nH;function OD(t){return typeof t=="string"||t instanceof String}Jt.string=OD;function iH(t){return typeof t=="number"||t instanceof Number}Jt.number=iH;function sH(t){return t instanceof Error}Jt.error=sH;function oH(t){return typeof t=="function"}Jt.func=oH;function AD(t){return Array.isArray(t)}Jt.array=AD;function aH(t){return AD(t)&&t.every(e=>OD(e))}Jt.stringArray=aH});var lm=y(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.isResponseMessage=z.isNotificationMessage=z.isRequestMessage=z.NotificationType9=z.NotificationType8=z.NotificationType7=z.NotificationType6=z.NotificationType5=z.NotificationType4=z.NotificationType3=z.NotificationType2=z.NotificationType1=z.NotificationType0=z.NotificationType=z.RequestType9=z.RequestType8=z.RequestType7=z.RequestType6=z.RequestType5=z.RequestType4=z.RequestType3=z.RequestType2=z.RequestType1=z.RequestType=z.RequestType0=z.AbstractMessageSignature=z.ParameterStructures=z.ResponseError=z.ErrorCodes=void 0;var vs=Wo(),ND;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(ND=z.ErrorCodes||(z.ErrorCodes={}));var bc=class extends Error{constructor(e,r,n){super(r),this.code=vs.number(e)?e:ND.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,bc.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};z.ResponseError=bc;var Pt=class{constructor(e){this.kind=e}static is(e){return e===Pt.auto||e===Pt.byName||e===Pt.byPosition}toString(){return this.kind}};z.ParameterStructures=Pt;Pt.auto=new Pt("auto");Pt.byPosition=new Pt("byPosition");Pt.byName=new Pt("byName");var We=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Pt.auto}};z.AbstractMessageSignature=We;var Bg=class extends We{constructor(e){super(e,0)}};z.RequestType0=Bg;var Ug=class extends We{constructor(e,r=Pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};z.RequestType=Ug;var Wg=class extends We{constructor(e,r=Pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};z.RequestType1=Wg;var zg=class extends We{constructor(e){super(e,2)}};z.RequestType2=zg;var Kg=class extends We{constructor(e){super(e,3)}};z.RequestType3=Kg;var Vg=class extends We{constructor(e){super(e,4)}};z.RequestType4=Vg;var Gg=class extends We{constructor(e){super(e,5)}};z.RequestType5=Gg;var Xg=class extends We{constructor(e){super(e,6)}};z.RequestType6=Xg;var Yg=class extends We{constructor(e){super(e,7)}};z.RequestType7=Yg;var Qg=class extends We{constructor(e){super(e,8)}};z.RequestType8=Qg;var Jg=class extends We{constructor(e){super(e,9)}};z.RequestType9=Jg;var Zg=class extends We{constructor(e,r=Pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};z.NotificationType=Zg;var em=class extends We{constructor(e){super(e,0)}};z.NotificationType0=em;var tm=class extends We{constructor(e,r=Pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};z.NotificationType1=tm;var rm=class extends We{constructor(e){super(e,2)}};z.NotificationType2=rm;var nm=class extends We{constructor(e){super(e,3)}};z.NotificationType3=nm;var im=class extends We{constructor(e){super(e,4)}};z.NotificationType4=im;var sm=class extends We{constructor(e){super(e,5)}};z.NotificationType5=sm;var om=class extends We{constructor(e){super(e,6)}};z.NotificationType6=om;var am=class extends We{constructor(e){super(e,7)}};z.NotificationType7=am;var cm=class extends We{constructor(e){super(e,8)}};z.NotificationType8=cm;var um=class extends We{constructor(e){super(e,9)}};z.NotificationType9=um;function cH(t){let e=t;return e&&vs.string(e.method)&&(vs.string(e.id)||vs.number(e.id))}z.isRequestMessage=cH;function uH(t){let e=t;return e&&vs.string(e.method)&&t.id===void 0}z.isNotificationMessage=uH;function lH(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(vs.string(e.id)||vs.number(e.id)||e.id===null)}z.isResponseMessage=lH});var Ko=y(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.Emitter=ys.Event=void 0;var fH=Yn(),dH;(function(t){let e={dispose(){}};t.None=function(){return e}})(dH=ys.Event||(ys.Event={}));var fm=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(a){fH.default().console.error(a)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},zo=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new fm),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=zo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ys.Emitter=zo;zo._noop=function(){}});var gm=y(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.CancellationTokenSource=_s.CancellationToken=void 0;var kD=Yn(),pH=Wo(),dm=Ko(),pm;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:dm.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:dm.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||pH.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(pm=_s.CancellationToken||(_s.CancellationToken={}));var hH=Object.freeze(function(t,e){let r=kD.default().timer.setTimeout(t.bind(e),0);return{dispose(){kD.default().timer.clearTimeout(r)}}}),af=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?hH:(this._emitter||(this._emitter=new dm.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},hm=class{get token(){return this._token||(this._token=new af),this._token}cancel(){this._token?this._token.cancel():this._token=pm.Cancelled}dispose(){this._token?this._token instanceof af&&this._token.dispose():this._token=pm.None}};_s.CancellationTokenSource=hm});var LD=y(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.ReadableStreamMessageReader=Qn.AbstractMessageReader=Qn.MessageReader=void 0;var cf=Yn(),Vo=Wo(),mm=Ko(),gH;(function(t){function e(r){let n=r;return n&&Vo.func(n.listen)&&Vo.func(n.dispose)&&Vo.func(n.onError)&&Vo.func(n.onClose)&&Vo.func(n.onPartialMessage)}t.is=e})(gH=Qn.MessageReader||(Qn.MessageReader={}));var uf=class{constructor(){this.errorEmitter=new mm.Emitter,this.closeEmitter=new mm.Emitter,this.partialMessageEmitter=new mm.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Vo.string(e.message)?e.message:"unknown"}`)}};Qn.AbstractMessageReader=uf;var vm;(function(t){function e(r){var n;let i,s,o,a=new Map,c,u=new Map;if(r===void 0||typeof r=="string")i=r??"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)a.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,u.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)u.set(d.name,d)}return c===void 0&&(c=cf.default().applicationJson.decoder,u.set(c.name,c)),{charset:i,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:u}}t.fromOptions=e})(vm||(vm={}));var ym=class extends uf{constructor(e,r){super(),this.readable=e,this.options=vm.fromOptions(r),this.buffer=cf.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(cf.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=cf.default().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Qn.ReadableStreamMessageReader=ym});var MD=y(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.Semaphore=void 0;var mH=Yn(),_m=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||mH.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};lf.Semaphore=_m});var HD=y(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.WriteableStreamMessageWriter=Jn.AbstractMessageWriter=Jn.MessageWriter=void 0;var FD=Yn(),Tc=Wo(),vH=MD(),jD=Ko(),yH="Content-Length: ",$D=`\r
`,_H;(function(t){function e(r){let n=r;return n&&Tc.func(n.dispose)&&Tc.func(n.onClose)&&Tc.func(n.onError)&&Tc.func(n.write)}t.is=e})(_H=Jn.MessageWriter||(Jn.MessageWriter={}));var ff=class{constructor(){this.errorEmitter=new jD.Emitter,this.closeEmitter=new jD.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Tc.string(e.message)?e.message:"unknown"}`)}};Jn.AbstractMessageWriter=ff;var Em;(function(t){function e(r){var n,i;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:FD.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:FD.default().applicationJson.encoder}}t.fromOptions=e})(Em||(Em={}));var wm=class extends ff{constructor(e,r){super(),this.writable=e,this.options=Em.fromOptions(r),this.errorCount=0,this.writeSemaphore=new vH.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(yH,n.byteLength.toString(),$D),i.push($D),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Jn.WriteableStreamMessageWriter=wm});var BD=y(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.LRUCache=Zn.LinkedMap=Zn.Touch=void 0;var ur;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ur=Zn.Touch||(Zn.Touch={}));var df=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,r=ur.None){let n=this._map.get(e);if(!!n)return r!==ur.None&&this.touch(n,r),n.value}set(e,r,n=ur.None){let i=this._map.get(e);if(i)i.value=r,n!==ur.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case ur.None:this.addItemLast(i);break;case ur.First:this.addItemFirst(i);break;case ur.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ur.First&&r!==ur.Last)){if(r===ur.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===ur.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Zn.LinkedMap=df;var Cm=class extends df{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=ur.AsNew){return super.get(e,r)}peek(e){return super.get(e,ur.None)}set(e,r){return super.set(e,r,ur.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Zn.LRUCache=Cm});var VD=y(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.ConnectionOptions=ne.CancellationStrategy=ne.CancellationSenderStrategy=ne.CancellationReceiverStrategy=ne.ConnectionStrategy=ne.ConnectionError=ne.ConnectionErrors=ne.LogTraceNotification=ne.SetTraceNotification=ne.TraceFormat=ne.Trace=ne.NullLogger=ne.ProgressType=void 0;var UD=Yn(),xt=Wo(),Z=lm(),WD=BD(),Rc=Ko(),Sm=gm(),Dc;(function(t){t.type=new Z.NotificationType("$/cancelRequest")})(Dc||(Dc={}));var hf;(function(t){t.type=new Z.NotificationType("$/progress")})(hf||(hf={}));var bm=class{constructor(){}};ne.ProgressType=bm;var Tm;(function(t){function e(r){return xt.func(r)}t.is=e})(Tm||(Tm={}));ne.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Et;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Et=ne.Trace||(ne.Trace={}));(function(t){function e(n){if(!xt.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(Et=ne.Trace||(ne.Trace={}));var sn;(function(t){t.Text="text",t.JSON="json"})(sn=ne.TraceFormat||(ne.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(sn=ne.TraceFormat||(ne.TraceFormat={}));var zD;(function(t){t.type=new Z.NotificationType("$/setTrace")})(zD=ne.SetTraceNotification||(ne.SetTraceNotification={}));var Rm;(function(t){t.type=new Z.NotificationType("$/logTrace")})(Rm=ne.LogTraceNotification||(ne.LogTraceNotification={}));var pf;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(pf=ne.ConnectionErrors||(ne.ConnectionErrors={}));var wi=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,wi.prototype)}};ne.ConnectionError=wi;var KD;(function(t){function e(r){let n=r;return n&&xt.func(n.cancelUndispatched)}t.is=e})(KD=ne.ConnectionStrategy||(ne.ConnectionStrategy={}));var Dm;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new Sm.CancellationTokenSource}});function e(r){let n=r;return n&&xt.func(n.createCancellationTokenSource)}t.is=e})(Dm=ne.CancellationReceiverStrategy||(ne.CancellationReceiverStrategy={}));var Im;(function(t){t.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Dc.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&xt.func(n.sendCancellation)&&xt.func(n.cleanup)}t.is=e})(Im=ne.CancellationSenderStrategy||(ne.CancellationSenderStrategy={}));var Pm;(function(t){t.Message=Object.freeze({receiver:Dm.Message,sender:Im.Message});function e(r){let n=r;return n&&Dm.is(n.receiver)&&Im.is(n.sender)}t.is=e})(Pm=ne.CancellationStrategy||(ne.CancellationStrategy={}));var EH;(function(t){function e(r){let n=r;return n&&(Pm.is(n.cancellationStrategy)||KD.is(n.connectionStrategy))}t.is=e})(EH=ne.ConnectionOptions||(ne.ConnectionOptions={}));var on;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(on||(on={}));function wH(t,e,r,n){let i=r!==void 0?r:ne.NullLogger,s=0,o=0,a=0,c="2.0",u,d=Object.create(null),p,m=Object.create(null),v=new Map,b,P=new WD.LinkedMap,j=Object.create(null),A=Object.create(null),D=Et.Off,O=sn.Text,x,H=on.New,le=new Rc.Emitter,Ne=new Rc.Emitter,Ke=new Rc.Emitter,Te=new Rc.Emitter,mt=new Rc.Emitter,ot=n&&n.cancellationStrategy?n.cancellationStrategy:Pm.Message;function At(T){if(T===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+T.toString()}function Nt(T){return T===null?"res-unknown-"+(++a).toString():"res-"+T.toString()}function kt(){return"not-"+(++o).toString()}function at(T,E){Z.isRequestMessage(E)?T.set(At(E.id),E):Z.isResponseMessage(E)?T.set(Nt(E.id),E):T.set(kt(),E)}function Lt(T){}function Oe(){return H===on.Listening}function wr(){return H===on.Closed}function He(){return H===on.Disposed}function ct(){(H===on.New||H===on.Listening)&&(H=on.Closed,Ne.fire(void 0))}function Rt(T){le.fire([T,void 0,void 0])}function zt(T){le.fire(T)}t.onClose(ct),t.onError(Rt),e.onClose(ct),e.onError(zt);function dn(){b||P.size===0||(b=UD.default().timer.setImmediate(()=>{b=void 0,Cr()}))}function Cr(){if(P.size===0)return;let T=P.shift();try{Z.isRequestMessage(T)?In(T):Z.isNotificationMessage(T)?hn(T):Z.isResponseMessage(T)?pn(T):Pn(T)}finally{dn()}}let Dn=T=>{try{if(Z.isNotificationMessage(T)&&T.method===Dc.type.method){let E=At(T.params.id),g=P.get(E);if(Z.isRequestMessage(g)){let w=n?.connectionStrategy,R=w&&w.cancelUndispatched?w.cancelUndispatched(g,Lt):void 0;if(R&&(R.error!==void 0||R.result!==void 0)){P.delete(E),R.id=g.id,qr(R,T.method,Date.now()),e.write(R);return}}}at(P,T)}finally{dn()}};function In(T){if(He())return;function E(I,$,V){let se={jsonrpc:c,id:T.id};I instanceof Z.ResponseError?se.error=I.toJson():se.result=I===void 0?null:I,qr(se,$,V),e.write(se)}function g(I,$,V){let se={jsonrpc:c,id:T.id,error:I.toJson()};qr(se,$,V),e.write(se)}function w(I,$,V){I===void 0&&(I=null);let se={jsonrpc:c,id:T.id,result:I};qr(se,$,V),e.write(se)}ii(T);let R=d[T.method],l,f;R&&(l=R.type,f=R.handler);let S=Date.now();if(f||u){let I=String(T.id),$=ot.receiver.createCancellationTokenSource(I);A[I]=$;try{let V;if(f)if(T.params===void 0){if(l!==void 0&&l.numberOfParams!==0){g(new Z.ResponseError(Z.ErrorCodes.InvalidParams,`Request ${T.method} defines ${l.numberOfParams} params but recevied none.`),T.method,S);return}V=f($.token)}else if(Array.isArray(T.params)){if(l!==void 0&&l.parameterStructures===Z.ParameterStructures.byName){g(new Z.ResponseError(Z.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by name but received parameters by position`),T.method,S);return}V=f(...T.params,$.token)}else{if(l!==void 0&&l.parameterStructures===Z.ParameterStructures.byPosition){g(new Z.ResponseError(Z.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by position but received parameters by name`),T.method,S);return}V=f(T.params,$.token)}else u&&(V=u(T.method,T.params,$.token));let se=V;V?se.then?se.then(De=>{delete A[I],E(De,T.method,S)},De=>{delete A[I],De instanceof Z.ResponseError?g(De,T.method,S):De&&xt.string(De.message)?g(new Z.ResponseError(Z.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${De.message}`),T.method,S):g(new Z.ResponseError(Z.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,S)}):(delete A[I],E(V,T.method,S)):(delete A[I],w(V,T.method,S))}catch(V){delete A[I],V instanceof Z.ResponseError?E(V,T.method,S):V&&xt.string(V.message)?g(new Z.ResponseError(Z.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${V.message}`),T.method,S):g(new Z.ResponseError(Z.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,S)}}else g(new Z.ResponseError(Z.ErrorCodes.MethodNotFound,`Unhandled method ${T.method}`),T.method,S)}function pn(T){if(!He())if(T.id===null)T.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(T.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let E=String(T.id),g=j[E];if(qi(T,g),g){delete j[E];try{if(T.error){let w=T.error;g.reject(new Z.ResponseError(w.code,w.message,w.data))}else if(T.result!==void 0)g.resolve(T.result);else throw new Error("Should never happen.")}catch(w){w.message?i.error(`Response handler '${g.method}' failed with message: ${w.message}`):i.error(`Response handler '${g.method}' failed unexpectedly.`)}}}}function hn(T){if(He())return;let E,g;if(T.method===Dc.type.method)g=w=>{let R=w.id,l=A[String(R)];l&&l.cancel()};else{let w=m[T.method];w&&(g=w.handler,E=w.type)}if(g||p)try{Or(T),g?T.params===void 0?(E!==void 0&&E.numberOfParams!==0&&E.parameterStructures!==Z.ParameterStructures.byName&&i.error(`Notification ${T.method} defines ${E.numberOfParams} params but recevied none.`),g()):Array.isArray(T.params)?(E!==void 0&&(E.parameterStructures===Z.ParameterStructures.byName&&i.error(`Notification ${T.method} defines parameters by name but received parameters by position`),E.numberOfParams!==T.params.length&&i.error(`Notification ${T.method} defines ${E.numberOfParams} params but received ${T.params.length} argumennts`)),g(...T.params)):(E!==void 0&&E.parameterStructures===Z.ParameterStructures.byPosition&&i.error(`Notification ${T.method} defines parameters by position but received parameters by name`),g(T.params)):p&&p(T.method,T.params)}catch(w){w.message?i.error(`Notification handler '${T.method}' failed with message: ${w.message}`):i.error(`Notification handler '${T.method}' failed unexpectedly.`)}else Ke.fire(T)}function Pn(T){if(!T){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(T,null,4)}`);let E=T;if(xt.string(E.id)||xt.number(E.id)){let g=String(E.id),w=j[g];w&&w.reject(new Error("The received response has neither a result nor an error property."))}}function ni(T){if(!(D===Et.Off||!x))if(O===sn.Text){let E;D===Et.Verbose&&T.params&&(E=`Params: ${JSON.stringify(T.params,null,4)}

`),x.log(`Sending request '${T.method} - (${T.id})'.`,E)}else ut("send-request",T)}function xi(T){if(!(D===Et.Off||!x))if(O===sn.Text){let E;D===Et.Verbose&&(T.params?E=`Params: ${JSON.stringify(T.params,null,4)}

`:E=`No parameters provided.

`),x.log(`Sending notification '${T.method}'.`,E)}else ut("send-notification",T)}function qr(T,E,g){if(!(D===Et.Off||!x))if(O===sn.Text){let w;D===Et.Verbose&&(T.error&&T.error.data?w=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?w=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&(w=`No result returned.

`)),x.log(`Sending response '${E} - (${T.id})'. Processing request took ${Date.now()-g}ms`,w)}else ut("send-response",T)}function ii(T){if(!(D===Et.Off||!x))if(O===sn.Text){let E;D===Et.Verbose&&T.params&&(E=`Params: ${JSON.stringify(T.params,null,4)}

`),x.log(`Received request '${T.method} - (${T.id})'.`,E)}else ut("receive-request",T)}function Or(T){if(!(D===Et.Off||!x||T.method===Rm.type.method))if(O===sn.Text){let E;D===Et.Verbose&&(T.params?E=`Params: ${JSON.stringify(T.params,null,4)}

`:E=`No parameters provided.

`),x.log(`Received notification '${T.method}'.`,E)}else ut("receive-notification",T)}function qi(T,E){if(!(D===Et.Off||!x))if(O===sn.Text){let g;if(D===Et.Verbose&&(T.error&&T.error.data?g=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?g=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&(g=`No result returned.

`)),E){let w=T.error?` Request failed: ${T.error.message} (${T.error.code}).`:"";x.log(`Received response '${E.method} - (${T.id})' in ${Date.now()-E.timerStart}ms.${w}`,g)}else x.log(`Received response ${T.id} without active response promise.`,g)}else ut("receive-response",T)}function ut(T,E){if(!x||D===Et.Off)return;let g={isLSPMessage:!0,type:T,message:E,timestamp:Date.now()};x.log(g)}function pr(){if(wr())throw new wi(pf.Closed,"Connection is closed.");if(He())throw new wi(pf.Disposed,"Connection is disposed.")}function si(){if(Oe())throw new wi(pf.AlreadyListening,"Connection is already listening")}function Oi(){if(!Oe())throw new Error("Call listen() first.")}function Ar(T){return T===void 0?null:T}function oi(T){if(T!==null)return T}function xn(T){return T!=null&&!Array.isArray(T)&&typeof T=="object"}function Nr(T,E){switch(T){case Z.ParameterStructures.auto:return xn(E)?oi(E):[Ar(E)];case Z.ParameterStructures.byName:if(!xn(E))throw new Error("Recevied parameters by name but param is not an object literal.");return oi(E);case Z.ParameterStructures.byPosition:return[Ar(E)];default:throw new Error(`Unknown parameter structure ${T.toString()}`)}}function qn(T,E){let g,w=T.numberOfParams;switch(w){case 0:g=void 0;break;case 1:g=Nr(T.parameterStructures,E[0]);break;default:g=[];for(let R=0;R<E.length&&R<w;R++)g.push(Ar(E[R]));if(E.length<w)for(let R=E.length;R<w;R++)g.push(null);break}return g}let kr={sendNotification:(T,...E)=>{pr();let g,w;if(xt.string(T)){g=T;let l=E[0],f=0,S=Z.ParameterStructures.auto;Z.ParameterStructures.is(l)&&(f=1,S=l);let I=E.length,$=I-f;switch($){case 0:w=void 0;break;case 1:w=Nr(S,E[f]);break;default:if(S===Z.ParameterStructures.byName)throw new Error(`Recevied ${$} parameters for 'by Name' notification parameter structure.`);w=E.slice(f,I).map(V=>Ar(V));break}}else{let l=E;g=T.method,w=qn(T,l)}let R={jsonrpc:c,method:g,params:w};xi(R),e.write(R)},onNotification:(T,E)=>{pr();let g;return xt.func(T)?p=T:E&&(xt.string(T)?(g=T,m[T]={type:void 0,handler:E}):(g=T.method,m[T.method]={type:T,handler:E})),{dispose:()=>{g!==void 0?delete m[g]:p=void 0}}},onProgress:(T,E,g)=>{if(v.has(E))throw new Error(`Progress handler for token ${E} already registered`);return v.set(E,g),{dispose:()=>{v.delete(E)}}},sendProgress:(T,E,g)=>{kr.sendNotification(hf.type,{token:E,value:g})},onUnhandledProgress:Te.event,sendRequest:(T,...E)=>{pr(),Oi();let g,w,R;if(xt.string(T)){g=T;let I=E[0],$=E[E.length-1],V=0,se=Z.ParameterStructures.auto;Z.ParameterStructures.is(I)&&(V=1,se=I);let De=E.length;Sm.CancellationToken.is($)&&(De=De-1,R=$);let lt=De-V;switch(lt){case 0:w=void 0;break;case 1:w=Nr(se,E[V]);break;default:if(se===Z.ParameterStructures.byName)throw new Error(`Recevied ${lt} parameters for 'by Name' request parameter structure.`);w=E.slice(V,De).map(ft=>Ar(ft));break}}else{let I=E;g=T.method,w=qn(T,I);let $=T.numberOfParams;R=Sm.CancellationToken.is(I[$])?I[$]:void 0}let l=s++,f;return R&&(f=R.onCancellationRequested(()=>{ot.sender.sendCancellation(kr,l)})),new Promise((I,$)=>{let V={jsonrpc:c,id:l,method:g,params:w},se=ft=>{I(ft),ot.sender.cleanup(l),f?.dispose()},De=ft=>{$(ft),ot.sender.cleanup(l),f?.dispose()},lt={method:g,timerStart:Date.now(),resolve:se,reject:De};ni(V);try{e.write(V)}catch(ft){lt.reject(new Z.ResponseError(Z.ErrorCodes.MessageWriteError,ft.message?ft.message:"Unknown reason")),lt=null}lt&&(j[String(l)]=lt)})},onRequest:(T,E)=>{pr();let g=null;return Tm.is(T)?(g=void 0,u=T):xt.string(T)?(g=null,E!==void 0&&(g=T,d[T]={handler:E,type:void 0})):E!==void 0&&(g=T.method,d[T.method]={type:T,handler:E}),{dispose:()=>{g!==null&&(g!==void 0?delete d[g]:u=void 0)}}},trace:(T,E,g)=>{let w=!1,R=sn.Text;g!==void 0&&(xt.boolean(g)?w=g:(w=g.sendNotification||!1,R=g.traceFormat||sn.Text)),D=T,O=R,D===Et.Off?x=void 0:x=E,w&&!wr()&&!He()&&kr.sendNotification(zD.type,{value:Et.toString(T)})},onError:le.event,onClose:Ne.event,onUnhandledNotification:Ke.event,onDispose:mt.event,end:()=>{e.end()},dispose:()=>{if(He())return;H=on.Disposed,mt.fire(void 0);let T=new Error("Connection got disposed.");Object.keys(j).forEach(E=>{j[E].reject(T)}),j=Object.create(null),A=Object.create(null),P=new WD.LinkedMap,xt.func(e.dispose)&&e.dispose(),xt.func(t.dispose)&&t.dispose()},listen:()=>{pr(),si(),H=on.Listening,t.listen(Dn)},inspect:()=>{UD.default().console.log("inspect")}};return kr.onNotification(Rm.type,T=>{D===Et.Off||!x||x.log(T.message,D===Et.Verbose?T.verbose:void 0)}),kr.onNotification(hf.type,T=>{let E=v.get(T.token);E?E(T.value):Te.fire(T)}),kr}ne.createMessageConnection=wH});var Om=y(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.CancellationSenderStrategy=k.CancellationReceiverStrategy=k.ConnectionError=k.ConnectionErrors=k.LogTraceNotification=k.SetTraceNotification=k.TraceFormat=k.Trace=k.ProgressType=k.createMessageConnection=k.NullLogger=k.ConnectionOptions=k.ConnectionStrategy=k.WriteableStreamMessageWriter=k.AbstractMessageWriter=k.MessageWriter=k.ReadableStreamMessageReader=k.AbstractMessageReader=k.MessageReader=k.CancellationToken=k.CancellationTokenSource=k.Emitter=k.Event=k.Disposable=k.ParameterStructures=k.NotificationType9=k.NotificationType8=k.NotificationType7=k.NotificationType6=k.NotificationType5=k.NotificationType4=k.NotificationType3=k.NotificationType2=k.NotificationType1=k.NotificationType0=k.NotificationType=k.ErrorCodes=k.ResponseError=k.RequestType9=k.RequestType8=k.RequestType7=k.RequestType6=k.RequestType5=k.RequestType4=k.RequestType3=k.RequestType2=k.RequestType1=k.RequestType0=k.RequestType=k.RAL=void 0;k.CancellationStrategy=void 0;var ze=lm();Object.defineProperty(k,"RequestType",{enumerable:!0,get:function(){return ze.RequestType}});Object.defineProperty(k,"RequestType0",{enumerable:!0,get:function(){return ze.RequestType0}});Object.defineProperty(k,"RequestType1",{enumerable:!0,get:function(){return ze.RequestType1}});Object.defineProperty(k,"RequestType2",{enumerable:!0,get:function(){return ze.RequestType2}});Object.defineProperty(k,"RequestType3",{enumerable:!0,get:function(){return ze.RequestType3}});Object.defineProperty(k,"RequestType4",{enumerable:!0,get:function(){return ze.RequestType4}});Object.defineProperty(k,"RequestType5",{enumerable:!0,get:function(){return ze.RequestType5}});Object.defineProperty(k,"RequestType6",{enumerable:!0,get:function(){return ze.RequestType6}});Object.defineProperty(k,"RequestType7",{enumerable:!0,get:function(){return ze.RequestType7}});Object.defineProperty(k,"RequestType8",{enumerable:!0,get:function(){return ze.RequestType8}});Object.defineProperty(k,"RequestType9",{enumerable:!0,get:function(){return ze.RequestType9}});Object.defineProperty(k,"ResponseError",{enumerable:!0,get:function(){return ze.ResponseError}});Object.defineProperty(k,"ErrorCodes",{enumerable:!0,get:function(){return ze.ErrorCodes}});Object.defineProperty(k,"NotificationType",{enumerable:!0,get:function(){return ze.NotificationType}});Object.defineProperty(k,"NotificationType0",{enumerable:!0,get:function(){return ze.NotificationType0}});Object.defineProperty(k,"NotificationType1",{enumerable:!0,get:function(){return ze.NotificationType1}});Object.defineProperty(k,"NotificationType2",{enumerable:!0,get:function(){return ze.NotificationType2}});Object.defineProperty(k,"NotificationType3",{enumerable:!0,get:function(){return ze.NotificationType3}});Object.defineProperty(k,"NotificationType4",{enumerable:!0,get:function(){return ze.NotificationType4}});Object.defineProperty(k,"NotificationType5",{enumerable:!0,get:function(){return ze.NotificationType5}});Object.defineProperty(k,"NotificationType6",{enumerable:!0,get:function(){return ze.NotificationType6}});Object.defineProperty(k,"NotificationType7",{enumerable:!0,get:function(){return ze.NotificationType7}});Object.defineProperty(k,"NotificationType8",{enumerable:!0,get:function(){return ze.NotificationType8}});Object.defineProperty(k,"NotificationType9",{enumerable:!0,get:function(){return ze.NotificationType9}});Object.defineProperty(k,"ParameterStructures",{enumerable:!0,get:function(){return ze.ParameterStructures}});var CH=Lg();Object.defineProperty(k,"Disposable",{enumerable:!0,get:function(){return CH.Disposable}});var GD=Ko();Object.defineProperty(k,"Event",{enumerable:!0,get:function(){return GD.Event}});Object.defineProperty(k,"Emitter",{enumerable:!0,get:function(){return GD.Emitter}});var XD=gm();Object.defineProperty(k,"CancellationTokenSource",{enumerable:!0,get:function(){return XD.CancellationTokenSource}});Object.defineProperty(k,"CancellationToken",{enumerable:!0,get:function(){return XD.CancellationToken}});var xm=LD();Object.defineProperty(k,"MessageReader",{enumerable:!0,get:function(){return xm.MessageReader}});Object.defineProperty(k,"AbstractMessageReader",{enumerable:!0,get:function(){return xm.AbstractMessageReader}});Object.defineProperty(k,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return xm.ReadableStreamMessageReader}});var qm=HD();Object.defineProperty(k,"MessageWriter",{enumerable:!0,get:function(){return qm.MessageWriter}});Object.defineProperty(k,"AbstractMessageWriter",{enumerable:!0,get:function(){return qm.AbstractMessageWriter}});Object.defineProperty(k,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return qm.WriteableStreamMessageWriter}});var yr=VD();Object.defineProperty(k,"ConnectionStrategy",{enumerable:!0,get:function(){return yr.ConnectionStrategy}});Object.defineProperty(k,"ConnectionOptions",{enumerable:!0,get:function(){return yr.ConnectionOptions}});Object.defineProperty(k,"NullLogger",{enumerable:!0,get:function(){return yr.NullLogger}});Object.defineProperty(k,"createMessageConnection",{enumerable:!0,get:function(){return yr.createMessageConnection}});Object.defineProperty(k,"ProgressType",{enumerable:!0,get:function(){return yr.ProgressType}});Object.defineProperty(k,"Trace",{enumerable:!0,get:function(){return yr.Trace}});Object.defineProperty(k,"TraceFormat",{enumerable:!0,get:function(){return yr.TraceFormat}});Object.defineProperty(k,"SetTraceNotification",{enumerable:!0,get:function(){return yr.SetTraceNotification}});Object.defineProperty(k,"LogTraceNotification",{enumerable:!0,get:function(){return yr.LogTraceNotification}});Object.defineProperty(k,"ConnectionErrors",{enumerable:!0,get:function(){return yr.ConnectionErrors}});Object.defineProperty(k,"ConnectionError",{enumerable:!0,get:function(){return yr.ConnectionError}});Object.defineProperty(k,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return yr.CancellationReceiverStrategy}});Object.defineProperty(k,"CancellationSenderStrategy",{enumerable:!0,get:function(){return yr.CancellationSenderStrategy}});Object.defineProperty(k,"CancellationStrategy",{enumerable:!0,get:function(){return yr.CancellationStrategy}});var SH=Yn();k.RAL=SH.default});var Xo=y(be=>{"use strict";var bH=be&&be.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TH=be&&be.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bH(e,t,r)};Object.defineProperty(be,"__esModule",{value:!0});be.createMessageConnection=be.createServerSocketTransport=be.createClientSocketTransport=be.createServerPipeTransport=be.createClientPipeTransport=be.generateRandomPipeName=be.StreamMessageWriter=be.StreamMessageReader=be.SocketMessageWriter=be.SocketMessageReader=be.IPCMessageWriter=be.IPCMessageReader=void 0;var Go=qD();Go.default.install();var bn=Om(),YD=require("path"),RH=require("os"),DH=require("crypto"),vf=require("net");TH(Om(),be);var Am=class extends bn.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),bn.Disposable.create(()=>this.process.off("message",e))}};be.IPCMessageReader=Am;var Nm=class extends bn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};be.IPCMessageWriter=Nm;var Es=class extends bn.ReadableStreamMessageReader{constructor(e,r="utf-8"){super(Go.default().stream.asReadableStream(e),r)}};be.SocketMessageReader=Es;var ws=class extends bn.WriteableStreamMessageWriter{constructor(e,r){super(Go.default().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};be.SocketMessageWriter=ws;var gf=class extends bn.ReadableStreamMessageReader{constructor(e,r){super(Go.default().stream.asReadableStream(e),r)}};be.StreamMessageReader=gf;var mf=class extends bn.WriteableStreamMessageWriter{constructor(e,r){super(Go.default().stream.asWritableStream(e),r)}};be.StreamMessageWriter=mf;var QD=process.env.XDG_RUNTIME_DIR,IH=new Map([["linux",107],["darwin",103]]);function PH(){let t=DH.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;QD?e=YD.join(QD,`vscode-ipc-${t}.sock`):e=YD.join(RH.tmpdir(),`vscode-${t}.sock`);let r=IH.get(process.platform);return r!==void 0&&e.length>=r&&Go.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}be.generateRandomPipeName=PH;function xH(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=vf.createServer(a=>{o.close(),r([new Es(a,e),new ws(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}be.createClientPipeTransport=xH;function qH(t,e="utf-8"){let r=vf.createConnection(t);return[new Es(r,e),new ws(r,e)]}be.createServerPipeTransport=qH;function OH(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=vf.createServer(a=>{o.close(),r([new Es(a,e),new ws(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}be.createClientSocketTransport=OH;function AH(t,e="utf-8"){let r=vf.createConnection(t,"127.0.0.1");return[new Es(r,e),new ws(r,e)]}be.createServerSocketTransport=AH;function NH(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function kH(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function LH(t,e,r,n){r||(r=bn.NullLogger);let i=NH(t)?new gf(t):t,s=kH(e)?new mf(e):e;return bn.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),bn.createMessageConnection(i,s,r,n)}be.createMessageConnection=LH});var km=y((O5,JD)=>{"use strict";JD.exports=Xo()});var eI=y((ZD,yf)=>{(function(t){if(typeof yf=="object"&&typeof yf.exports=="object"){var e=t(require,ZD);e!==void 0&&(yf.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var r;(function(g){g.MIN_VALUE=-2147483648,g.MAX_VALUE=2147483647})(r=e.integer||(e.integer={}));var n;(function(g){g.MIN_VALUE=0,g.MAX_VALUE=2147483647})(n=e.uinteger||(e.uinteger={}));var i;(function(g){function w(l,f){return l===Number.MAX_VALUE&&(l=n.MAX_VALUE),f===Number.MAX_VALUE&&(f=n.MAX_VALUE),{line:l,character:f}}g.create=w;function R(l){var f=l;return E.objectLiteral(f)&&E.uinteger(f.line)&&E.uinteger(f.character)}g.is=R})(i=e.Position||(e.Position={}));var s;(function(g){function w(l,f,S,I){if(E.uinteger(l)&&E.uinteger(f)&&E.uinteger(S)&&E.uinteger(I))return{start:i.create(l,f),end:i.create(S,I)};if(i.is(l)&&i.is(f))return{start:l,end:f};throw new Error("Range#create called with invalid arguments["+l+", "+f+", "+S+", "+I+"]")}g.create=w;function R(l){var f=l;return E.objectLiteral(f)&&i.is(f.start)&&i.is(f.end)}g.is=R})(s=e.Range||(e.Range={}));var o;(function(g){function w(l,f){return{uri:l,range:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&s.is(f.range)&&(E.string(f.uri)||E.undefined(f.uri))}g.is=R})(o=e.Location||(e.Location={}));var a;(function(g){function w(l,f,S,I){return{targetUri:l,targetRange:f,targetSelectionRange:S,originSelectionRange:I}}g.create=w;function R(l){var f=l;return E.defined(f)&&s.is(f.targetRange)&&E.string(f.targetUri)&&(s.is(f.targetSelectionRange)||E.undefined(f.targetSelectionRange))&&(s.is(f.originSelectionRange)||E.undefined(f.originSelectionRange))}g.is=R})(a=e.LocationLink||(e.LocationLink={}));var c;(function(g){function w(l,f,S,I){return{red:l,green:f,blue:S,alpha:I}}g.create=w;function R(l){var f=l;return E.numberRange(f.red,0,1)&&E.numberRange(f.green,0,1)&&E.numberRange(f.blue,0,1)&&E.numberRange(f.alpha,0,1)}g.is=R})(c=e.Color||(e.Color={}));var u;(function(g){function w(l,f){return{range:l,color:f}}g.create=w;function R(l){var f=l;return s.is(f.range)&&c.is(f.color)}g.is=R})(u=e.ColorInformation||(e.ColorInformation={}));var d;(function(g){function w(l,f,S){return{label:l,textEdit:f,additionalTextEdits:S}}g.create=w;function R(l){var f=l;return E.string(f.label)&&(E.undefined(f.textEdit)||O.is(f))&&(E.undefined(f.additionalTextEdits)||E.typedArray(f.additionalTextEdits,O.is))}g.is=R})(d=e.ColorPresentation||(e.ColorPresentation={}));var p;(function(g){g.Comment="comment",g.Imports="imports",g.Region="region"})(p=e.FoldingRangeKind||(e.FoldingRangeKind={}));var m;(function(g){function w(l,f,S,I,$){var V={startLine:l,endLine:f};return E.defined(S)&&(V.startCharacter=S),E.defined(I)&&(V.endCharacter=I),E.defined($)&&(V.kind=$),V}g.create=w;function R(l){var f=l;return E.uinteger(f.startLine)&&E.uinteger(f.startLine)&&(E.undefined(f.startCharacter)||E.uinteger(f.startCharacter))&&(E.undefined(f.endCharacter)||E.uinteger(f.endCharacter))&&(E.undefined(f.kind)||E.string(f.kind))}g.is=R})(m=e.FoldingRange||(e.FoldingRange={}));var v;(function(g){function w(l,f){return{location:l,message:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&o.is(f.location)&&E.string(f.message)}g.is=R})(v=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var b;(function(g){g.Error=1,g.Warning=2,g.Information=3,g.Hint=4})(b=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var P;(function(g){g.Unnecessary=1,g.Deprecated=2})(P=e.DiagnosticTag||(e.DiagnosticTag={}));var j;(function(g){function w(R){var l=R;return l!=null&&E.string(l.href)}g.is=w})(j=e.CodeDescription||(e.CodeDescription={}));var A;(function(g){function w(l,f,S,I,$,V){var se={range:l,message:f};return E.defined(S)&&(se.severity=S),E.defined(I)&&(se.code=I),E.defined($)&&(se.source=$),E.defined(V)&&(se.relatedInformation=V),se}g.create=w;function R(l){var f,S=l;return E.defined(S)&&s.is(S.range)&&E.string(S.message)&&(E.number(S.severity)||E.undefined(S.severity))&&(E.integer(S.code)||E.string(S.code)||E.undefined(S.code))&&(E.undefined(S.codeDescription)||E.string((f=S.codeDescription)===null||f===void 0?void 0:f.href))&&(E.string(S.source)||E.undefined(S.source))&&(E.undefined(S.relatedInformation)||E.typedArray(S.relatedInformation,v.is))}g.is=R})(A=e.Diagnostic||(e.Diagnostic={}));var D;(function(g){function w(l,f){for(var S=[],I=2;I<arguments.length;I++)S[I-2]=arguments[I];var $={title:l,command:f};return E.defined(S)&&S.length>0&&($.arguments=S),$}g.create=w;function R(l){var f=l;return E.defined(f)&&E.string(f.title)&&E.string(f.command)}g.is=R})(D=e.Command||(e.Command={}));var O;(function(g){function w(S,I){return{range:S,newText:I}}g.replace=w;function R(S,I){return{range:{start:S,end:S},newText:I}}g.insert=R;function l(S){return{range:S,newText:""}}g.del=l;function f(S){var I=S;return E.objectLiteral(I)&&E.string(I.newText)&&s.is(I.range)}g.is=f})(O=e.TextEdit||(e.TextEdit={}));var x;(function(g){function w(l,f,S){var I={label:l};return f!==void 0&&(I.needsConfirmation=f),S!==void 0&&(I.description=S),I}g.create=w;function R(l){var f=l;return f!==void 0&&E.objectLiteral(f)&&E.string(f.label)&&(E.boolean(f.needsConfirmation)||f.needsConfirmation===void 0)&&(E.string(f.description)||f.description===void 0)}g.is=R})(x=e.ChangeAnnotation||(e.ChangeAnnotation={}));var H;(function(g){function w(R){var l=R;return typeof l=="string"}g.is=w})(H=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var le;(function(g){function w(S,I,$){return{range:S,newText:I,annotationId:$}}g.replace=w;function R(S,I,$){return{range:{start:S,end:S},newText:I,annotationId:$}}g.insert=R;function l(S,I){return{range:S,newText:"",annotationId:I}}g.del=l;function f(S){var I=S;return O.is(I)&&(x.is(I.annotationId)||H.is(I.annotationId))}g.is=f})(le=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ne;(function(g){function w(l,f){return{textDocument:l,edits:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&Oe.is(f.textDocument)&&Array.isArray(f.edits)}g.is=R})(Ne=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Ke;(function(g){function w(l,f,S){var I={kind:"create",uri:l};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(I.options=f),S!==void 0&&(I.annotationId=S),I}g.create=w;function R(l){var f=l;return f&&f.kind==="create"&&E.string(f.uri)&&(f.options===void 0||(f.options.overwrite===void 0||E.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||E.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}g.is=R})(Ke=e.CreateFile||(e.CreateFile={}));var Te;(function(g){function w(l,f,S,I){var $={kind:"rename",oldUri:l,newUri:f};return S!==void 0&&(S.overwrite!==void 0||S.ignoreIfExists!==void 0)&&($.options=S),I!==void 0&&($.annotationId=I),$}g.create=w;function R(l){var f=l;return f&&f.kind==="rename"&&E.string(f.oldUri)&&E.string(f.newUri)&&(f.options===void 0||(f.options.overwrite===void 0||E.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||E.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}g.is=R})(Te=e.RenameFile||(e.RenameFile={}));var mt;(function(g){function w(l,f,S){var I={kind:"delete",uri:l};return f!==void 0&&(f.recursive!==void 0||f.ignoreIfNotExists!==void 0)&&(I.options=f),S!==void 0&&(I.annotationId=S),I}g.create=w;function R(l){var f=l;return f&&f.kind==="delete"&&E.string(f.uri)&&(f.options===void 0||(f.options.recursive===void 0||E.boolean(f.options.recursive))&&(f.options.ignoreIfNotExists===void 0||E.boolean(f.options.ignoreIfNotExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}g.is=R})(mt=e.DeleteFile||(e.DeleteFile={}));var ot;(function(g){function w(R){var l=R;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(f){return E.string(f.kind)?Ke.is(f)||Te.is(f)||mt.is(f):Ne.is(f)}))}g.is=w})(ot=e.WorkspaceEdit||(e.WorkspaceEdit={}));var At=function(){function g(w,R){this.edits=w,this.changeAnnotations=R}return g.prototype.insert=function(w,R,l){var f,S;if(l===void 0?f=O.insert(w,R):H.is(l)?(S=l,f=le.insert(w,R,l)):(this.assertChangeAnnotations(this.changeAnnotations),S=this.changeAnnotations.manage(l),f=le.insert(w,R,S)),this.edits.push(f),S!==void 0)return S},g.prototype.replace=function(w,R,l){var f,S;if(l===void 0?f=O.replace(w,R):H.is(l)?(S=l,f=le.replace(w,R,l)):(this.assertChangeAnnotations(this.changeAnnotations),S=this.changeAnnotations.manage(l),f=le.replace(w,R,S)),this.edits.push(f),S!==void 0)return S},g.prototype.delete=function(w,R){var l,f;if(R===void 0?l=O.del(w):H.is(R)?(f=R,l=le.del(w,R)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(R),l=le.del(w,f)),this.edits.push(l),f!==void 0)return f},g.prototype.add=function(w){this.edits.push(w)},g.prototype.all=function(){return this.edits},g.prototype.clear=function(){this.edits.splice(0,this.edits.length)},g.prototype.assertChangeAnnotations=function(w){if(w===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},g}(),Nt=function(){function g(w){this._annotations=w===void 0?Object.create(null):w,this._counter=0,this._size=0}return g.prototype.all=function(){return this._annotations},Object.defineProperty(g.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),g.prototype.manage=function(w,R){var l;if(H.is(w)?l=w:(l=this.nextId(),R=w),this._annotations[l]!==void 0)throw new Error("Id "+l+" is already in use.");if(R===void 0)throw new Error("No annotation provided for id "+l);return this._annotations[l]=R,this._size++,l},g.prototype.nextId=function(){return this._counter++,this._counter.toString()},g}(),kt=function(){function g(w){var R=this;this._textEditChanges=Object.create(null),w!==void 0?(this._workspaceEdit=w,w.documentChanges?(this._changeAnnotations=new Nt(w.changeAnnotations),w.changeAnnotations=this._changeAnnotations.all(),w.documentChanges.forEach(function(l){if(Ne.is(l)){var f=new At(l.edits,R._changeAnnotations);R._textEditChanges[l.textDocument.uri]=f}})):w.changes&&Object.keys(w.changes).forEach(function(l){var f=new At(w.changes[l]);R._textEditChanges[l]=f})):this._workspaceEdit={}}return Object.defineProperty(g.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),g.prototype.getTextEditChange=function(w){if(Oe.is(w)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var R={uri:w.uri,version:w.version},l=this._textEditChanges[R.uri];if(!l){var f=[],S={textDocument:R,edits:f};this._workspaceEdit.documentChanges.push(S),l=new At(f,this._changeAnnotations),this._textEditChanges[R.uri]=l}return l}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[w];if(!l){var f=[];this._workspaceEdit.changes[w]=f,l=new At(f),this._textEditChanges[w]=l}return l}},g.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Nt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},g.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},g.prototype.createFile=function(w,R,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;x.is(R)||H.is(R)?f=R:l=R;var S,I;if(f===void 0?S=Ke.create(w,l):(I=H.is(f)?f:this._changeAnnotations.manage(f),S=Ke.create(w,l,I)),this._workspaceEdit.documentChanges.push(S),I!==void 0)return I},g.prototype.renameFile=function(w,R,l,f){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var S;x.is(l)||H.is(l)?S=l:f=l;var I,$;if(S===void 0?I=Te.create(w,R,f):($=H.is(S)?S:this._changeAnnotations.manage(S),I=Te.create(w,R,f,$)),this._workspaceEdit.documentChanges.push(I),$!==void 0)return $},g.prototype.deleteFile=function(w,R,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;x.is(R)||H.is(R)?f=R:l=R;var S,I;if(f===void 0?S=mt.create(w,l):(I=H.is(f)?f:this._changeAnnotations.manage(f),S=mt.create(w,l,I)),this._workspaceEdit.documentChanges.push(S),I!==void 0)return I},g}();e.WorkspaceChange=kt;var at;(function(g){function w(l){return{uri:l}}g.create=w;function R(l){var f=l;return E.defined(f)&&E.string(f.uri)}g.is=R})(at=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Lt;(function(g){function w(l,f){return{uri:l,version:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&E.string(f.uri)&&E.integer(f.version)}g.is=R})(Lt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Oe;(function(g){function w(l,f){return{uri:l,version:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&E.string(f.uri)&&(f.version===null||E.integer(f.version))}g.is=R})(Oe=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var wr;(function(g){function w(l,f,S,I){return{uri:l,languageId:f,version:S,text:I}}g.create=w;function R(l){var f=l;return E.defined(f)&&E.string(f.uri)&&E.string(f.languageId)&&E.integer(f.version)&&E.string(f.text)}g.is=R})(wr=e.TextDocumentItem||(e.TextDocumentItem={}));var He;(function(g){g.PlainText="plaintext",g.Markdown="markdown"})(He=e.MarkupKind||(e.MarkupKind={})),function(g){function w(R){var l=R;return l===g.PlainText||l===g.Markdown}g.is=w}(He=e.MarkupKind||(e.MarkupKind={}));var ct;(function(g){function w(R){var l=R;return E.objectLiteral(R)&&He.is(l.kind)&&E.string(l.value)}g.is=w})(ct=e.MarkupContent||(e.MarkupContent={}));var Rt;(function(g){g.Text=1,g.Method=2,g.Function=3,g.Constructor=4,g.Field=5,g.Variable=6,g.Class=7,g.Interface=8,g.Module=9,g.Property=10,g.Unit=11,g.Value=12,g.Enum=13,g.Keyword=14,g.Snippet=15,g.Color=16,g.File=17,g.Reference=18,g.Folder=19,g.EnumMember=20,g.Constant=21,g.Struct=22,g.Event=23,g.Operator=24,g.TypeParameter=25})(Rt=e.CompletionItemKind||(e.CompletionItemKind={}));var zt;(function(g){g.PlainText=1,g.Snippet=2})(zt=e.InsertTextFormat||(e.InsertTextFormat={}));var dn;(function(g){g.Deprecated=1})(dn=e.CompletionItemTag||(e.CompletionItemTag={}));var Cr;(function(g){function w(l,f,S){return{newText:l,insert:f,replace:S}}g.create=w;function R(l){var f=l;return f&&E.string(f.newText)&&s.is(f.insert)&&s.is(f.replace)}g.is=R})(Cr=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Dn;(function(g){g.asIs=1,g.adjustIndentation=2})(Dn=e.InsertTextMode||(e.InsertTextMode={}));var In;(function(g){function w(R){return{label:R}}g.create=w})(In=e.CompletionItem||(e.CompletionItem={}));var pn;(function(g){function w(R,l){return{items:R||[],isIncomplete:!!l}}g.create=w})(pn=e.CompletionList||(e.CompletionList={}));var hn;(function(g){function w(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}g.fromPlainText=w;function R(l){var f=l;return E.string(f)||E.objectLiteral(f)&&E.string(f.language)&&E.string(f.value)}g.is=R})(hn=e.MarkedString||(e.MarkedString={}));var Pn;(function(g){function w(R){var l=R;return!!l&&E.objectLiteral(l)&&(ct.is(l.contents)||hn.is(l.contents)||E.typedArray(l.contents,hn.is))&&(R.range===void 0||s.is(R.range))}g.is=w})(Pn=e.Hover||(e.Hover={}));var ni;(function(g){function w(R,l){return l?{label:R,documentation:l}:{label:R}}g.create=w})(ni=e.ParameterInformation||(e.ParameterInformation={}));var xi;(function(g){function w(R,l){for(var f=[],S=2;S<arguments.length;S++)f[S-2]=arguments[S];var I={label:R};return E.defined(l)&&(I.documentation=l),E.defined(f)?I.parameters=f:I.parameters=[],I}g.create=w})(xi=e.SignatureInformation||(e.SignatureInformation={}));var qr;(function(g){g.Text=1,g.Read=2,g.Write=3})(qr=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var ii;(function(g){function w(R,l){var f={range:R};return E.number(l)&&(f.kind=l),f}g.create=w})(ii=e.DocumentHighlight||(e.DocumentHighlight={}));var Or;(function(g){g.File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26})(Or=e.SymbolKind||(e.SymbolKind={}));var qi;(function(g){g.Deprecated=1})(qi=e.SymbolTag||(e.SymbolTag={}));var ut;(function(g){function w(R,l,f,S,I){var $={name:R,kind:l,location:{uri:S,range:f}};return I&&($.containerName=I),$}g.create=w})(ut=e.SymbolInformation||(e.SymbolInformation={}));var pr;(function(g){function w(l,f,S,I,$,V){var se={name:l,detail:f,kind:S,range:I,selectionRange:$};return V!==void 0&&(se.children=V),se}g.create=w;function R(l){var f=l;return f&&E.string(f.name)&&E.number(f.kind)&&s.is(f.range)&&s.is(f.selectionRange)&&(f.detail===void 0||E.string(f.detail))&&(f.deprecated===void 0||E.boolean(f.deprecated))&&(f.children===void 0||Array.isArray(f.children))&&(f.tags===void 0||Array.isArray(f.tags))}g.is=R})(pr=e.DocumentSymbol||(e.DocumentSymbol={}));var si;(function(g){g.Empty="",g.QuickFix="quickfix",g.Refactor="refactor",g.RefactorExtract="refactor.extract",g.RefactorInline="refactor.inline",g.RefactorRewrite="refactor.rewrite",g.Source="source",g.SourceOrganizeImports="source.organizeImports",g.SourceFixAll="source.fixAll"})(si=e.CodeActionKind||(e.CodeActionKind={}));var Oi;(function(g){function w(l,f){var S={diagnostics:l};return f!=null&&(S.only=f),S}g.create=w;function R(l){var f=l;return E.defined(f)&&E.typedArray(f.diagnostics,A.is)&&(f.only===void 0||E.typedArray(f.only,E.string))}g.is=R})(Oi=e.CodeActionContext||(e.CodeActionContext={}));var Ar;(function(g){function w(l,f,S){var I={title:l},$=!0;return typeof f=="string"?($=!1,I.kind=f):D.is(f)?I.command=f:I.edit=f,$&&S!==void 0&&(I.kind=S),I}g.create=w;function R(l){var f=l;return f&&E.string(f.title)&&(f.diagnostics===void 0||E.typedArray(f.diagnostics,A.is))&&(f.kind===void 0||E.string(f.kind))&&(f.edit!==void 0||f.command!==void 0)&&(f.command===void 0||D.is(f.command))&&(f.isPreferred===void 0||E.boolean(f.isPreferred))&&(f.edit===void 0||ot.is(f.edit))}g.is=R})(Ar=e.CodeAction||(e.CodeAction={}));var oi;(function(g){function w(l,f){var S={range:l};return E.defined(f)&&(S.data=f),S}g.create=w;function R(l){var f=l;return E.defined(f)&&s.is(f.range)&&(E.undefined(f.command)||D.is(f.command))}g.is=R})(oi=e.CodeLens||(e.CodeLens={}));var xn;(function(g){function w(l,f){return{tabSize:l,insertSpaces:f}}g.create=w;function R(l){var f=l;return E.defined(f)&&E.uinteger(f.tabSize)&&E.boolean(f.insertSpaces)}g.is=R})(xn=e.FormattingOptions||(e.FormattingOptions={}));var Nr;(function(g){function w(l,f,S){return{range:l,target:f,data:S}}g.create=w;function R(l){var f=l;return E.defined(f)&&s.is(f.range)&&(E.undefined(f.target)||E.string(f.target))}g.is=R})(Nr=e.DocumentLink||(e.DocumentLink={}));var qn;(function(g){function w(l,f){return{range:l,parent:f}}g.create=w;function R(l){var f=l;return f!==void 0&&s.is(f.range)&&(f.parent===void 0||g.is(f.parent))}g.is=R})(qn=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var kr;(function(g){function w(S,I,$,V){return new T(S,I,$,V)}g.create=w;function R(S){var I=S;return!!(E.defined(I)&&E.string(I.uri)&&(E.undefined(I.languageId)||E.string(I.languageId))&&E.uinteger(I.lineCount)&&E.func(I.getText)&&E.func(I.positionAt)&&E.func(I.offsetAt))}g.is=R;function l(S,I){for(var $=S.getText(),V=f(I,function(ai,Ai){var zc=ai.range.start.line-Ai.range.start.line;return zc===0?ai.range.start.character-Ai.range.start.character:zc}),se=$.length,De=V.length-1;De>=0;De--){var lt=V[De],ft=S.offsetAt(lt.range.start),fe=S.offsetAt(lt.range.end);if(fe<=se)$=$.substring(0,ft)+lt.newText+$.substring(fe,$.length);else throw new Error("Overlapping edit");se=ft}return $}g.applyEdits=l;function f(S,I){if(S.length<=1)return S;var $=S.length/2|0,V=S.slice(0,$),se=S.slice($);f(V,I),f(se,I);for(var De=0,lt=0,ft=0;De<V.length&&lt<se.length;){var fe=I(V[De],se[lt]);fe<=0?S[ft++]=V[De++]:S[ft++]=se[lt++]}for(;De<V.length;)S[ft++]=V[De++];for(;lt<se.length;)S[ft++]=se[lt++];return S}})(kr=e.TextDocument||(e.TextDocument={}));var T=function(){function g(w,R,l,f){this._uri=w,this._languageId=R,this._version=l,this._content=f,this._lineOffsets=void 0}return Object.defineProperty(g.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),g.prototype.getText=function(w){if(w){var R=this.offsetAt(w.start),l=this.offsetAt(w.end);return this._content.substring(R,l)}return this._content},g.prototype.update=function(w,R){this._content=w.text,this._version=R,this._lineOffsets=void 0},g.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var w=[],R=this._content,l=!0,f=0;f<R.length;f++){l&&(w.push(f),l=!1);var S=R.charAt(f);l=S==="\r"||S===`
`,S==="\r"&&f+1<R.length&&R.charAt(f+1)===`
`&&f++}l&&R.length>0&&w.push(R.length),this._lineOffsets=w}return this._lineOffsets},g.prototype.positionAt=function(w){w=Math.max(Math.min(w,this._content.length),0);var R=this.getLineOffsets(),l=0,f=R.length;if(f===0)return i.create(0,w);for(;l<f;){var S=Math.floor((l+f)/2);R[S]>w?f=S:l=S+1}var I=l-1;return i.create(I,w-R[I])},g.prototype.offsetAt=function(w){var R=this.getLineOffsets();if(w.line>=R.length)return this._content.length;if(w.line<0)return 0;var l=R[w.line],f=w.line+1<R.length?R[w.line+1]:this._content.length;return Math.max(Math.min(l+w.character,f),l)},Object.defineProperty(g.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),g}(),E;(function(g){var w=Object.prototype.toString;function R(fe){return typeof fe<"u"}g.defined=R;function l(fe){return typeof fe>"u"}g.undefined=l;function f(fe){return fe===!0||fe===!1}g.boolean=f;function S(fe){return w.call(fe)==="[object String]"}g.string=S;function I(fe){return w.call(fe)==="[object Number]"}g.number=I;function $(fe,ai,Ai){return w.call(fe)==="[object Number]"&&ai<=fe&&fe<=Ai}g.numberRange=$;function V(fe){return w.call(fe)==="[object Number]"&&-2147483648<=fe&&fe<=2147483647}g.integer=V;function se(fe){return w.call(fe)==="[object Number]"&&0<=fe&&fe<=2147483647}g.uinteger=se;function De(fe){return w.call(fe)==="[object Function]"}g.func=De;function lt(fe){return fe!==null&&typeof fe=="object"}g.objectLiteral=lt;function ft(fe,ai){return Array.isArray(fe)&&fe.every(ai)}g.typedArray=ft})(E||(E={}))})});var qt=y(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.ProtocolNotificationType=Gr.ProtocolNotificationType0=Gr.ProtocolRequestType=Gr.ProtocolRequestType0=Gr.RegistrationType=void 0;var Yo=Xo(),Lm=class{constructor(e){this.method=e}};Gr.RegistrationType=Lm;var Mm=class extends Yo.RequestType0{constructor(e){super(e)}};Gr.ProtocolRequestType0=Mm;var Fm=class extends Yo.RequestType{constructor(e){super(e,Yo.ParameterStructures.byName)}};Gr.ProtocolRequestType=Fm;var jm=class extends Yo.NotificationType0{constructor(e){super(e)}};Gr.ProtocolNotificationType0=jm;var $m=class extends Yo.NotificationType{constructor(e){super(e,Yo.ParameterStructures.byName)}};Gr.ProtocolNotificationType=$m});var nI=y(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.objectLiteral=wt.typedArray=wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function MH(t){return t===!0||t===!1}wt.boolean=MH;function tI(t){return typeof t=="string"||t instanceof String}wt.string=tI;function FH(t){return typeof t=="number"||t instanceof Number}wt.number=FH;function jH(t){return t instanceof Error}wt.error=jH;function $H(t){return typeof t=="function"}wt.func=$H;function rI(t){return Array.isArray(t)}wt.array=rI;function HH(t){return rI(t)&&t.every(e=>tI(e))}wt.stringArray=HH;function BH(t,e){return Array.isArray(t)&&t.every(e)}wt.typedArray=BH;function UH(t){return t!==null&&typeof t=="object"}wt.objectLiteral=UH});var iI=y(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.ImplementationRequest=void 0;var WH=qt(),zH;(function(t){t.method="textDocument/implementation",t.type=new WH.ProtocolRequestType(t.method)})(zH=Ic.ImplementationRequest||(Ic.ImplementationRequest={}))});var sI=y(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.TypeDefinitionRequest=void 0;var KH=qt(),VH;(function(t){t.method="textDocument/typeDefinition",t.type=new KH.ProtocolRequestType(t.method)})(VH=Pc.TypeDefinitionRequest||(Pc.TypeDefinitionRequest={}))});var aI=y(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.DidChangeWorkspaceFoldersNotification=Ci.WorkspaceFoldersRequest=void 0;var oI=qt(),GH;(function(t){t.type=new oI.ProtocolRequestType0("workspace/workspaceFolders")})(GH=Ci.WorkspaceFoldersRequest||(Ci.WorkspaceFoldersRequest={}));var XH;(function(t){t.type=new oI.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(XH=Ci.DidChangeWorkspaceFoldersNotification||(Ci.DidChangeWorkspaceFoldersNotification={}))});var cI=y(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.ConfigurationRequest=void 0;var YH=qt(),QH;(function(t){t.type=new YH.ProtocolRequestType("workspace/configuration")})(QH=xc.ConfigurationRequest||(xc.ConfigurationRequest={}))});var lI=y(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.ColorPresentationRequest=Si.DocumentColorRequest=void 0;var uI=qt(),JH;(function(t){t.method="textDocument/documentColor",t.type=new uI.ProtocolRequestType(t.method)})(JH=Si.DocumentColorRequest||(Si.DocumentColorRequest={}));var ZH;(function(t){t.type=new uI.ProtocolRequestType("textDocument/colorPresentation")})(ZH=Si.ColorPresentationRequest||(Si.ColorPresentationRequest={}))});var fI=y(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.FoldingRangeRequest=bi.FoldingRangeKind=void 0;var eB=qt(),tB;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(tB=bi.FoldingRangeKind||(bi.FoldingRangeKind={}));var rB;(function(t){t.method="textDocument/foldingRange",t.type=new eB.ProtocolRequestType(t.method)})(rB=bi.FoldingRangeRequest||(bi.FoldingRangeRequest={}))});var dI=y(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.DeclarationRequest=void 0;var nB=qt(),iB;(function(t){t.method="textDocument/declaration",t.type=new nB.ProtocolRequestType(t.method)})(iB=qc.DeclarationRequest||(qc.DeclarationRequest={}))});var pI=y(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.SelectionRangeRequest=void 0;var sB=qt(),oB;(function(t){t.method="textDocument/selectionRange",t.type=new sB.ProtocolRequestType(t.method)})(oB=Oc.SelectionRangeRequest||(Oc.SelectionRangeRequest={}))});var gI=y(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.WorkDoneProgressCancelNotification=an.WorkDoneProgressCreateRequest=an.WorkDoneProgress=void 0;var aB=Xo(),hI=qt(),cB;(function(t){t.type=new aB.ProgressType;function e(r){return r===t.type}t.is=e})(cB=an.WorkDoneProgress||(an.WorkDoneProgress={}));var uB;(function(t){t.type=new hI.ProtocolRequestType("window/workDoneProgress/create")})(uB=an.WorkDoneProgressCreateRequest||(an.WorkDoneProgressCreateRequest={}));var lB;(function(t){t.type=new hI.ProtocolNotificationType("window/workDoneProgress/cancel")})(lB=an.WorkDoneProgressCancelNotification||(an.WorkDoneProgressCancelNotification={}))});var mI=y(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.CallHierarchyOutgoingCallsRequest=cn.CallHierarchyIncomingCallsRequest=cn.CallHierarchyPrepareRequest=void 0;var Hm=qt(),fB;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Hm.ProtocolRequestType(t.method)})(fB=cn.CallHierarchyPrepareRequest||(cn.CallHierarchyPrepareRequest={}));var dB;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Hm.ProtocolRequestType(t.method)})(dB=cn.CallHierarchyIncomingCallsRequest||(cn.CallHierarchyIncomingCallsRequest={}));var pB;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Hm.ProtocolRequestType(t.method)})(pB=cn.CallHierarchyOutgoingCallsRequest||(cn.CallHierarchyOutgoingCallsRequest={}))});var vI=y(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.SemanticTokensRefreshRequest=qe.SemanticTokensRangeRequest=qe.SemanticTokensDeltaRequest=qe.SemanticTokensRequest=qe.SemanticTokensRegistrationType=qe.TokenFormat=qe.SemanticTokens=qe.SemanticTokenModifiers=qe.SemanticTokenTypes=void 0;var Ac=qt(),hB;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(hB=qe.SemanticTokenTypes||(qe.SemanticTokenTypes={}));var gB;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(gB=qe.SemanticTokenModifiers||(qe.SemanticTokenModifiers={}));var mB;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(mB=qe.SemanticTokens||(qe.SemanticTokens={}));var vB;(function(t){t.Relative="relative"})(vB=qe.TokenFormat||(qe.TokenFormat={}));var yB;(function(t){t.method="textDocument/semanticTokens",t.type=new Ac.RegistrationType(t.method)})(yB=qe.SemanticTokensRegistrationType||(qe.SemanticTokensRegistrationType={}));var _B;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Ac.ProtocolRequestType(t.method)})(_B=qe.SemanticTokensRequest||(qe.SemanticTokensRequest={}));var EB;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Ac.ProtocolRequestType(t.method)})(EB=qe.SemanticTokensDeltaRequest||(qe.SemanticTokensDeltaRequest={}));var wB;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Ac.ProtocolRequestType(t.method)})(wB=qe.SemanticTokensRangeRequest||(qe.SemanticTokensRangeRequest={}));var CB;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Ac.ProtocolRequestType0(t.method)})(CB=qe.SemanticTokensRefreshRequest||(qe.SemanticTokensRefreshRequest={}))});var yI=y(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.ShowDocumentRequest=void 0;var SB=qt(),bB;(function(t){t.method="window/showDocument",t.type=new SB.ProtocolRequestType(t.method)})(bB=Nc.ShowDocumentRequest||(Nc.ShowDocumentRequest={}))});var _I=y(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.LinkedEditingRangeRequest=void 0;var TB=qt(),RB;(function(t){t.method="textDocument/linkedEditingRange",t.type=new TB.ProtocolRequestType(t.method)})(RB=kc.LinkedEditingRangeRequest||(kc.LinkedEditingRangeRequest={}))});var EI=y(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.WillDeleteFilesRequest=tt.DidDeleteFilesNotification=tt.DidRenameFilesNotification=tt.WillRenameFilesRequest=tt.DidCreateFilesNotification=tt.WillCreateFilesRequest=tt.FileOperationPatternKind=void 0;var Qo=qt(),DB;(function(t){t.file="file",t.folder="folder"})(DB=tt.FileOperationPatternKind||(tt.FileOperationPatternKind={}));var IB;(function(t){t.method="workspace/willCreateFiles",t.type=new Qo.ProtocolRequestType(t.method)})(IB=tt.WillCreateFilesRequest||(tt.WillCreateFilesRequest={}));var PB;(function(t){t.method="workspace/didCreateFiles",t.type=new Qo.ProtocolNotificationType(t.method)})(PB=tt.DidCreateFilesNotification||(tt.DidCreateFilesNotification={}));var xB;(function(t){t.method="workspace/willRenameFiles",t.type=new Qo.ProtocolRequestType(t.method)})(xB=tt.WillRenameFilesRequest||(tt.WillRenameFilesRequest={}));var qB;(function(t){t.method="workspace/didRenameFiles",t.type=new Qo.ProtocolNotificationType(t.method)})(qB=tt.DidRenameFilesNotification||(tt.DidRenameFilesNotification={}));var OB;(function(t){t.method="workspace/didDeleteFiles",t.type=new Qo.ProtocolNotificationType(t.method)})(OB=tt.DidDeleteFilesNotification||(tt.DidDeleteFilesNotification={}));var AB;(function(t){t.method="workspace/willDeleteFiles",t.type=new Qo.ProtocolRequestType(t.method)})(AB=tt.WillDeleteFilesRequest||(tt.WillDeleteFilesRequest={}))});var wI=y(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.MonikerRequest=un.MonikerKind=un.UniquenessLevel=void 0;var NB=qt(),kB;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(kB=un.UniquenessLevel||(un.UniquenessLevel={}));var LB;(function(t){t.import="import",t.export="export",t.local="local"})(LB=un.MonikerKind||(un.MonikerKind={}));var MB;(function(t){t.method="textDocument/moniker",t.type=new NB.ProtocolRequestType(t.method)})(MB=un.MonikerRequest||(un.MonikerRequest={}))});var RI=y(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.DocumentLinkRequest=_.CodeLensRefreshRequest=_.CodeLensResolveRequest=_.CodeLensRequest=_.WorkspaceSymbolRequest=_.CodeActionResolveRequest=_.CodeActionRequest=_.DocumentSymbolRequest=_.DocumentHighlightRequest=_.ReferencesRequest=_.DefinitionRequest=_.SignatureHelpRequest=_.SignatureHelpTriggerKind=_.HoverRequest=_.CompletionResolveRequest=_.CompletionRequest=_.CompletionTriggerKind=_.PublishDiagnosticsNotification=_.WatchKind=_.FileChangeType=_.DidChangeWatchedFilesNotification=_.WillSaveTextDocumentWaitUntilRequest=_.WillSaveTextDocumentNotification=_.TextDocumentSaveReason=_.DidSaveTextDocumentNotification=_.DidCloseTextDocumentNotification=_.DidChangeTextDocumentNotification=_.TextDocumentContentChangeEvent=_.DidOpenTextDocumentNotification=_.TextDocumentSyncKind=_.TelemetryEventNotification=_.LogMessageNotification=_.ShowMessageRequest=_.ShowMessageNotification=_.MessageType=_.DidChangeConfigurationNotification=_.ExitNotification=_.ShutdownRequest=_.InitializedNotification=_.InitializeError=_.InitializeRequest=_.WorkDoneProgressOptions=_.TextDocumentRegistrationOptions=_.StaticRegistrationOptions=_.FailureHandlingKind=_.ResourceOperationKind=_.UnregistrationRequest=_.RegistrationRequest=_.DocumentSelector=_.DocumentFilter=void 0;_.MonikerRequest=_.MonikerKind=_.UniquenessLevel=_.WillDeleteFilesRequest=_.DidDeleteFilesNotification=_.WillRenameFilesRequest=_.DidRenameFilesNotification=_.WillCreateFilesRequest=_.DidCreateFilesNotification=_.FileOperationPatternKind=_.LinkedEditingRangeRequest=_.ShowDocumentRequest=_.SemanticTokensRegistrationType=_.SemanticTokensRefreshRequest=_.SemanticTokensRangeRequest=_.SemanticTokensDeltaRequest=_.SemanticTokensRequest=_.TokenFormat=_.SemanticTokens=_.SemanticTokenModifiers=_.SemanticTokenTypes=_.CallHierarchyPrepareRequest=_.CallHierarchyOutgoingCallsRequest=_.CallHierarchyIncomingCallsRequest=_.WorkDoneProgressCancelNotification=_.WorkDoneProgressCreateRequest=_.WorkDoneProgress=_.SelectionRangeRequest=_.DeclarationRequest=_.FoldingRangeRequest=_.ColorPresentationRequest=_.DocumentColorRequest=_.ConfigurationRequest=_.DidChangeWorkspaceFoldersNotification=_.WorkspaceFoldersRequest=_.TypeDefinitionRequest=_.ImplementationRequest=_.ApplyWorkspaceEditRequest=_.ExecuteCommandRequest=_.PrepareRenameRequest=_.RenameRequest=_.PrepareSupportDefaultBehavior=_.DocumentOnTypeFormattingRequest=_.DocumentRangeFormattingRequest=_.DocumentFormattingRequest=_.DocumentLinkResolveRequest=void 0;var Ti=nI(),oe=qt(),FB=iI();Object.defineProperty(_,"ImplementationRequest",{enumerable:!0,get:function(){return FB.ImplementationRequest}});var jB=sI();Object.defineProperty(_,"TypeDefinitionRequest",{enumerable:!0,get:function(){return jB.TypeDefinitionRequest}});var CI=aI();Object.defineProperty(_,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return CI.WorkspaceFoldersRequest}});Object.defineProperty(_,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return CI.DidChangeWorkspaceFoldersNotification}});var $B=cI();Object.defineProperty(_,"ConfigurationRequest",{enumerable:!0,get:function(){return $B.ConfigurationRequest}});var SI=lI();Object.defineProperty(_,"DocumentColorRequest",{enumerable:!0,get:function(){return SI.DocumentColorRequest}});Object.defineProperty(_,"ColorPresentationRequest",{enumerable:!0,get:function(){return SI.ColorPresentationRequest}});var HB=fI();Object.defineProperty(_,"FoldingRangeRequest",{enumerable:!0,get:function(){return HB.FoldingRangeRequest}});var BB=dI();Object.defineProperty(_,"DeclarationRequest",{enumerable:!0,get:function(){return BB.DeclarationRequest}});var UB=pI();Object.defineProperty(_,"SelectionRangeRequest",{enumerable:!0,get:function(){return UB.SelectionRangeRequest}});var Bm=gI();Object.defineProperty(_,"WorkDoneProgress",{enumerable:!0,get:function(){return Bm.WorkDoneProgress}});Object.defineProperty(_,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Bm.WorkDoneProgressCreateRequest}});Object.defineProperty(_,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Bm.WorkDoneProgressCancelNotification}});var Um=mI();Object.defineProperty(_,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Um.CallHierarchyIncomingCallsRequest}});Object.defineProperty(_,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Um.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(_,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Um.CallHierarchyPrepareRequest}});var ei=vI();Object.defineProperty(_,"SemanticTokenTypes",{enumerable:!0,get:function(){return ei.SemanticTokenTypes}});Object.defineProperty(_,"SemanticTokenModifiers",{enumerable:!0,get:function(){return ei.SemanticTokenModifiers}});Object.defineProperty(_,"SemanticTokens",{enumerable:!0,get:function(){return ei.SemanticTokens}});Object.defineProperty(_,"TokenFormat",{enumerable:!0,get:function(){return ei.TokenFormat}});Object.defineProperty(_,"SemanticTokensRequest",{enumerable:!0,get:function(){return ei.SemanticTokensRequest}});Object.defineProperty(_,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return ei.SemanticTokensDeltaRequest}});Object.defineProperty(_,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return ei.SemanticTokensRangeRequest}});Object.defineProperty(_,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return ei.SemanticTokensRefreshRequest}});Object.defineProperty(_,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return ei.SemanticTokensRegistrationType}});var WB=yI();Object.defineProperty(_,"ShowDocumentRequest",{enumerable:!0,get:function(){return WB.ShowDocumentRequest}});var zB=_I();Object.defineProperty(_,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return zB.LinkedEditingRangeRequest}});var Cs=EI();Object.defineProperty(_,"FileOperationPatternKind",{enumerable:!0,get:function(){return Cs.FileOperationPatternKind}});Object.defineProperty(_,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Cs.DidCreateFilesNotification}});Object.defineProperty(_,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Cs.WillCreateFilesRequest}});Object.defineProperty(_,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Cs.DidRenameFilesNotification}});Object.defineProperty(_,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Cs.WillRenameFilesRequest}});Object.defineProperty(_,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Cs.DidDeleteFilesNotification}});Object.defineProperty(_,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Cs.WillDeleteFilesRequest}});var Wm=wI();Object.defineProperty(_,"UniquenessLevel",{enumerable:!0,get:function(){return Wm.UniquenessLevel}});Object.defineProperty(_,"MonikerKind",{enumerable:!0,get:function(){return Wm.MonikerKind}});Object.defineProperty(_,"MonikerRequest",{enumerable:!0,get:function(){return Wm.MonikerRequest}});var bI;(function(t){function e(r){let n=r;return Ti.string(n.language)||Ti.string(n.scheme)||Ti.string(n.pattern)}t.is=e})(bI=_.DocumentFilter||(_.DocumentFilter={}));var TI;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Ti.string(n)&&!bI.is(n))return!1;return!0}t.is=e})(TI=_.DocumentSelector||(_.DocumentSelector={}));var KB;(function(t){t.type=new oe.ProtocolRequestType("client/registerCapability")})(KB=_.RegistrationRequest||(_.RegistrationRequest={}));var VB;(function(t){t.type=new oe.ProtocolRequestType("client/unregisterCapability")})(VB=_.UnregistrationRequest||(_.UnregistrationRequest={}));var GB;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(GB=_.ResourceOperationKind||(_.ResourceOperationKind={}));var XB;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(XB=_.FailureHandlingKind||(_.FailureHandlingKind={}));var YB;(function(t){function e(r){let n=r;return n&&Ti.string(n.id)&&n.id.length>0}t.hasId=e})(YB=_.StaticRegistrationOptions||(_.StaticRegistrationOptions={}));var QB;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||TI.is(n.documentSelector))}t.is=e})(QB=_.TextDocumentRegistrationOptions||(_.TextDocumentRegistrationOptions={}));var JB;(function(t){function e(n){let i=n;return Ti.objectLiteral(i)&&(i.workDoneProgress===void 0||Ti.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&Ti.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(JB=_.WorkDoneProgressOptions||(_.WorkDoneProgressOptions={}));var ZB;(function(t){t.type=new oe.ProtocolRequestType("initialize")})(ZB=_.InitializeRequest||(_.InitializeRequest={}));var eU;(function(t){t.unknownProtocolVersion=1})(eU=_.InitializeError||(_.InitializeError={}));var tU;(function(t){t.type=new oe.ProtocolNotificationType("initialized")})(tU=_.InitializedNotification||(_.InitializedNotification={}));var rU;(function(t){t.type=new oe.ProtocolRequestType0("shutdown")})(rU=_.ShutdownRequest||(_.ShutdownRequest={}));var nU;(function(t){t.type=new oe.ProtocolNotificationType0("exit")})(nU=_.ExitNotification||(_.ExitNotification={}));var iU;(function(t){t.type=new oe.ProtocolNotificationType("workspace/didChangeConfiguration")})(iU=_.DidChangeConfigurationNotification||(_.DidChangeConfigurationNotification={}));var sU;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(sU=_.MessageType||(_.MessageType={}));var oU;(function(t){t.type=new oe.ProtocolNotificationType("window/showMessage")})(oU=_.ShowMessageNotification||(_.ShowMessageNotification={}));var aU;(function(t){t.type=new oe.ProtocolRequestType("window/showMessageRequest")})(aU=_.ShowMessageRequest||(_.ShowMessageRequest={}));var cU;(function(t){t.type=new oe.ProtocolNotificationType("window/logMessage")})(cU=_.LogMessageNotification||(_.LogMessageNotification={}));var uU;(function(t){t.type=new oe.ProtocolNotificationType("telemetry/event")})(uU=_.TelemetryEventNotification||(_.TelemetryEventNotification={}));var lU;(function(t){t.None=0,t.Full=1,t.Incremental=2})(lU=_.TextDocumentSyncKind||(_.TextDocumentSyncKind={}));var fU;(function(t){t.method="textDocument/didOpen",t.type=new oe.ProtocolNotificationType(t.method)})(fU=_.DidOpenTextDocumentNotification||(_.DidOpenTextDocumentNotification={}));var dU;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(dU=_.TextDocumentContentChangeEvent||(_.TextDocumentContentChangeEvent={}));var pU;(function(t){t.method="textDocument/didChange",t.type=new oe.ProtocolNotificationType(t.method)})(pU=_.DidChangeTextDocumentNotification||(_.DidChangeTextDocumentNotification={}));var hU;(function(t){t.method="textDocument/didClose",t.type=new oe.ProtocolNotificationType(t.method)})(hU=_.DidCloseTextDocumentNotification||(_.DidCloseTextDocumentNotification={}));var gU;(function(t){t.method="textDocument/didSave",t.type=new oe.ProtocolNotificationType(t.method)})(gU=_.DidSaveTextDocumentNotification||(_.DidSaveTextDocumentNotification={}));var mU;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(mU=_.TextDocumentSaveReason||(_.TextDocumentSaveReason={}));var vU;(function(t){t.method="textDocument/willSave",t.type=new oe.ProtocolNotificationType(t.method)})(vU=_.WillSaveTextDocumentNotification||(_.WillSaveTextDocumentNotification={}));var yU;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new oe.ProtocolRequestType(t.method)})(yU=_.WillSaveTextDocumentWaitUntilRequest||(_.WillSaveTextDocumentWaitUntilRequest={}));var _U;(function(t){t.type=new oe.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(_U=_.DidChangeWatchedFilesNotification||(_.DidChangeWatchedFilesNotification={}));var EU;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(EU=_.FileChangeType||(_.FileChangeType={}));var wU;(function(t){t.Create=1,t.Change=2,t.Delete=4})(wU=_.WatchKind||(_.WatchKind={}));var CU;(function(t){t.type=new oe.ProtocolNotificationType("textDocument/publishDiagnostics")})(CU=_.PublishDiagnosticsNotification||(_.PublishDiagnosticsNotification={}));var SU;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(SU=_.CompletionTriggerKind||(_.CompletionTriggerKind={}));var bU;(function(t){t.method="textDocument/completion",t.type=new oe.ProtocolRequestType(t.method)})(bU=_.CompletionRequest||(_.CompletionRequest={}));var TU;(function(t){t.method="completionItem/resolve",t.type=new oe.ProtocolRequestType(t.method)})(TU=_.CompletionResolveRequest||(_.CompletionResolveRequest={}));var RU;(function(t){t.method="textDocument/hover",t.type=new oe.ProtocolRequestType(t.method)})(RU=_.HoverRequest||(_.HoverRequest={}));var DU;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(DU=_.SignatureHelpTriggerKind||(_.SignatureHelpTriggerKind={}));var IU;(function(t){t.method="textDocument/signatureHelp",t.type=new oe.ProtocolRequestType(t.method)})(IU=_.SignatureHelpRequest||(_.SignatureHelpRequest={}));var PU;(function(t){t.method="textDocument/definition",t.type=new oe.ProtocolRequestType(t.method)})(PU=_.DefinitionRequest||(_.DefinitionRequest={}));var xU;(function(t){t.method="textDocument/references",t.type=new oe.ProtocolRequestType(t.method)})(xU=_.ReferencesRequest||(_.ReferencesRequest={}));var qU;(function(t){t.method="textDocument/documentHighlight",t.type=new oe.ProtocolRequestType(t.method)})(qU=_.DocumentHighlightRequest||(_.DocumentHighlightRequest={}));var OU;(function(t){t.method="textDocument/documentSymbol",t.type=new oe.ProtocolRequestType(t.method)})(OU=_.DocumentSymbolRequest||(_.DocumentSymbolRequest={}));var AU;(function(t){t.method="textDocument/codeAction",t.type=new oe.ProtocolRequestType(t.method)})(AU=_.CodeActionRequest||(_.CodeActionRequest={}));var NU;(function(t){t.method="codeAction/resolve",t.type=new oe.ProtocolRequestType(t.method)})(NU=_.CodeActionResolveRequest||(_.CodeActionResolveRequest={}));var kU;(function(t){t.method="workspace/symbol",t.type=new oe.ProtocolRequestType(t.method)})(kU=_.WorkspaceSymbolRequest||(_.WorkspaceSymbolRequest={}));var LU;(function(t){t.method="textDocument/codeLens",t.type=new oe.ProtocolRequestType(t.method)})(LU=_.CodeLensRequest||(_.CodeLensRequest={}));var MU;(function(t){t.method="codeLens/resolve",t.type=new oe.ProtocolRequestType(t.method)})(MU=_.CodeLensResolveRequest||(_.CodeLensResolveRequest={}));var FU;(function(t){t.method="workspace/codeLens/refresh",t.type=new oe.ProtocolRequestType0(t.method)})(FU=_.CodeLensRefreshRequest||(_.CodeLensRefreshRequest={}));var jU;(function(t){t.method="textDocument/documentLink",t.type=new oe.ProtocolRequestType(t.method)})(jU=_.DocumentLinkRequest||(_.DocumentLinkRequest={}));var $U;(function(t){t.method="documentLink/resolve",t.type=new oe.ProtocolRequestType(t.method)})($U=_.DocumentLinkResolveRequest||(_.DocumentLinkResolveRequest={}));var HU;(function(t){t.method="textDocument/formatting",t.type=new oe.ProtocolRequestType(t.method)})(HU=_.DocumentFormattingRequest||(_.DocumentFormattingRequest={}));var BU;(function(t){t.method="textDocument/rangeFormatting",t.type=new oe.ProtocolRequestType(t.method)})(BU=_.DocumentRangeFormattingRequest||(_.DocumentRangeFormattingRequest={}));var UU;(function(t){t.method="textDocument/onTypeFormatting",t.type=new oe.ProtocolRequestType(t.method)})(UU=_.DocumentOnTypeFormattingRequest||(_.DocumentOnTypeFormattingRequest={}));var WU;(function(t){t.Identifier=1})(WU=_.PrepareSupportDefaultBehavior||(_.PrepareSupportDefaultBehavior={}));var zU;(function(t){t.method="textDocument/rename",t.type=new oe.ProtocolRequestType(t.method)})(zU=_.RenameRequest||(_.RenameRequest={}));var KU;(function(t){t.method="textDocument/prepareRename",t.type=new oe.ProtocolRequestType(t.method)})(KU=_.PrepareRenameRequest||(_.PrepareRenameRequest={}));var VU;(function(t){t.type=new oe.ProtocolRequestType("workspace/executeCommand")})(VU=_.ExecuteCommandRequest||(_.ExecuteCommandRequest={}));var GU;(function(t){t.type=new oe.ProtocolRequestType("workspace/applyEdit")})(GU=_.ApplyWorkspaceEditRequest||(_.ApplyWorkspaceEditRequest={}))});var II=y(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.createProtocolConnection=void 0;var DI=Xo();function XU(t,e,r,n){return DI.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),DI.createMessageConnection(t,e,r,n)}_f.createProtocolConnection=XU});var PI=y(lr=>{"use strict";var YU=lr&&lr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ef=lr&&lr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&YU(e,t,r)};Object.defineProperty(lr,"__esModule",{value:!0});lr.LSPErrorCodes=lr.createProtocolConnection=void 0;Ef(Xo(),lr);Ef(eI(),lr);Ef(qt(),lr);Ef(RI(),lr);var QU=II();Object.defineProperty(lr,"createProtocolConnection",{enumerable:!0,get:function(){return QU.createProtocolConnection}});var JU;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(JU=lr.LSPErrorCodes||(lr.LSPErrorCodes={}))});var rt=y(Tn=>{"use strict";var ZU=Tn&&Tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xI=Tn&&Tn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ZU(e,t,r)};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.createProtocolConnection=void 0;var e3=km();xI(km(),Tn);xI(PI(),Tn);function t3(t,e,r,n){return e3.createMessageConnection(t,e,r,n)}Tn.createProtocolConnection=t3});var Vm=y(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.toJSONObject=Zo.ConfigurationFeature=void 0;var zm=require("vscode"),r3=rt(),Km=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(r3.ConfigurationRequest.type,(r,n)=>{let i=o=>{let a=[];for(let c of o.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=Jo(zm.workspace.getConfiguration(void 0,e).get(r));else{let s=zm.workspace.getConfiguration(r.substr(0,i),e);s&&(n=Jo(s.get(r.substr(i+1))))}}else{let i=zm.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=Jo(i.get(s)))}return n===void 0&&(n=null),n}dispose(){}};Zo.ConfigurationFeature=Km;function Jo(t){if(t){if(Array.isArray(t))return t.map(Jo);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Jo(t[r]));return e}}return t}Zo.toJSONObject=Jo});var Ym=y(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});var n3=require("vscode"),Gm=class extends n3.CompletionItem{constructor(e){super(e)}};Xm.default=Gm});var Zm=y(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});var i3=require("vscode"),Qm=class extends i3.CodeLens{constructor(e){super(e)}};Jm.default=Qm});var rv=y(tv=>{"use strict";Object.defineProperty(tv,"__esModule",{value:!0});var s3=require("vscode"),ev=class extends s3.DocumentLink{constructor(e,r){super(e,r)}};tv.default=ev});var sv=y(iv=>{"use strict";Object.defineProperty(iv,"__esModule",{value:!0});var o3=require("vscode"),nv=class extends o3.CodeAction{constructor(e,r){super(e),this.data=r}};iv.default=nv});var cv=y(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.ProtocolDiagnostic=Ss.DiagnosticCode=void 0;var a3=require("vscode"),ov=Ei(),c3;(function(t){function e(r){let n=r;return n!=null&&(ov.number(n.value)||ov.string(n.value))&&ov.string(n.target)}t.is=e})(c3=Ss.DiagnosticCode||(Ss.DiagnosticCode={}));var av=class extends a3.Diagnostic{constructor(e,r,n,i){super(e,r,n),this.data=i,this.hasDiagnosticCode=!1}};Ss.ProtocolDiagnostic=av});var fv=y(lv=>{"use strict";Object.defineProperty(lv,"__esModule",{value:!0});var u3=require("vscode"),uv=class extends u3.CallHierarchyItem{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,o),a!==void 0&&(this.data=a)}};lv.default=uv});var OI=y(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.createConverter=void 0;var Ot=require("vscode"),Re=rt(),Lc=Ei(),l3=Ym(),f3=Zm(),d3=rv(),p3=sv(),qI=cv(),h3=fv(),g3=rt(),dv;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(dv||(dv={}));function m3(t){let r=t||(l=>l.toString());function n(l){return r(l)}function i(l){return{uri:r(l.uri)}}function s(l){return{uri:r(l.uri),version:l.version}}function o(l){return{textDocument:{uri:r(l.uri),languageId:l.languageId,version:l.version,text:l.getText()}}}function a(l){let f=l;return!!f.document&&!!f.contentChanges}function c(l){let f=l;return!!f.uri&&!!f.version}function u(l){if(c(l))return{textDocument:{uri:r(l.uri),version:l.version},contentChanges:[{text:l.getText()}]};if(a(l)){let f=l.document;return{textDocument:{uri:r(f.uri),version:f.version},contentChanges:l.contentChanges.map(I=>{let $=I.range;return{range:{start:{line:$.start.line,character:$.start.character},end:{line:$.end.line,character:$.end.character}},rangeLength:I.rangeLength,text:I.text}})}}else throw Error("Unsupported text document change parameter")}function d(l){return{textDocument:i(l)}}function p(l,f=!1){let S={textDocument:i(l)};return f&&(S.text=l.getText()),S}function m(l){switch(l){case Ot.TextDocumentSaveReason.Manual:return Re.TextDocumentSaveReason.Manual;case Ot.TextDocumentSaveReason.AfterDelay:return Re.TextDocumentSaveReason.AfterDelay;case Ot.TextDocumentSaveReason.FocusOut:return Re.TextDocumentSaveReason.FocusOut}return Re.TextDocumentSaveReason.Manual}function v(l){return{textDocument:i(l.document),reason:m(l.reason)}}function b(l){return{files:l.files.map(f=>({uri:r(f)}))}}function P(l){return{files:l.files.map(f=>({oldUri:r(f.oldUri),newUri:r(f.newUri)}))}}function j(l){return{files:l.files.map(f=>({uri:r(f)}))}}function A(l){return{files:l.files.map(f=>({uri:r(f)}))}}function D(l){return{files:l.files.map(f=>({oldUri:r(f.oldUri),newUri:r(f.newUri)}))}}function O(l){return{files:l.files.map(f=>({uri:r(f)}))}}function x(l,f){return{textDocument:i(l),position:kt(f)}}function H(l){switch(l){case Ot.CompletionTriggerKind.TriggerCharacter:return Re.CompletionTriggerKind.TriggerCharacter;case Ot.CompletionTriggerKind.TriggerForIncompleteCompletions:return Re.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Re.CompletionTriggerKind.Invoked}}function le(l,f,S){return{textDocument:i(l),position:kt(f),context:{triggerKind:H(S.triggerKind),triggerCharacter:S.triggerCharacter}}}function Ne(l){switch(l){case Ot.SignatureHelpTriggerKind.Invoke:return Re.SignatureHelpTriggerKind.Invoked;case Ot.SignatureHelpTriggerKind.TriggerCharacter:return Re.SignatureHelpTriggerKind.TriggerCharacter;case Ot.SignatureHelpTriggerKind.ContentChange:return Re.SignatureHelpTriggerKind.ContentChange}}function Ke(l){return{label:l.label}}function Te(l){return l.map(Ke)}function mt(l){return{label:l.label,parameters:Te(l.parameters)}}function ot(l){return l.map(mt)}function At(l){return l===void 0?l:{signatures:ot(l.signatures),activeSignature:l.activeSignature,activeParameter:l.activeParameter}}function Nt(l,f,S){return{textDocument:i(l),position:kt(f),context:{isRetrigger:S.isRetrigger,triggerCharacter:S.triggerCharacter,triggerKind:Ne(S.triggerKind),activeSignatureHelp:At(S.activeSignatureHelp)}}}function kt(l){return{line:l.line,character:l.character}}function at(l){return l==null?l:{line:l.line,character:l.character}}function Lt(l){let f=[];for(let S of l)f.push(at(S));return f}function Oe(l){return l==null?l:{start:at(l.start),end:at(l.end)}}function wr(l){return l==null?l:Re.Location.create(n(l.uri),Oe(l.range))}function He(l){switch(l){case Ot.DiagnosticSeverity.Error:return Re.DiagnosticSeverity.Error;case Ot.DiagnosticSeverity.Warning:return Re.DiagnosticSeverity.Warning;case Ot.DiagnosticSeverity.Information:return Re.DiagnosticSeverity.Information;case Ot.DiagnosticSeverity.Hint:return Re.DiagnosticSeverity.Hint}}function ct(l){if(!l)return;let f=[];for(let S of l){let I=Rt(S);I!==void 0&&f.push(I)}return f.length>0?f:void 0}function Rt(l){switch(l){case Ot.DiagnosticTag.Unnecessary:return Re.DiagnosticTag.Unnecessary;case Ot.DiagnosticTag.Deprecated:return Re.DiagnosticTag.Deprecated;default:return}}function zt(l){return{message:l.message,location:wr(l.location)}}function dn(l){return l.map(zt)}function Cr(l){if(l!=null)return Lc.number(l)||Lc.string(l)?l:{value:l.value,target:n(l.target)}}function Dn(l){let f=Re.Diagnostic.create(Oe(l.range),l.message),S=l instanceof qI.ProtocolDiagnostic?l:void 0;S!==void 0&&S.data!==void 0&&(f.data=S.data);let I=Cr(l.code);return qI.DiagnosticCode.is(I)?S!==void 0&&S.hasDiagnosticCode?f.code=I:(f.code=I.value,f.codeDescription={href:I.target}):f.code=I,Lc.number(l.severity)&&(f.severity=He(l.severity)),Array.isArray(l.tags)&&(f.tags=ct(l.tags)),l.relatedInformation&&(f.relatedInformation=dn(l.relatedInformation)),l.source&&(f.source=l.source),f}function In(l){return l==null?l:l.map(Dn)}function pn(l,f){switch(l){case"$string":return f;case Re.MarkupKind.PlainText:return{kind:l,value:f};case Re.MarkupKind.Markdown:return{kind:l,value:f.value};default:return`Unsupported Markup content received. Kind is: ${l}`}}function hn(l){switch(l){case Ot.CompletionItemTag.Deprecated:return Re.CompletionItemTag.Deprecated}}function Pn(l){if(l===void 0)return l;let f=[];for(let S of l){let I=hn(S);I!==void 0&&f.push(I)}return f}function ni(l,f){return f!==void 0?f:l+1}function xi(l){let f={label:l.label},S=l instanceof l3.default?l:void 0;l.detail&&(f.detail=l.detail),l.documentation&&(!S||S.documentationFormat==="$string"?f.documentation=l.documentation:f.documentation=pn(S.documentationFormat,l.documentation)),l.filterText&&(f.filterText=l.filterText),qr(f,l),Lc.number(l.kind)&&(f.kind=ni(l.kind,S&&S.originalItemKind)),l.sortText&&(f.sortText=l.sortText),l.additionalTextEdits&&(f.additionalTextEdits=qi(l.additionalTextEdits)),l.commitCharacters&&(f.commitCharacters=l.commitCharacters.slice()),l.command&&(f.command=Nr(l.command)),(l.preselect===!0||l.preselect===!1)&&(f.preselect=l.preselect);let I=Pn(l.tags);if(S){if(S.data!==void 0&&(f.data=S.data),S.deprecated===!0||S.deprecated===!1){if(S.deprecated===!0&&I!==void 0&&I.length>0){let $=I.indexOf(Ot.CompletionItemTag.Deprecated);$!==-1&&I.splice($,1)}f.deprecated=S.deprecated}S.insertTextMode!==void 0&&(f.insertTextMode=S.insertTextMode)}return I!==void 0&&I.length>0&&(f.tags=I),f.insertTextMode===void 0&&l.keepWhitespace===!0&&(f.insertTextMode=g3.InsertTextMode.adjustIndentation),f}function qr(l,f){let S=Re.InsertTextFormat.PlainText,I,$;f.textEdit?(I=f.textEdit.newText,$=f.textEdit.range):f.insertText instanceof Ot.SnippetString?(S=Re.InsertTextFormat.Snippet,I=f.insertText.value):I=f.insertText,f.range&&($=f.range),l.insertTextFormat=S,f.fromEdit&&I!==void 0&&$!==void 0?l.textEdit=ii(I,$):l.insertText=I}function ii(l,f){return dv.is(f)?Re.InsertReplaceEdit.create(l,Oe(f.inserting),Oe(f.replacing)):{newText:l,range:Oe(f)}}function Or(l){return{range:Oe(l.range),newText:l.newText}}function qi(l){return l==null?l:l.map(Or)}function ut(l){return l<=Ot.SymbolKind.TypeParameter?l+1:Re.SymbolKind.Property}function pr(l){return l}function si(l){return l.map(pr)}function Oi(l,f,S){return{textDocument:i(l),position:kt(f),context:{includeDeclaration:S.includeDeclaration}}}function Ar(l){let f=Re.CodeAction.create(l.title);if(l instanceof p3.default&&l.data!==void 0&&(f.data=l.data),l.kind!==void 0&&(f.kind=xn(l.kind)),l.diagnostics!==void 0&&(f.diagnostics=In(l.diagnostics)),l.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return l.command!==void 0&&(f.command=Nr(l.command)),l.isPreferred!==void 0&&(f.isPreferred=l.isPreferred),l.disabled!==void 0&&(f.disabled={reason:l.disabled.reason}),f}function oi(l){if(l==null)return l;let f;return l.only&&Lc.string(l.only.value)&&(f=[l.only.value]),Re.CodeActionContext.create(In(l.diagnostics),f)}function xn(l){if(l!=null)return l.value}function Nr(l){let f=Re.Command.create(l.title,l.command);return l.arguments&&(f.arguments=l.arguments),f}function qn(l){let f=Re.CodeLens.create(Oe(l.range));return l.command&&(f.command=Nr(l.command)),l instanceof f3.default&&l.data&&(f.data=l.data),f}function kr(l,f){let S={tabSize:l.tabSize,insertSpaces:l.insertSpaces};return f.trimTrailingWhitespace&&(S.trimTrailingWhitespace=!0),f.trimFinalNewlines&&(S.trimFinalNewlines=!0),f.insertFinalNewline&&(S.insertFinalNewline=!0),S}function T(l){return{textDocument:i(l)}}function E(l){return{textDocument:i(l)}}function g(l){let f=Re.DocumentLink.create(Oe(l.range));l.target&&(f.target=n(l.target)),l.tooltip!==void 0&&(f.tooltip=l.tooltip);let S=l instanceof d3.default?l:void 0;return S&&S.data&&(f.data=S.data),f}function w(l){return{textDocument:i(l)}}function R(l){let f={name:l.name,kind:ut(l.kind),uri:n(l.uri),range:Oe(l.range),selectionRange:Oe(l.selectionRange)};return l.detail!==void 0&&l.detail.length>0&&(f.detail=l.detail),l.tags!==void 0&&(f.tags=si(l.tags)),l instanceof h3.default&&l.data!==void 0&&(f.data=l.data),f}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:u,asCloseTextDocumentParams:d,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:b,asDidRenameFilesParams:P,asDidDeleteFilesParams:j,asWillCreateFilesParams:A,asWillRenameFilesParams:D,asWillDeleteFilesParams:O,asTextDocumentPositionParams:x,asCompletionParams:le,asSignatureHelpParams:Nt,asWorkerPosition:kt,asRange:Oe,asPosition:at,asPositions:Lt,asLocation:wr,asDiagnosticSeverity:He,asDiagnosticTag:Rt,asDiagnostic:Dn,asDiagnostics:In,asCompletionItem:xi,asTextEdit:Or,asSymbolKind:ut,asSymbolTag:pr,asSymbolTags:si,asReferenceParams:Oi,asCodeAction:Ar,asCodeActionContext:oi,asCommand:Nr,asCodeLens:qn,asFormattingOptions:kr,asDocumentSymbolParams:T,asCodeLensParams:E,asDocumentLink:g,asDocumentLinkParams:w,asCallHierarchyItem:R}}wf.createConverter=m3});var kI=y(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.createConverter=void 0;var K=require("vscode"),ue=rt(),ln=Ei(),v3=Ym(),y3=Zm(),_3=rv(),E3=sv(),AI=cv(),w3=fv(),NI=rt(),Cf;(function(t){function e(r){let n=r;return n&&ln.string(n.language)&&ln.string(n.value)}t.is=e})(Cf||(Cf={}));function C3(t,e){let n=t||(h=>K.Uri.parse(h));function i(h){return n(h)}function s(h){return h.map(o)}function o(h){let q=new AI.ProtocolDiagnostic(m(h.range),h.message,b(h.severity),h.data);return h.code!==void 0&&(ue.CodeDescription.is(h.codeDescription)?q.code={value:h.code,target:i(h.codeDescription.href)}:AI.DiagnosticCode.is(h.code)?(q.hasDiagnosticCode=!0,q.code={value:h.code.value,target:i(h.code.target)}):q.code=h.code),h.source&&(q.source=h.source),h.relatedInformation&&(q.relatedInformation=a(h.relatedInformation)),Array.isArray(h.tags)&&(q.tags=u(h.tags)),q}function a(h){return h.map(c)}function c(h){return new K.DiagnosticRelatedInformation(Oe(h.location),h.message)}function u(h){if(!h)return;let q=[];for(let X of h){let _e=d(X);_e!==void 0&&q.push(_e)}return q.length>0?q:void 0}function d(h){switch(h){case ue.DiagnosticTag.Unnecessary:return K.DiagnosticTag.Unnecessary;case ue.DiagnosticTag.Deprecated:return K.DiagnosticTag.Deprecated;default:return}}function p(h){if(!!h)return new K.Position(h.line,h.character)}function m(h){if(!!h)return new K.Range(p(h.start),p(h.end))}function v(h){return h.map(q=>m(q))}function b(h){if(h==null)return K.DiagnosticSeverity.Error;switch(h){case ue.DiagnosticSeverity.Error:return K.DiagnosticSeverity.Error;case ue.DiagnosticSeverity.Warning:return K.DiagnosticSeverity.Warning;case ue.DiagnosticSeverity.Information:return K.DiagnosticSeverity.Information;case ue.DiagnosticSeverity.Hint:return K.DiagnosticSeverity.Hint}return K.DiagnosticSeverity.Error}function P(h){if(ln.string(h))return A(h);if(Cf.is(h))return A().appendCodeblock(h.value,h.language);if(Array.isArray(h)){let q=[];for(let X of h){let _e=A();Cf.is(X)?_e.appendCodeblock(X.value,X.language):_e.appendMarkdown(X),q.push(_e)}return q}else{let q;switch(h.kind){case ue.MarkupKind.Markdown:return A(h.value);case ue.MarkupKind.PlainText:return q=A(),q.appendText(h.value),q;default:return q=A(),q.appendText(`Unsupported Markup content received. Kind is: ${h.kind}`),q}}}function j(h){if(ln.string(h))return h;switch(h.kind){case ue.MarkupKind.Markdown:return A(h.value);case ue.MarkupKind.PlainText:return h.value;default:return`Unsupported Markup content received. Kind is: ${h.kind}`}}function A(h){let q=new K.MarkdownString(h);return e===!0&&(q.isTrusted=e),q}function D(h){if(!!h)return new K.Hover(P(h.contents),m(h.range))}function O(h){if(!h)return;if(Array.isArray(h))return h.map(Ne);let q=h;return new K.CompletionList(q.items.map(Ne),q.isIncomplete)}function x(h){return ue.CompletionItemKind.Text<=h&&h<=ue.CompletionItemKind.TypeParameter?[h-1,void 0]:[K.CompletionItemKind.Text,h]}function H(h){switch(h){case ue.CompletionItemTag.Deprecated:return K.CompletionItemTag.Deprecated}}function le(h){if(h==null)return[];let q=[];for(let X of h){let _e=H(X);_e!==void 0&&q.push(_e)}return q}function Ne(h){let q=le(h.tags),X=new v3.default(h.label);h.detail&&(X.detail=h.detail),h.documentation&&(X.documentation=j(h.documentation),X.documentationFormat=ln.string(h.documentation)?"$string":h.documentation.kind),h.filterText&&(X.filterText=h.filterText);let _e=Ke(h);if(_e&&(X.insertText=_e.text,X.range=_e.range,X.fromEdit=_e.fromEdit),ln.number(h.kind)){let[Ae,Ni]=x(h.kind);X.kind=Ae,Ni&&(X.originalItemKind=Ni)}return h.sortText&&(X.sortText=h.sortText),h.additionalTextEdits&&(X.additionalTextEdits=ot(h.additionalTextEdits)),ln.stringArray(h.commitCharacters)&&(X.commitCharacters=h.commitCharacters.slice()),h.command&&(X.command=Or(h.command)),(h.deprecated===!0||h.deprecated===!1)&&(X.deprecated=h.deprecated,h.deprecated===!0&&q.push(K.CompletionItemTag.Deprecated)),(h.preselect===!0||h.preselect===!1)&&(X.preselect=h.preselect),h.data!==void 0&&(X.data=h.data),q.length>0&&(X.tags=q),h.insertTextMode!==void 0&&(X.insertTextMode=h.insertTextMode,h.insertTextMode===NI.InsertTextMode.asIs&&(X.keepWhitespace=!0)),X}function Ke(h){return h.textEdit?h.insertTextFormat===ue.InsertTextFormat.Snippet?{text:new K.SnippetString(h.textEdit.newText),range:Te(h.textEdit),fromEdit:!0}:{text:h.textEdit.newText,range:Te(h.textEdit),fromEdit:!0}:h.insertText?h.insertTextFormat===ue.InsertTextFormat.Snippet?{text:new K.SnippetString(h.insertText),fromEdit:!1}:{text:h.insertText,fromEdit:!1}:void 0}function Te(h){return ue.InsertReplaceEdit.is(h)?{inserting:m(h.insert),replacing:m(h.replace)}:m(h.range)}function mt(h){if(!!h)return new K.TextEdit(m(h.range),h.newText)}function ot(h){if(!!h)return h.map(mt)}function At(h){if(!h)return;let q=new K.SignatureHelp;return ln.number(h.activeSignature)?q.activeSignature=h.activeSignature:q.activeSignature=0,ln.number(h.activeParameter)?q.activeParameter=h.activeParameter:q.activeParameter=0,h.signatures&&(q.signatures=Nt(h.signatures)),q}function Nt(h){return h.map(kt)}function kt(h){let q=new K.SignatureInformation(h.label);return h.documentation!==void 0&&(q.documentation=j(h.documentation)),h.parameters!==void 0&&(q.parameters=at(h.parameters)),h.activeParameter!==void 0&&(q.activeParameter=h.activeParameter),q}function at(h){return h.map(Lt)}function Lt(h){let q=new K.ParameterInformation(h.label);return h.documentation&&(q.documentation=j(h.documentation)),q}function Oe(h){if(!!h)return new K.Location(n(h.uri),m(h.range))}function wr(h){if(!!h)return Rt(h)}function He(h){if(!!h)return Rt(h)}function ct(h){if(!h)return;let q={targetUri:n(h.targetUri),targetRange:m(h.targetRange),originSelectionRange:m(h.originSelectionRange),targetSelectionRange:m(h.targetSelectionRange)};if(!q.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return q}function Rt(h){if(!!h)return ln.array(h)?h.length===0?[]:ue.LocationLink.is(h[0])?h.map(X=>ct(X)):h.map(X=>Oe(X)):ue.LocationLink.is(h)?[ct(h)]:Oe(h)}function zt(h){if(!!h)return h.map(q=>Oe(q))}function dn(h){if(!!h)return h.map(Cr)}function Cr(h){let q=new K.DocumentHighlight(m(h.range));return ln.number(h.kind)&&(q.kind=Dn(h.kind)),q}function Dn(h){switch(h){case ue.DocumentHighlightKind.Text:return K.DocumentHighlightKind.Text;case ue.DocumentHighlightKind.Read:return K.DocumentHighlightKind.Read;case ue.DocumentHighlightKind.Write:return K.DocumentHighlightKind.Write}return K.DocumentHighlightKind.Text}function In(h,q){if(!!h)return h.map(X=>ni(X,q))}function pn(h){return h<=ue.SymbolKind.TypeParameter?h-1:K.SymbolKind.Property}function hn(h){switch(h){case ue.SymbolTag.Deprecated:return K.SymbolTag.Deprecated;default:return}}function Pn(h){if(h==null)return;let q=[];for(let X of h){let _e=hn(X);_e!==void 0&&q.push(_e)}return q.length===0?void 0:q}function ni(h,q){let X=new K.SymbolInformation(h.name,pn(h.kind),m(h.location.range),h.location.uri?n(h.location.uri):q);return ii(X,h),h.containerName&&(X.containerName=h.containerName),X}function xi(h){if(h!=null)return h.map(qr)}function qr(h){let q=new K.DocumentSymbol(h.name,h.detail||"",pn(h.kind),m(h.range),m(h.selectionRange));if(ii(q,h),h.children!==void 0&&h.children.length>0){let X=[];for(let _e of h.children)X.push(qr(_e));q.children=X}return q}function ii(h,q){h.tags=Pn(q.tags),q.deprecated&&(h.tags?h.tags.includes(K.SymbolTag.Deprecated)||(h.tags=h.tags.concat(K.SymbolTag.Deprecated)):h.tags=[K.SymbolTag.Deprecated])}function Or(h){let q={title:h.title,command:h.command};return h.arguments&&(q.arguments=h.arguments),q}function qi(h){if(!!h)return h.map(Or)}let ut=new Map;ut.set(ue.CodeActionKind.Empty,K.CodeActionKind.Empty),ut.set(ue.CodeActionKind.QuickFix,K.CodeActionKind.QuickFix),ut.set(ue.CodeActionKind.Refactor,K.CodeActionKind.Refactor),ut.set(ue.CodeActionKind.RefactorExtract,K.CodeActionKind.RefactorExtract),ut.set(ue.CodeActionKind.RefactorInline,K.CodeActionKind.RefactorInline),ut.set(ue.CodeActionKind.RefactorRewrite,K.CodeActionKind.RefactorRewrite),ut.set(ue.CodeActionKind.Source,K.CodeActionKind.Source),ut.set(ue.CodeActionKind.SourceOrganizeImports,K.CodeActionKind.SourceOrganizeImports);function pr(h){if(h==null)return;let q=ut.get(h);if(q)return q;let X=h.split(".");q=K.CodeActionKind.Empty;for(let _e of X)q=q.append(_e);return q}function si(h){if(h!=null)return h.map(q=>pr(q))}function Oi(h){if(h==null)return;let q=new E3.default(h.title,h.data);return h.kind!==void 0&&(q.kind=pr(h.kind)),h.diagnostics!==void 0&&(q.diagnostics=s(h.diagnostics)),h.edit!==void 0&&(q.edit=xn(h.edit)),h.command!==void 0&&(q.command=Or(h.command)),h.isPreferred!==void 0&&(q.isPreferred=h.isPreferred),h.disabled!==void 0&&(q.disabled={reason:h.disabled.reason}),q}function Ar(h){if(!h)return;let q=new y3.default(m(h.range));return h.command&&(q.command=Or(h.command)),h.data!==void 0&&h.data!==null&&(q.data=h.data),q}function oi(h){if(!!h)return h.map(q=>Ar(q))}function xn(h){if(!h)return;let q=new Map;if(h.changeAnnotations!==void 0)for(let Ae of Object.keys(h.changeAnnotations)){let Ni=Nr(h.changeAnnotations[Ae]);q.set(Ae,Ni)}let X=Ae=>{if(Ae!==void 0)return q.get(Ae)},_e=new K.WorkspaceEdit;if(h.documentChanges)for(let Ae of h.documentChanges)if(ue.CreateFile.is(Ae))_e.createFile(n(Ae.uri),Ae.options,X(Ae.annotationId));else if(ue.RenameFile.is(Ae))_e.renameFile(n(Ae.oldUri),n(Ae.newUri),Ae.options,X(Ae.annotationId));else if(ue.DeleteFile.is(Ae))_e.deleteFile(n(Ae.uri),Ae.options,X(Ae.annotationId));else if(ue.TextDocumentEdit.is(Ae)){let Ni=n(Ae.textDocument.uri);for(let qs of Ae.edits)NI.AnnotatedTextEdit.is(qs)?_e.replace(Ni,m(qs.range),qs.newText,X(qs.annotationId)):_e.replace(Ni,m(qs.range),qs.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ae,void 0,4)}`);else h.changes&&Object.keys(h.changes).forEach(Ae=>{_e.set(n(Ae),ot(h.changes[Ae]))});return _e}function Nr(h){if(h!==void 0)return{label:h.label,needsConfirmation:!!h.needsConfirmation,description:h.description}}function qn(h){let q=m(h.range),X=h.target?i(h.target):void 0,_e=new _3.default(q,X);return h.tooltip!==void 0&&(_e.tooltip=h.tooltip),h.data!==void 0&&h.data!==null&&(_e.data=h.data),_e}function kr(h){if(!!h)return h.map(qn)}function T(h){return new K.Color(h.red,h.green,h.blue,h.alpha)}function E(h){return new K.ColorInformation(m(h.range),T(h.color))}function g(h){if(Array.isArray(h))return h.map(E)}function w(h){let q=new K.ColorPresentation(h.label);return q.additionalTextEdits=ot(h.additionalTextEdits),h.textEdit&&(q.textEdit=mt(h.textEdit)),q}function R(h){if(Array.isArray(h))return h.map(w)}function l(h){if(h)switch(h){case ue.FoldingRangeKind.Comment:return K.FoldingRangeKind.Comment;case ue.FoldingRangeKind.Imports:return K.FoldingRangeKind.Imports;case ue.FoldingRangeKind.Region:return K.FoldingRangeKind.Region}}function f(h){return new K.FoldingRange(h.startLine,h.endLine,l(h.kind))}function S(h){if(Array.isArray(h))return h.map(f)}function I(h){return new K.SelectionRange(m(h.range),h.parent?I(h.parent):void 0)}function $(h){if(!Array.isArray(h))return[];let q=[];for(let X of h)q.push(I(X));return q}function V(h){if(h===null)return;let q=new w3.default(pn(h.kind),h.name,h.detail||"",i(h.uri),m(h.range),m(h.selectionRange),h.data);return h.tags!==void 0&&(q.tags=Pn(h.tags)),q}function se(h){if(h!==null)return h.map(q=>V(q))}function De(h){return new K.CallHierarchyIncomingCall(V(h.from),v(h.fromRanges))}function lt(h){if(h!==null)return h.map(q=>De(q))}function ft(h){return new K.CallHierarchyOutgoingCall(V(h.to),v(h.fromRanges))}function fe(h){if(h!==null)return h.map(q=>ft(q))}function ai(h){if(h!=null)return new K.SemanticTokens(new Uint32Array(h.data),h.resultId)}function Ai(h){return new K.SemanticTokensEdit(h.start,h.deleteCount,h.data!==void 0?new Uint32Array(h.data):void 0)}function zc(h){if(h!=null)return new K.SemanticTokensEdits(h.edits.map(Ai),h.resultId)}function QP(h){return h}function JP(h){if(h!=null)return new K.LinkedEditingRanges(v(h.ranges),ZP(h.wordPattern))}function ZP(h){if(h!=null)return new RegExp(h)}return{asUri:i,asDiagnostics:s,asDiagnostic:o,asRange:m,asRanges:v,asPosition:p,asDiagnosticSeverity:b,asDiagnosticTag:d,asHover:D,asCompletionResult:O,asCompletionItem:Ne,asTextEdit:mt,asTextEdits:ot,asSignatureHelp:At,asSignatureInformations:Nt,asSignatureInformation:kt,asParameterInformations:at,asParameterInformation:Lt,asDeclarationResult:wr,asDefinitionResult:He,asLocation:Oe,asReferences:zt,asDocumentHighlights:dn,asDocumentHighlight:Cr,asDocumentHighlightKind:Dn,asSymbolKind:pn,asSymbolTag:hn,asSymbolTags:Pn,asSymbolInformations:In,asSymbolInformation:ni,asDocumentSymbols:xi,asDocumentSymbol:qr,asCommand:Or,asCommands:qi,asCodeAction:Oi,asCodeActionKind:pr,asCodeActionKinds:si,asCodeLens:Ar,asCodeLenses:oi,asWorkspaceEdit:xn,asDocumentLink:qn,asDocumentLinks:kr,asFoldingRangeKind:l,asFoldingRange:f,asFoldingRanges:S,asColor:T,asColorInformation:E,asColorInformations:g,asColorPresentation:w,asColorPresentations:R,asSelectionRange:I,asSelectionRanges:$,asSemanticTokensLegend:QP,asSemanticTokens:ai,asSemanticTokensEdit:Ai,asSemanticTokensEdits:zc,asCallHierarchyItem:V,asCallHierarchyItems:se,asCallHierarchyIncomingCall:De,asCallHierarchyIncomingCalls:lt,asCallHierarchyOutgoingCall:ft,asCallHierarchyOutgoingCalls:fe,asLinkedEditingRanges:JP}}Sf.createConverter=C3});var MI=y(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.Delayer=void 0;var LI=rt(),pv=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=LI.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(LI.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};bf.Delayer=pv});var Tf=y(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.generateUuid=Xr.parse=Xr.isUUID=Xr.v4=Xr.empty=void 0;var Mc=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ce=class extends Mc{constructor(){super([ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-","4",ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._oneOf(ce._timeHighBits),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ce._oneOf(ce._chars)}};ce._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ce._timeHighBits=["8","9","a","b"];Xr.empty=new Mc("00000000-0000-0000-0000-000000000000");function FI(){return new ce}Xr.v4=FI;var S3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function jI(t){return S3.test(t)}Xr.isUUID=jI;function b3(t){if(!jI(t))throw new Error("invalid uuid");return new Mc(t)}Xr.parse=b3;function T3(){return FI().asHex()}Xr.generateUuid=T3});var gv=y(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.ProgressPart=void 0;var $I=require("vscode"),HI=rt(),BI=Ei(),hv=class{constructor(e,r,n){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(HI.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){$I.window.withProgress({location:$I.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(r,n)=>(this._progress=r,this._infinite=e.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(HI.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&BI.string(e.message))this._progress.report({message:e.message});else if(BI.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Rf.ProgressPart=hv});var Pr=y(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.BaseLanguageClient=gt.MessageTransports=gt.TextDocumentFeature=gt.State=gt.RevealOutputChannelOn=gt.CloseAction=gt.ErrorAction=void 0;var W=require("vscode"),C=rt(),R3=Vm(),D3=OI(),I3=kI(),Le=Ei(),UI=MI(),Me=Tf(),P3=gv(),mv=class{error(e){C.RAL().console.error(e)}warn(e){C.RAL().console.warn(e)}info(e){C.RAL().console.info(e)}log(e){C.RAL().console.log(e)}};function x3(t,e,r,n,i){let s=new mv,o=C.createProtocolConnection(t,e,s,i);return o.onError(c=>{r(c[0],c[1],c[2])}),o.onClose(n),{listen:()=>o.listen(),sendRequest:(c,...u)=>o.sendRequest(Le.string(c)?c:c.method,...u),onRequest:(c,u)=>o.onRequest(Le.string(c)?c:c.method,u),sendNotification:(c,u)=>o.sendNotification(Le.string(c)?c:c.method,u),onNotification:(c,u)=>o.onNotification(Le.string(c)?c:c.method,u),onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(c,u,d)=>{let p={sendNotification:!1,traceFormat:C.TraceFormat.Text};d===void 0?o.trace(c,u,p):(Le.boolean(d),o.trace(c,u,d))},initialize:c=>o.sendRequest(C.InitializeRequest.type,c),shutdown:()=>o.sendRequest(C.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(C.ExitNotification.type),onLogMessage:c=>o.onNotification(C.LogMessageNotification.type,c),onShowMessage:c=>o.onNotification(C.ShowMessageNotification.type,c),onTelemetry:c=>o.onNotification(C.TelemetryEventNotification.type,c),didChangeConfiguration:c=>o.sendNotification(C.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>o.sendNotification(C.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>o.sendNotification(C.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>o.sendNotification(C.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>o.sendNotification(C.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>o.sendNotification(C.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>o.onNotification(C.PublishDiagnosticsNotification.type,c),end:()=>o.end(),dispose:()=>o.dispose()}}var If;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(If=gt.ErrorAction||(gt.ErrorAction={}));var bs;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(bs=gt.CloseAction||(gt.CloseAction={}));var vv=class{constructor(e,r){this.name=e,this.maxRestartCount=r,this.restarts=[]}error(e,r,n){return n&&n<=3?If.Continue:If.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?bs.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(W.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),bs.DoNotRestart):(this.restarts.shift(),bs.Restart)}},Fc;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Fc=gt.RevealOutputChannelOn||(gt.RevealOutputChannelOn={}));var Df;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Df=gt.State||(gt.State={}));var Xe;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(Xe||(Xe={}));var WI=[C.SymbolKind.File,C.SymbolKind.Module,C.SymbolKind.Namespace,C.SymbolKind.Package,C.SymbolKind.Class,C.SymbolKind.Method,C.SymbolKind.Property,C.SymbolKind.Field,C.SymbolKind.Constructor,C.SymbolKind.Enum,C.SymbolKind.Interface,C.SymbolKind.Function,C.SymbolKind.Variable,C.SymbolKind.Constant,C.SymbolKind.String,C.SymbolKind.Number,C.SymbolKind.Boolean,C.SymbolKind.Array,C.SymbolKind.Object,C.SymbolKind.Key,C.SymbolKind.Null,C.SymbolKind.EnumMember,C.SymbolKind.Struct,C.SymbolKind.Event,C.SymbolKind.Operator,C.SymbolKind.TypeParameter],q3=[C.CompletionItemKind.Text,C.CompletionItemKind.Method,C.CompletionItemKind.Function,C.CompletionItemKind.Constructor,C.CompletionItemKind.Field,C.CompletionItemKind.Variable,C.CompletionItemKind.Class,C.CompletionItemKind.Interface,C.CompletionItemKind.Module,C.CompletionItemKind.Property,C.CompletionItemKind.Unit,C.CompletionItemKind.Value,C.CompletionItemKind.Enum,C.CompletionItemKind.Keyword,C.CompletionItemKind.Snippet,C.CompletionItemKind.Color,C.CompletionItemKind.File,C.CompletionItemKind.Reference,C.CompletionItemKind.Folder,C.CompletionItemKind.EnumMember,C.CompletionItemKind.Constant,C.CompletionItemKind.Struct,C.CompletionItemKind.Event,C.CompletionItemKind.Operator,C.CompletionItemKind.TypeParameter],zI=[C.SymbolTag.Deprecated];function G(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var jc;(function(t){function e(r){let n=W.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}t.fromConfiguration=e})(jc||(jc={}));var yv;(function(t){function e(r){let n=r;return n&&Le.func(n.register)&&Le.func(n.unregister)&&Le.func(n.dispose)&&n.registrationType!==void 0}t.is=e})(yv||(yv={}));var fn=class{constructor(e,r,n,i,s,o){this._client=e,this._event=r,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(W.languages.match(n,r))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(W.languages.match(r,e))return{send:n=>{this.callback(n)}}}},_v=class extends fn{constructor(e,r){super(e,W.workspace.onDidOpenTextDocument,C.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),fn.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(e){G(G(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Me.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return C.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let r=e.registerOptions.documentSelector;W.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&W.languages.match(r,n)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};s.didOpen?s.didOpen(n,o):o(n),this._syncedDocuments.set(i,n)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},Ev=class extends fn{constructor(e,r){super(e,W.workspace.onDidCloseTextDocument,C.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),fn.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return C.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){G(G(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Me.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(W.languages.match(r,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},wv=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return C.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){G(G(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==C.TextDocumentSyncKind.None&&this.register({id:Me.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=W.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(W.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===C.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(C.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(C.DidChangeTextDocumentNotification.type,i)}else if(r.syncKind===C.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(C.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new UI.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(C.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(W.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}}}},Cv=class extends fn{constructor(e){super(e,W.workspace.onWillSaveTextDocument,C.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>fn.textDocumentFilter(r,n.document))}get registrationType(){return C.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:Me.generateUuid(),registerOptions:{documentSelector:r}})}},Sv=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return C.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:Me.generateUuid(),registerOptions:{documentSelector:r}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=W.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(fn.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(C.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},bv=class extends fn{constructor(e){super(e,W.workspace.onDidSaveTextDocument,C.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),fn.textDocumentFilter),this._includeText=!1}get registrationType(){return C.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){G(G(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:Me.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Tv=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return C.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){G(G(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let n of e.registerOptions.watchers){if(!Le.string(n.globPattern))continue;let i=!0,s=!0,o=!0;n.kind!==void 0&&n.kind!==null&&(i=(n.kind&C.WatchKind.Create)!==0,s=(n.kind&C.WatchKind.Change)!==0,o=(n.kind&C.WatchKind.Delete)!==0);let a=W.workspace.createFileSystemWatcher(n.globPattern,!i,!s,!o);this.hookListeners(a,i,s,o),r.push(a)}this._watchers.set(e.id,r)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,s){r&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:C.FileChangeType.Deleted}),null,s)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Bt=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],data:e,provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(C.TextDocumentRegistrationOptions.is(r)){let n=C.StaticRegistrationOptions.hasId(r)?r.id:Me.generateUuid(),i=r.documentSelector||e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(Le.boolean(r)&&r===!0||C.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=Le.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[Me.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return Le.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&W.languages.match(n,e))return r.provider}}getAllProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};gt.TextDocumentFeature=Bt;var Rv=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},Dv=class extends Bt{constructor(e){super(e,C.CompletionRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[C.MarkupKind.Markdown,C.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[C.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[C.InsertTextMode.asIs,C.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:q3}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(i,s,o,a)=>{let c=this._client,u=this._client.clientOptions.middleware,d=(p,m,v,b)=>c.sendRequest(C.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(p,m,v),b).then(c.protocol2CodeConverter.asCompletionResult,P=>c.handleFailedRequest(C.CompletionRequest.type,P,null));return u.provideCompletionItem?u.provideCompletionItem(i,s,a,o,d):d(i,s,a,o)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.clientOptions.middleware,c=(u,d)=>o.sendRequest(C.CompletionResolveRequest.type,o.code2ProtocolConverter.asCompletionItem(u),d).then(o.protocol2CodeConverter.asCompletionItem,p=>o.handleFailedRequest(C.CompletionResolveRequest.type,p,u));return a.resolveCompletionItem?a.resolveCompletionItem(i,s,c):c(i,s)}:void 0};return[W.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},Iv=class extends Bt{constructor(e){super(e,C.HoverRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[C.MarkupKind.Markdown,C.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(C.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asHover,m=>o.handleFailedRequest(C.HoverRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideHover?c.provideHover(n,i,s,a):a(n,i,s)}};return[W.languages.registerHoverProvider(e.documentSelector,r),r]}},Pv=class extends Bt{constructor(e){super(e,C.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[C.MarkupKind.Markdown,C.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(i,s,o,a)=>{let c=this._client,u=(p,m,v,b)=>c.sendRequest(C.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(p,m,v),b).then(c.protocol2CodeConverter.asSignatureHelp,P=>c.handleFailedRequest(C.SignatureHelpRequest.type,P,null)),d=c.clientOptions.middleware;return d.provideSignatureHelp?d.provideSignatureHelp(i,s,a,o,u):u(i,s,a,o)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=W.languages.registerSignatureHelpProvider(e.documentSelector,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=W.languages.registerSignatureHelpProvider(e.documentSelector,r,i)}return[n,r]}},xv=class extends Bt{constructor(e){super(e,C.DefinitionRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(C.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(C.DefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,i,s,a):a(n,i,s)}};return[W.languages.registerDefinitionProvider(e.documentSelector,r),r]}},qv=class extends Bt{constructor(e){super(e,C.ReferencesRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,i,s,o)=>{let a=this._client,c=(d,p,m,v)=>a.sendRequest(C.ReferencesRequest.type,a.code2ProtocolConverter.asReferenceParams(d,p,m),v).then(a.protocol2CodeConverter.asReferences,b=>a.handleFailedRequest(C.ReferencesRequest.type,b,null)),u=a.clientOptions.middleware;return u.provideReferences?u.provideReferences(n,i,s,o,c):c(n,i,s,o)}};return[W.languages.registerReferenceProvider(e.documentSelector,r),r]}},Ov=class extends Bt{constructor(e){super(e,C.DocumentHighlightRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(C.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asDocumentHighlights,m=>o.handleFailedRequest(C.DocumentHighlightRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,i,s,a):a(n,i,s)}};return[W.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},Av=class extends Bt{constructor(e){super(e,C.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:WI},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:zI},r.labelSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(i,s)=>{let o=this._client,a=(u,d)=>o.sendRequest(C.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(u),d).then(p=>{if(p!==null){if(p.length===0)return[];{let m=p[0];return C.DocumentSymbol.is(m)?o.protocol2CodeConverter.asDocumentSymbols(p):o.protocol2CodeConverter.asSymbolInformations(p)}}},p=>o.handleFailedRequest(C.DocumentSymbolRequest.type,p,null)),c=o.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(i,s,a):a(i,s)}},n=e.label!==void 0?{label:e.label}:void 0;return[W.languages.registerDocumentSymbolProvider(e.documentSelector,r,n),r]}},Nv=class extends Rv{constructor(e){super(e,C.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=G(G(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:WI},r.tagSupport={valueSet:zI}}initialize(e){!e.workspaceSymbolProvider||this.register({id:Me.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(C.WorkspaceSymbolRequest.type,{query:c},u).then(s.protocol2CodeConverter.asSymbolInformations,d=>s.handleFailedRequest(C.WorkspaceSymbolRequest.type,d,null)),a=s.clientOptions.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(n,i,o):o(n,i)}};return[W.languages.registerWorkspaceSymbolProvider(r),r]}},kv=class extends Bt{constructor(e){super(e,C.CodeActionRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[C.CodeActionKind.Empty,C.CodeActionKind.QuickFix,C.CodeActionKind.Refactor,C.CodeActionKind.RefactorExtract,C.CodeActionKind.RefactorInline,C.CodeActionKind.RefactorRewrite,C.CodeActionKind.Source,C.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,i,s,o)=>{let a=this._client,c=(d,p,m,v)=>{let b={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),range:a.code2ProtocolConverter.asRange(p),context:a.code2ProtocolConverter.asCodeActionContext(m)};return a.sendRequest(C.CodeActionRequest.type,b,v).then(P=>{if(P===null)return;let j=[];for(let A of P)C.Command.is(A)?j.push(a.protocol2CodeConverter.asCommand(A)):j.push(a.protocol2CodeConverter.asCodeAction(A));return j},P=>a.handleFailedRequest(C.CodeActionRequest.type,P,null))},u=a.clientOptions.middleware;return u.provideCodeActions?u.provideCodeActions(n,i,s,o,c):c(n,i,s,o)},resolveCodeAction:e.resolveProvider?(n,i)=>{let s=this._client,o=this._client.clientOptions.middleware,a=(c,u)=>s.sendRequest(C.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(c),u).then(s.protocol2CodeConverter.asCodeAction,d=>s.handleFailedRequest(C.CodeActionResolveRequest.type,d,c));return o.resolveCodeAction?o.resolveCodeAction(n,i,a):a(n,i)}:void 0};return[W.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},Lv=class extends Bt{constructor(e){super(e,C.CodeLensRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"codeLens").dynamicRegistration=!0,G(G(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,r){this._client.onRequest(C.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(r,e.codeLensProvider);!i||this.register({id:Me.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let r=new W.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(i,s)=>{let o=this._client,a=(u,d)=>o.sendRequest(C.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(u),d).then(o.protocol2CodeConverter.asCodeLenses,p=>o.handleFailedRequest(C.CodeLensRequest.type,p,null)),c=o.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(i,s,a):a(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let o=this._client,a=(u,d)=>o.sendRequest(C.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(u),d).then(o.protocol2CodeConverter.asCodeLens,p=>o.handleFailedRequest(C.CodeLensResolveRequest.type,p,u)),c=o.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(i,s,a):a(i,s)}:void 0};return[W.languages.registerCodeLensProvider(e.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},Mv=class extends Bt{constructor(e){super(e,C.DocumentFormattingRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,i,s)=>{let o=this._client,a=(u,d,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),options:o.code2ProtocolConverter.asFormattingOptions(d,jc.fromConfiguration(u))};return o.sendRequest(C.DocumentFormattingRequest.type,m,p).then(o.protocol2CodeConverter.asTextEdits,v=>o.handleFailedRequest(C.DocumentFormattingRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,i,s,a):a(n,i,s)}};return[W.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},Fv=class extends Bt{constructor(e){super(e,C.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,i,s,o)=>{let a=this._client,c=(d,p,m,v)=>{let b={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),range:a.code2ProtocolConverter.asRange(p),options:a.code2ProtocolConverter.asFormattingOptions(m,jc.fromConfiguration(d))};return a.sendRequest(C.DocumentRangeFormattingRequest.type,b,v).then(a.protocol2CodeConverter.asTextEdits,P=>a.handleFailedRequest(C.DocumentRangeFormattingRequest.type,P,null))},u=a.clientOptions.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(n,i,s,o,c):c(n,i,s,o)}};return[W.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},jv=class extends Bt{constructor(e){super(e,C.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){G(G(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(i,s,o,a,c)=>{let u=this._client,d=(m,v,b,P,j)=>{let A={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),position:u.code2ProtocolConverter.asPosition(v),ch:b,options:u.code2ProtocolConverter.asFormattingOptions(P,jc.fromConfiguration(m))};return u.sendRequest(C.DocumentOnTypeFormattingRequest.type,A,j).then(u.protocol2CodeConverter.asTextEdits,D=>u.handleFailedRequest(C.DocumentOnTypeFormattingRequest.type,D,null))},p=u.clientOptions.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(i,s,o,a,c,d):d(i,s,o,a,c)}},n=e.moreTriggerCharacter||[];return[W.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},$v=class extends Bt{constructor(e){super(e,C.RenameRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=C.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);!n||(Le.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:Me.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,i,s,o)=>{let a=this._client,c=(d,p,m,v)=>{let b={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),position:a.code2ProtocolConverter.asPosition(p),newName:m};return a.sendRequest(C.RenameRequest.type,b,v).then(a.protocol2CodeConverter.asWorkspaceEdit,P=>a.handleFailedRequest(C.RenameRequest.type,P,null))},u=a.clientOptions.middleware;return u.provideRenameEdits?u.provideRenameEdits(n,i,s,o,c):c(n,i,s,o)},prepareRename:e.prepareProvider?(n,i,s)=>{let o=this._client,a=(u,d,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),position:o.code2ProtocolConverter.asPosition(d)};return o.sendRequest(C.PrepareRenameRequest.type,m,p).then(v=>C.Range.is(v)?o.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&C.Range.is(v.range)?{range:o.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>o.handleFailedRequest(C.PrepareRenameRequest.type,v,void 0))},c=o.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,i,s,a):a(n,i,s)}:void 0};return[W.languages.registerRenameProvider(e.documentSelector,r),r]}isDefaultBehavior(e){let r=e;return r&&Le.boolean(r.defaultBehavior)}},Hv=class extends Bt{constructor(e){super(e,C.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=G(G(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);!n||this.register({id:Me.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(C.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),u).then(s.protocol2CodeConverter.asDocumentLinks,d=>s.handleFailedRequest(C.DocumentLinkRequest.type,d,null)),a=s.clientOptions.middleware;return a.provideDocumentLinks?a.provideDocumentLinks(n,i,o):o(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(C.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),u).then(s.protocol2CodeConverter.asDocumentLink,d=>s.handleFailedRequest(C.DocumentLinkResolveRequest.type,d,c)),a=s.clientOptions.middleware;return a.resolveDocumentLink?a.resolveDocumentLink(n,i,o):o(n,i)}:void 0};return[W.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},Bv=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return C.DidChangeConfigurationNotification.type}fillClientCapabilities(e){G(G(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:Me.generateUuid(),registerOptions:{section:e}})}register(e){let r=W.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,r),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(Le.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(a=>r.affectsConfiguration(a)))return;let i=o=>{if(o===void 0){this._client.sendNotification(C.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(C.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function r(s,o){let a=s;for(let c=0;c<o.length-1;c++){let u=a[o[c]];u||(u=Object.create(null),a[o[c]]=u),a=u}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=W.workspace.getConfiguration(o.substr(0,a),n).get(o.substr(a+1)):c=W.workspace.getConfiguration(void 0,n).get(o),c){let u=e[s].split(".");r(i,u)[u[u.length-1]]=R3.toJSONObject(c)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Uv=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return C.ExecuteCommandRequest.type}fillClientCapabilities(e){G(G(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:Me.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let r=this._client,n=r.clientOptions.middleware,i=(s,o)=>{let a={command:s,arguments:o};return r.sendRequest(C.ExecuteCommandRequest.type,a).then(void 0,c=>r.handleFailedRequest(C.ExecuteCommandRequest.type,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(W.commands.registerCommand(o,(...a)=>n.executeCommand?n.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},O3;(function(t){function e(r){return r&&C.MessageReader.is(r.reader)&&C.MessageWriter.is(r.writer)}t.is=e})(O3=gt.MessageTransports||(gt.MessageTransports={}));var Pf=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Ts=class{constructor(e,r,n){var i;this._traceFormat=C.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{};let s={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||Fc.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((i=n.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Xe.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new UI.Delayer(250),this._onReady=new Promise((o,a)=>{this._onReadyCallbacks=new Pf(o,a)}),this._onStop=void 0,this._telemetryEmitter=new C.Emitter,this._stateChangeEmitter=new C.Emitter,this._trace=C.Trace.Off,this._tracer={log:(o,a)=>{Le.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=D3.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=I3.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===Xe.Running?Df.Running:this.state===Xe.Starting?Df.Starting:Df.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${Le.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${Le.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${Le.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${Le.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(C.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,r,s=>{i(r,s,()=>n(s))})}return this._resolvedConnection.onProgress(e,r,n)}catch(i){throw this.error(`Registering progress handler for token ${r} failed.`,i),i}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=W.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new vv(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof C.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?Le.string(e.stack)?e.stack:e.message:Le.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Fc.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Fc.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Fc.Error&&this.showNotificationMessage()}showNotificationMessage(){W.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Xe.Initial||this.state===Xe.Stopping||this.state===Xe.Stopped}needsStop(){return this.state===Xe.Starting||this.state===Xe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Xe.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new Pf(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?W.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):W.languages.createDiagnosticCollection()),this.state=Xe.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case C.MessageType.Error:this.error(r.message,void 0,!1);break;case C.MessageType.Warning:this.warn(r.message,void 0,!1);break;case C.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case C.MessageType.Error:W.window.showErrorMessage(r.message);break;case C.MessageType.Warning:W.window.showWarningMessage(r.message);break;case C.MessageType.Info:W.window.showInformationMessage(r.message);break;default:W.window.showInformationMessage(r.message)}}),e.onRequest(C.ShowMessageRequest.type,r=>{let n;switch(r.type){case C.MessageType.Error:n=W.window.showErrorMessage;break;case C.MessageType.Warning:n=W.window.showWarningMessage;break;case C.MessageType.Info:n=W.window.showInformationMessage;break;default:n=W.window.showInformationMessage}let i=r.actions||[];return n(r.message,...i)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.onRequest(C.ShowDocumentRequest.type,async r=>{var n;let i=async o=>{let a=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await W.env.openExternal(a)};{let c={};return o.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?c.preserveFocus=!0:o.takeFocus===!0&&(c.preserveFocus=!1),await W.window.showTextDocument(a,c),{success:!0}}}catch{return{success:!0}}},s=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return s!==void 0?s(r,i):i(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=Xe.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),W.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new W.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:W.env.appName,version:W.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(W.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Le.func(r)?r():r,trace:C.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=Me.generateUuid(),o=new P3.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(a=>(o.done(),a),a=>{throw o.cancel(),a})}else return this.doInitialize(e,i)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=Xe.Running;let i;return Le.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===C.TextDocumentSyncKind.None?i={openClose:!1,change:C.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(C.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(C.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(C.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(C.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof C.ResponseError&&n.data&&n.data.retry?W.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&W.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=W.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Xe.Stopping&&this._onStop?this._onStop:(this.state=Xe.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=Xe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Xe.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r;let n=this;function i(o){n._fileEvents.push(o),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(a=>{n.isConnectionActive()&&(n.forceDocumentSync(),a.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},a=>{n.error("Notify file events failed.",a)})})}let s=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;s?.didChangeWatchedFile?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(C.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(r,n,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(r,n)}setDiagnostics(e,r){!this._diagnostics||this._diagnostics.set(e,r)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>x3(n.reader,n.writer,e,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Xe.Stopping||this.state===Xe.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=bs.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===bs.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Xe.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Xe.StartFailed):this.state=Xe.Stopped,this.cleanUp(!1,!0)):e===bs.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Xe.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===If.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){W.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=W.workspace.getConfiguration(this._id),i=C.Trace.Off,s=C.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=C.Trace.fromString(o):(i=C.Trace.fromString(n.get("trace.server.verbosity","off")),s=C.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;Le.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(C.DidChangeWatchedFilesNotification.type.method).registerRaw(Me.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),yv.is(e)){let r=e.registrationType;this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Bv(this)),this.registerFeature(new _v(this,this._syncedDocuments)),this.registerFeature(new wv(this)),this.registerFeature(new Cv(this)),this.registerFeature(new Sv(this)),this.registerFeature(new bv(this)),this.registerFeature(new Ev(this,this._syncedDocuments)),this.registerFeature(new Tv(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Dv(this)),this.registerFeature(new Iv(this)),this.registerFeature(new Pv(this)),this.registerFeature(new xv(this)),this.registerFeature(new qv(this)),this.registerFeature(new Ov(this)),this.registerFeature(new Av(this)),this.registerFeature(new Nv(this)),this.registerFeature(new kv(this)),this.registerFeature(new Lv(this)),this.registerFeature(new Mv(this)),this.registerFeature(new Fv(this)),this.registerFeature(new jv(this)),this.registerFeature(new $v(this)),this.registerFeature(new Hv(this)),this.registerFeature(new Uv(this))}fillInitializeParams(e){for(let r of this._features)Le.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};G(e,"workspace").applyEdit=!0;let r=G(G(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[C.ResourceOperationKind.Create,C.ResourceOperationKind.Rename,C.ResourceOperationKind.Delete],r.failureHandling=C.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=G(G(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[C.DiagnosticTag.Unnecessary,C.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=G(e,"window"),s=G(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=G(i,"showDocument");o.support=!0;let a=G(e,"general");a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let a={id:i.id,registerOptions:o};try{s.register(a)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;W.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(r.documentChanges){for(let s of r.documentChanges)if(C.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=n.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):Le.asPromise(W.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,r,n){if(r instanceof C.ResponseError){if(r.code===C.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===C.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,r),r}makeCancelError(){let e=new Error(Ts.Canceled);return e.name=Ts.Canceled,e}};gt.BaseLanguageClient=Ts;Ts.Canceled="Canceled"});var VI=y(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.ColorProviderFeature=void 0;var xf=require("vscode"),$c=rt(),A3=Pr();function KI(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Wv=class extends A3.TextDocumentFeature{constructor(e){super(e,$c.DocumentColorRequest.type)}fillClientCapabilities(e){KI(KI(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideColorPresentations:(n,i,s)=>{let o=this._client,a=(u,d,p)=>{let m={color:u,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:o.code2ProtocolConverter.asRange(d.range)};return o.sendRequest($c.ColorPresentationRequest.type,m,p).then(this.asColorPresentations.bind(this),v=>o.handleFailedRequest($c.ColorPresentationRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,i,s,a):a(n,i,s)},provideDocumentColors:(n,i)=>{let s=this._client,o=(c,u)=>{let d={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest($c.DocumentColorRequest.type,d,u).then(this.asColorInformations.bind(this),p=>s.handleFailedRequest($c.ColorPresentationRequest.type,p,null))},a=s.clientOptions.middleware;return a.provideDocumentColors?a.provideDocumentColors(n,i,o):o(n,i)}};return[xf.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new xf.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new xf.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new xf.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};qf.ColorProviderFeature=Wv});var XI=y(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.ImplementationFeature=void 0;var N3=require("vscode"),zv=rt(),k3=Pr();function GI(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Kv=class extends k3.TextDocumentFeature{constructor(e){super(e,zv.ImplementationRequest.type)}fillClientCapabilities(e){let r=GI(GI(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideImplementation:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(zv.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(zv.ImplementationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,i,s,a):a(n,i,s)}};return[N3.languages.registerImplementationProvider(e.documentSelector,r),r]}};Of.ImplementationFeature=Kv});var YI=y(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.TypeDefinitionFeature=void 0;var L3=require("vscode"),Vv=rt(),M3=Pr();function Af(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Gv=class extends M3.TextDocumentFeature{constructor(e){super(e,Vv.TypeDefinitionRequest.type)}fillClientCapabilities(e){Af(Af(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=Af(Af(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(Vv.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(Vv.TypeDefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,i,s,a):a(n,i,s)}};return[L3.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};Nf.TypeDefinitionFeature=Gv});var QI=y(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.WorkspaceFoldersFeature=ea.arrayDiff=void 0;var F3=Tf(),kf=require("vscode"),Xv=rt();function Yv(t,e){if(t!==void 0)return t[e]}function Qv(t,e){return t.filter(r=>e.indexOf(r)<0)}ea.arrayDiff=Qv;var Jv=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Xv.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=kf.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Xv.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=kf.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},a=r.clientOptions.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let n=Yv(Yv(Yv(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=F3.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=Qv(this._initialFolders,e),n=Qv(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};this._client.sendNotification(Xv.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let r=e.id,n=this._client,i=kf.workspace.onDidChangeWorkspaceFolders(s=>{let o=c=>{this.doSendEvent(c.added,c.removed)},a=n.clientOptions.middleware.workspace;a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)});this._listeners.set(r,i),this.sendInitialEvent(kf.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ea.WorkspaceFoldersFeature=Jv});var ZI=y(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.FoldingRangeFeature=void 0;var Hc=require("vscode"),ta=rt(),j3=Pr();function JI(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var ra=class extends j3.TextDocumentFeature{constructor(e){super(e,ta.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=JI(JI(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,i,s)=>{let o=this._client,a=(u,d,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u)};return o.sendRequest(ta.FoldingRangeRequest.type,m,p).then(ra.asFoldingRanges,v=>o.handleFailedRequest(ta.FoldingRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,i,s,a):a(n,i,s)}};return[Hc.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}static asFoldingRangeKind(e){if(e)switch(e){case ta.FoldingRangeKind.Comment:return Hc.FoldingRangeKind.Comment;case ta.FoldingRangeKind.Imports:return Hc.FoldingRangeKind.Imports;case ta.FoldingRangeKind.Region:return Hc.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new Hc.FoldingRange(r.startLine,r.endLine,ra.asFoldingRangeKind(r.kind))):[]}};Lf.FoldingRangeFeature=ra});var tP=y(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.DeclarationFeature=void 0;var $3=require("vscode"),Zv=rt(),H3=Pr();function eP(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var ey=class extends H3.TextDocumentFeature{constructor(e){super(e,Zv.DeclarationRequest.type)}fillClientCapabilities(e){let r=eP(eP(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideDeclaration:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(Zv.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asDeclarationResult,m=>o.handleFailedRequest(Zv.DeclarationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,i,s,a):a(n,i,s)}};return[$3.languages.registerDeclarationProvider(e.documentSelector,r),r]}};Mf.DeclarationFeature=ey});var nP=y(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.SelectionRangeFeature=void 0;var B3=require("vscode"),ty=rt(),U3=Pr();function rP(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var ry=class extends U3.TextDocumentFeature{constructor(e){super(e,ty.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=rP(rP(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,i,s)=>{let o=this._client,a=(u,d,p)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),positions:o.code2ProtocolConverter.asPositions(d)};return o.sendRequest(ty.SelectionRangeRequest.type,m,p).then(v=>o.protocol2CodeConverter.asSelectionRanges(v),v=>o.handleFailedRequest(ty.SelectionRangeRequest.type,v,null))},c=o.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,i,s,a):a(n,i,s)}};return[B3.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};Ff.SelectionRangeFeature=ry});var iP=y(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.ProgressFeature=void 0;var W3=rt(),z3=gv();function K3(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var ny=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){K3(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new z3.ProgressPart(this._client,i.token,r))};e.onRequest(W3.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};jf.ProgressFeature=ny});var oP=y($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.CallHierarchyFeature=void 0;var V3=require("vscode"),Rs=rt(),G3=Pr();function sP(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var iy=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let i=this.client,s=this.middleware,o=(a,c,u)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(Rs.CallHierarchyPrepareRequest.type,d,u).then(p=>i.protocol2CodeConverter.asCallHierarchyItems(p),p=>i.handleFailedRequest(Rs.CallHierarchyPrepareRequest.type,p,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,r,n,o):o(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Rs.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u),u=>n.handleFailedRequest(Rs.CallHierarchyIncomingCallsRequest.type,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,s):s(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Rs.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u),u=>n.handleFailedRequest(Rs.CallHierarchyOutgoingCallsRequest.type,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,r,s):s(e,r)}},sy=class extends G3.TextDocumentFeature{constructor(e){super(e,Rs.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=sP(sP(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new iy(r);return[V3.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};$f.CallHierarchyFeature=sy});var aP=y(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.SemanticTokensFeature=void 0;var Hf=require("vscode"),X3=Pr(),ae=rt(),Y3=Ei();function Bf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var oy=class extends X3.TextDocumentFeature{constructor(e){super(e,ae.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let r=Bf(Bf(e,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[ae.SemanticTokenTypes.namespace,ae.SemanticTokenTypes.type,ae.SemanticTokenTypes.class,ae.SemanticTokenTypes.enum,ae.SemanticTokenTypes.interface,ae.SemanticTokenTypes.struct,ae.SemanticTokenTypes.typeParameter,ae.SemanticTokenTypes.parameter,ae.SemanticTokenTypes.variable,ae.SemanticTokenTypes.property,ae.SemanticTokenTypes.enumMember,ae.SemanticTokenTypes.event,ae.SemanticTokenTypes.function,ae.SemanticTokenTypes.method,ae.SemanticTokenTypes.macro,ae.SemanticTokenTypes.keyword,ae.SemanticTokenTypes.modifier,ae.SemanticTokenTypes.comment,ae.SemanticTokenTypes.string,ae.SemanticTokenTypes.number,ae.SemanticTokenTypes.regexp,ae.SemanticTokenTypes.operator],r.tokenModifiers=[ae.SemanticTokenModifiers.declaration,ae.SemanticTokenModifiers.definition,ae.SemanticTokenModifiers.readonly,ae.SemanticTokenModifiers.static,ae.SemanticTokenModifiers.deprecated,ae.SemanticTokenModifiers.abstract,ae.SemanticTokenModifiers.async,ae.SemanticTokenModifiers.modification,ae.SemanticTokenModifiers.documentation,ae.SemanticTokenModifiers.defaultLibrary],r.formats=[ae.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,Bf(Bf(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,r){this._client.onRequest(ae.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(r,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let r=Y3.boolean(e.full)?e.full:e.full!==void 0,n=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Hf.EventEmitter,s=r?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(p,m)=>{let v=this._client,b=v.clientOptions.middleware,P=(j,A)=>{let D={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(j)};return v.sendRequest(ae.SemanticTokensRequest.type,D,A).then(O=>v.protocol2CodeConverter.asSemanticTokens(O),O=>v.handleFailedRequest(ae.SemanticTokensRequest.type,O,null))};return b.provideDocumentSemanticTokens?b.provideDocumentSemanticTokens(p,m,P):P(p,m)},provideDocumentSemanticTokensEdits:n?(p,m,v)=>{let b=this._client,P=b.clientOptions.middleware,j=(A,D,O)=>{let x={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(A),previousResultId:D};return b.sendRequest(ae.SemanticTokensDeltaRequest.type,x,O).then(H=>ae.SemanticTokens.is(H)?b.protocol2CodeConverter.asSemanticTokens(H):b.protocol2CodeConverter.asSemanticTokensEdits(H),H=>b.handleFailedRequest(ae.SemanticTokensDeltaRequest.type,H,null))};return P.provideDocumentSemanticTokensEdits?P.provideDocumentSemanticTokensEdits(p,m,v,j):j(p,m,v)}:void 0}:void 0,a=e.range===!0?{provideDocumentRangeSemanticTokens:(p,m,v)=>{let b=this._client,P=b.clientOptions.middleware,j=(A,D,O)=>{let x={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(A),range:b.code2ProtocolConverter.asRange(D)};return b.sendRequest(ae.SemanticTokensRangeRequest.type,x,O).then(H=>b.protocol2CodeConverter.asSemanticTokens(H),H=>b.handleFailedRequest(ae.SemanticTokensRangeRequest.type,H,null))};return P.provideDocumentRangeSemanticTokens?P.provideDocumentRangeSemanticTokens(p,m,v,j):j(p,m,v)}}:void 0,c=[],d=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&c.push(Hf.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,d)),a!==void 0&&c.push(Hf.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,d)),[new Hf.Disposable(()=>c.forEach(p=>p.dispose())),{range:a,full:s,onDidChangeSemanticTokensEmitter:i}]}};Uf.SemanticTokensFeature=oy});var uP=y((SK,cP)=>{cP.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);Q3(i)?r.push.apply(r,i):r.push(i)}return r};var Q3=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var hP=y((bK,pP)=>{"use strict";pP.exports=fP;function fP(t,e,r){t instanceof RegExp&&(t=lP(t,r)),e instanceof RegExp&&(e=lP(e,r));var n=dP(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function lP(t,e){var r=e.match(t);return r?r[0]:null}fP.range=dP;function dP(t,e,r){var n,i,s,o,a,c=r.indexOf(t),u=r.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],s=r.length;d>=0&&!a;)d==c?(n.push(d),c=r.indexOf(t,d+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<s&&(s=i,o=u),u=r.indexOf(e,d+1)),d=c<u&&c>=0?c:u;n.length&&(a=[s,o])}return a}});var CP=y((TK,wP)=>{var J3=uP(),gP=hP();wP.exports=t4;var mP="\0SLASH"+Math.random()+"\0",vP="\0OPEN"+Math.random()+"\0",cy="\0CLOSE"+Math.random()+"\0",yP="\0COMMA"+Math.random()+"\0",_P="\0PERIOD"+Math.random()+"\0";function ay(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Z3(t){return t.split("\\\\").join(mP).split("\\{").join(vP).split("\\}").join(cy).split("\\,").join(yP).split("\\.").join(_P)}function e4(t){return t.split(mP).join("\\").split(vP).join("{").split(cy).join("}").split(yP).join(",").split(_P).join(".")}function EP(t){if(!t)return[""];var e=[],r=gP("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=EP(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function t4(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),na(Z3(t),!0).map(e4)):[]}function r4(t){return"{"+t+"}"}function n4(t){return/^-?0\d/.test(t)}function i4(t,e){return t<=e}function s4(t,e){return t>=e}function na(t,e){var r=[],n=gP("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=i||s,a=n.body.indexOf(",")>=0;if(!o&&!a)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+cy+n.post,na(t)):[t];var c;if(o)c=n.body.split(/\.\./);else if(c=EP(n.body),c.length===1&&(c=na(c[0],!1).map(r4),c.length===1)){var d=n.post.length?na(n.post,!1):[""];return d.map(function(ot){return n.pre+c[0]+ot})}var u=n.pre,d=n.post.length?na(n.post,!1):[""],p;if(o){var m=ay(c[0]),v=ay(c[1]),b=Math.max(c[0].length,c[1].length),P=c.length==3?Math.abs(ay(c[2])):1,j=i4,A=v<m;A&&(P*=-1,j=s4);var D=c.some(n4);p=[];for(var O=m;j(O,v);O+=P){var x;if(s)x=String.fromCharCode(O),x==="\\"&&(x="");else if(x=String(O),D){var H=b-x.length;if(H>0){var le=new Array(H+1).join("0");O<0?x="-"+le+x.slice(1):x=le+x}}p.push(x)}}else p=J3(c,function(mt){return na(mt,!1)});for(var Ne=0;Ne<p.length;Ne++)for(var Ke=0;Ke<d.length;Ke++){var Te=u+p[Ne]+d[Ke];(!e||o||Te)&&r.push(Te)}return r}});var IP=y((RK,DP)=>{DP.exports=xr;xr.Minimatch=Ut;var Bc=function(){try{return require("path")}catch{}}()||{sep:"/"};xr.sep=Bc.sep;var fy=xr.GLOBSTAR=Ut.GLOBSTAR={},o4=CP(),SP={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},uy="[^/]",ly=uy+"*?",a4="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",c4="(?:(?!(?:\\/|^)\\.).)*?",bP=u4("().*{}+?[]^$\\!");function u4(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var TP=/\/+/;xr.filter=l4;function l4(t,e){return e=e||{},function(r,n,i){return xr(r,t,e)}}function Ri(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}xr.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return xr;var e=xr,r=function(i,s,o){return e(i,s,Ri(t,o))};return r.Minimatch=function(i,s){return new e.Minimatch(i,Ri(t,s))},r.Minimatch.defaults=function(i){return e.defaults(Ri(t,i)).Minimatch},r.filter=function(i,s){return e.filter(i,Ri(t,s))},r.defaults=function(i){return e.defaults(Ri(t,i))},r.makeRe=function(i,s){return e.makeRe(i,Ri(t,s))},r.braceExpand=function(i,s){return e.braceExpand(i,Ri(t,s))},r.match=function(n,i,s){return e.match(n,i,Ri(t,s))},r};Ut.defaults=function(t){return xr.defaults(t).Minimatch};function xr(t,e,r){return zf(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new Ut(e,r).match(t)}function Ut(t,e){if(!(this instanceof Ut))return new Ut(t,e);zf(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Bc.sep!=="/"&&(t=t.split(Bc.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Ut.prototype.debug=function(){};Ut.prototype.make=f4;function f4(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(TP)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Ut.prototype.parseNegate=d4;function d4(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}xr.braceExpand=function(t,e){return RP(t,e)};Ut.prototype.braceExpand=RP;function RP(t,e){return e||(this instanceof Ut?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,zf(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:o4(t)}var p4=1024*64,zf=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>p4)throw new TypeError("pattern is too long")};Ut.prototype.parse=h4;var Wf={};function h4(t,e){zf(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return fy;if(t==="")return"";var n="",i=!!r.nocase,s=!1,o=[],a=[],c,u=!1,d=-1,p=-1,m=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function b(){if(c){switch(c){case"*":n+=ly,i=!0;break;case"?":n+=uy,i=!0;break;default:n+="\\"+c;break}v.debug("clearStateChar %j %j",c,n),c=!1}}for(var P=0,j=t.length,A;P<j&&(A=t.charAt(P));P++){if(this.debug("%s	%s %s %j",t,P,n,A),s&&bP[A]){n+="\\"+A,s=!1;continue}switch(A){case"/":return!1;case"\\":b(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,P,n,A),u){this.debug("  in class"),A==="!"&&P===p+1&&(A="^"),n+=A;continue}v.debug("call clearStateChar %j",c),b(),c=A,r.noext&&b();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}o.push({type:c,start:P-1,reStart:n.length,open:SP[c].open,close:SP[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!o.length){n+="\\)";continue}b(),i=!0;var D=o.pop();n+=D.close,D.type==="!"&&a.push(D),D.reEnd=n.length;continue;case"|":if(u||!o.length||s){n+="\\|",s=!1;continue}b(),n+="|";continue;case"[":if(b(),u){n+="\\"+A;continue}u=!0,p=P,d=n.length,n+=A;continue;case"]":if(P===p+1||!u){n+="\\"+A,s=!1;continue}var O=t.substring(p+1,P);try{RegExp("["+O+"]")}catch{var x=this.parse(O,Wf);n=n.substr(0,d)+"\\["+x[0]+"\\]",i=i||x[1],u=!1;continue}i=!0,u=!1,n+=A;continue;default:b(),s?s=!1:bP[A]&&!(A==="^"&&u)&&(n+="\\"),n+=A}}for(u&&(O=t.substr(p+1),x=this.parse(O,Wf),n=n.substr(0,d)+"\\["+x[0],i=i||x[1]),D=o.pop();D;D=o.pop()){var H=n.slice(D.reStart+D.open.length);this.debug("setting tail",n,D),H=H.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ct,Rt,zt){return zt||(zt="\\"),Rt+Rt+zt+"|"}),this.debug(`tail=%j
   %s`,H,H,D,n);var le=D.type==="*"?ly:D.type==="?"?uy:"\\"+D.type;i=!0,n=n.slice(0,D.reStart)+le+"\\("+H}b(),s&&(n+="\\\\");var Ne=!1;switch(n.charAt(0)){case"[":case".":case"(":Ne=!0}for(var Ke=a.length-1;Ke>-1;Ke--){var Te=a[Ke],mt=n.slice(0,Te.reStart),ot=n.slice(Te.reStart,Te.reEnd-8),At=n.slice(Te.reEnd-8,Te.reEnd),Nt=n.slice(Te.reEnd);At+=Nt;var kt=mt.split("(").length-1,at=Nt;for(P=0;P<kt;P++)at=at.replace(/\)[+*?]?/,"");Nt=at;var Lt="";Nt===""&&e!==Wf&&(Lt="$");var Oe=mt+ot+Nt+Lt+At;n=Oe}if(n!==""&&i&&(n="(?=.)"+n),Ne&&(n=m+n),e===Wf)return[n,i];if(!i)return m4(t);var wr=r.nocase?"i":"";try{var He=new RegExp("^"+n+"$",wr)}catch{return new RegExp("$.")}return He._glob=t,He._src=n,He}xr.makeRe=function(t,e){return new Ut(t,e||{}).makeRe()};Ut.prototype.makeRe=g4;function g4(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?ly:e.dot?a4:c4,n=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===fy?r:typeof o=="string"?v4(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}xr.match=function(t,e,r){r=r||{};var n=new Ut(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};Ut.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;Bc.sep!=="/"&&(e=e.split(Bc.sep).join("/")),e=e.split(TP),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],c=e;n.matchBase&&a.length===1&&(c=[s]);var u=this.matchOne(c,a,r);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Ut.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var c=e[s],u=t[i];if(this.debug(e,c,u),c===!1)return!1;if(c===fy){this.debug("GLOBSTAR",[e,c,u]);var d=i,p=s+1;if(p===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;d<o;){var m=t[d];if(this.debug(`
globstar while`,t,d,e,p,m),this.matchOne(t.slice(d),e.slice(p),r))return this.debug("globstar found match!",d,o,m),!0;if(m==="."||m===".."||!n.dot&&m.charAt(0)==="."){this.debug("dot detected!",t,d,e,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,d,e,p),d===o))}var v;if(typeof c=="string"?(v=u===c,this.debug("string match",c,u,v)):(v=u.match(c),this.debug("pattern match",c,u,v)),!v)return!1}if(i===o&&s===a)return!0;if(i===o)return r;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function m4(t){return t.replace(/\\(.)/g,"$1")}function v4(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var qP=y(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.WillDeleteFilesFeature=_r.WillRenameFilesFeature=_r.WillCreateFilesFeature=_r.DidDeleteFilesFeature=_r.DidRenameFilesFeature=_r.DidCreateFilesFeature=void 0;var Rn=require("vscode"),y4=IP(),ti=rt(),_4=Tf();function PP(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function E4(t,e){return t[e]}function xP(t,e,r){t[e]=r}var Di=class{constructor(e,r,n,i,s){this._filters=new Map,this._client=e,this._event=r,this._registrationType=n,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let r=PP(PP(e,"workspace"),"fileOperations");xP(r,"dynamicRegistration",!0),xP(r,this._clientCapability,!0)}initialize(e){var r;let n=(r=e.workspace)===null||r===void 0?void 0:r.fileOperations,i=n!==void 0?E4(n,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:_4.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let r=e.registerOptions.filters.map(n=>{let i=new y4.Minimatch(n.pattern.glob,Di.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,r)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,r){let n=await Promise.all(e.files.map(async s=>{let o=r(s),a=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==o.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let d=await Di.getFileType(o);if(d===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(d===Rn.FileType.File&&u.kind===ti.FileOperationPatternKind.file||d===Rn.FileType.Directory&&u.kind===ti.FileOperationPatternKind.folder)return!0}else if(u.kind===ti.FileOperationPatternKind.folder&&await Di.getFileType(o)===Rn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>n[o]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await Rn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Uc=class extends Di{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._notificationType=n,this._accessUri=o,this._createParams=a}async send(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(r,n)}}},dy=class extends Uc{constructor(e){super(e,Rn.workspace.onDidCreateFiles,ti.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didCreateFiles?i.didCreateFiles(e,r):r(e)}};_r.DidCreateFilesFeature=dy;var py=class extends Uc{constructor(e){super(e,Rn.workspace.onDidRenameFiles,ti.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didRenameFiles?i.didRenameFiles(e,r):r(e)}};_r.DidRenameFilesFeature=py;var hy=class extends Uc{constructor(e){super(e,Rn.workspace.onDidDeleteFiles,ti.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didDeleteFiles?i.didDeleteFiles(e,r):r(e)}};_r.DidDeleteFilesFeature=hy;var Wc=class extends Di{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._requestType=n,this._accessUri=o,this._createParams=a}async send(e){let r=this.waitUntil(e);e.waitUntil(r)}async waitUntil(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},gy=class extends Wc{constructor(e){super(e,Rn.workspace.onWillCreateFiles,ti.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willCreateFiles?i.willCreateFiles(e,r):r(e)}};_r.WillCreateFilesFeature=gy;var my=class extends Wc{constructor(e){super(e,Rn.workspace.onWillRenameFiles,ti.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willRenameFiles?i.willRenameFiles(e,r):r(e)}};_r.WillRenameFilesFeature=my;var vy=class extends Wc{constructor(e){super(e,Rn.workspace.onWillDeleteFiles,ti.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willDeleteFiles?i.willDeleteFiles(e,r):r(e)}};_r.WillDeleteFilesFeature=vy});var AP=y(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.LinkedEditingFeature=void 0;var w4=require("vscode"),yy=rt(),C4=Pr();function OP(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var _y=class extends C4.TextDocumentFeature{constructor(e){super(e,yy.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let r=OP(OP(e,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideLinkedEditingRanges:(n,i,s)=>{let o=this._client,a=(u,d,p)=>o.sendRequest(yy.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,d),p).then(o.protocol2CodeConverter.asLinkedEditingRanges,m=>o.handleFailedRequest(yy.LinkedEditingRangeRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,i,s,a):a(n,i,s)}};return[w4.languages.registerLinkedEditingRangeProvider(e.documentSelector,r),r]}};Kf.LinkedEditingFeature=_y});var wy=y(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.ProposedFeatures=Ds.CommonLanguageClient=void 0;var S4=Pr(),b4=VI(),T4=Vm(),R4=XI(),D4=YI(),I4=QI(),P4=ZI(),x4=tP(),q4=nP(),O4=iP(),A4=oP(),N4=aP(),ia=qP(),k4=AP(),Ey=class extends S4.BaseLanguageClient{constructor(e,r,n){super(e,r,n)}registerProposedFeatures(){this.registerFeatures(NP.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new T4.ConfigurationFeature(this)),this.registerFeature(new D4.TypeDefinitionFeature(this)),this.registerFeature(new R4.ImplementationFeature(this)),this.registerFeature(new b4.ColorProviderFeature(this)),this.registerFeature(new I4.WorkspaceFoldersFeature(this)),this.registerFeature(new P4.FoldingRangeFeature(this)),this.registerFeature(new x4.DeclarationFeature(this)),this.registerFeature(new q4.SelectionRangeFeature(this)),this.registerFeature(new O4.ProgressFeature(this)),this.registerFeature(new A4.CallHierarchyFeature(this)),this.registerFeature(new N4.SemanticTokensFeature(this)),this.registerFeature(new k4.LinkedEditingFeature(this)),this.registerFeature(new ia.DidCreateFilesFeature(this)),this.registerFeature(new ia.DidRenameFilesFeature(this)),this.registerFeature(new ia.DidDeleteFilesFeature(this)),this.registerFeature(new ia.WillCreateFilesFeature(this)),this.registerFeature(new ia.WillRenameFilesFeature(this)),this.registerFeature(new ia.WillDeleteFilesFeature(this))}};Ds.CommonLanguageClient=Ey;var NP;(function(t){function e(r){return[]}t.createAll=e})(NP=Ds.ProposedFeatures||(Ds.ProposedFeatures={}))});var LP=y(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.terminate=void 0;var kP=require("child_process"),L4=require("path"),M4=process.platform==="win32",F4=process.platform==="darwin",j4=process.platform==="linux";function $4(t,e){if(M4)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),kP.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(j4||F4)try{var r=L4.join(__dirname,"terminateProcess.sh"),n=kP.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}Vf.terminate=$4});var Cy=y((qK,MP)=>{"use strict";MP.exports=rt()});var FP=y(ri=>{"use strict";var H4=ri&&ri.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sy=ri&&ri.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H4(e,t,r)};Object.defineProperty(ri,"__esModule",{value:!0});Sy(rt(),ri);Sy(Pr(),ri);Sy(wy(),ri)});var BP=y(fr=>{"use strict";var B4=fr&&fr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HP=fr&&fr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&B4(e,t,r)};Object.defineProperty(fr,"__esModule",{value:!0});fr.SettingMonitor=fr.LanguageClient=fr.TransportKind=void 0;var Is=require("child_process"),by=require("fs"),Ty=require("path"),jP=SD(),Ii=require("vscode"),St=Ei(),U4=wy(),W4=Pr(),z4=LP(),Ct=Cy();HP(Cy(),fr);HP(FP(),fr);var $P="^1.52.0",Ry;(function(t){function e(r){return St.string(r.command)}t.is=e})(Ry||(Ry={}));var Wt;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Wt=fr.TransportKind||(fr.TransportKind={}));var sa;(function(t){function e(r){let n=r;return n&&n.kind===Wt.socket&&St.number(n.port)}t.isSocket=e})(sa||(sa={}));var Dy;(function(t){function e(r){return St.string(r.module)}t.is=e})(Dy||(Dy={}));var Iy;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(Iy||(Iy={}));var Py;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(Py||(Py={}));var xy=class extends U4.CommonLanguageClient{constructor(e,r,n,i,s){let o,a,c,u,d;St.string(r)?(o=e,a=r,c=n,u=i,d=!!s):(o=e.toLowerCase(),a=e,c=r,u=n,d=i),d===void 0&&(d=!1),super(o,a,u),this._serverOptions=c,this._forceDebug=d;try{this.checkVersion()}catch(p){throw St.string(p.message)&&this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=jP.parse(Ii.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Ii.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!jP.satisfies(e,$P))throw new Error(`The language client requires VS Code version ${$P} but received version ${Ii.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),z4.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(d,p){if(!d&&!p)return;let m=Object.create(null);return Object.keys(process.env).forEach(v=>m[v]=process.env[v]),p&&(m.ELECTRON_RUN_AS_NODE="1",m.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(v=>m[v]=d[v]),m}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let d=process.execArgv;return d?d.some(p=>n.some(m=>p.startsWith(m))||i.some(m=>p===m)):!1}function o(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(St.func(a))return a().then(d=>{if(W4.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(Iy.is(d))return this._isDetached=!!d.detached,{reader:new Ct.StreamMessageReader(d.reader),writer:new Ct.StreamMessageWriter(d.writer)};{let p;return Py.is(d)?(p=d.process,this._isDetached=d.detached):(p=d,this._isDetached=!1),p.stderr.on("data",m=>this.outputChannel.append(St.string(m)?m:m.toString(e))),{reader:new Ct.StreamMessageReader(p.stdout),writer:new Ct.StreamMessageWriter(p.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||s()?c=u.debug:c=u.run:c=a,this._getServerWorkingDir(c.options).then(d=>{if(Dy.is(c)&&c.module){let p=c,m=p.transport||Wt.stdio;if(p.runtime){let v=[],b=p.options||Object.create(null);b.execArgv&&b.execArgv.forEach(D=>v.push(D)),v.push(p.module),p.args&&p.args.forEach(D=>v.push(D));let P=Object.create(null);P.cwd=d,P.env=r(b.env,!1);let j=this._getRuntimePath(p.runtime,d),A;if(m===Wt.ipc?(P.stdio=[null,null,null,"ipc"],v.push("--node-ipc")):m===Wt.stdio?v.push("--stdio"):m===Wt.pipe?(A=Ct.generateRandomPipeName(),v.push(`--pipe=${A}`)):sa.isSocket(m)&&v.push(`--socket=${m.port}`),v.push(`--clientProcessId=${process.pid.toString()}`),m===Wt.ipc||m===Wt.stdio){let D=Is.spawn(j,v,P);return!D||!D.pid?Promise.reject(`Launching server using runtime ${j} failed.`):(this._serverProcess=D,D.stderr.on("data",O=>this.outputChannel.append(St.string(O)?O:O.toString(e))),m===Wt.ipc?(D.stdout.on("data",O=>this.outputChannel.append(St.string(O)?O:O.toString(e))),Promise.resolve({reader:new Ct.IPCMessageReader(D),writer:new Ct.IPCMessageWriter(D)})):Promise.resolve({reader:new Ct.StreamMessageReader(D.stdout),writer:new Ct.StreamMessageWriter(D.stdin)}))}else{if(m===Wt.pipe)return Ct.createClientPipeTransport(A).then(D=>{let O=Is.spawn(j,v,P);return!O||!O.pid?Promise.reject(`Launching server using runtime ${j} failed.`):(this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),D.onConnected().then(x=>({reader:x[0],writer:x[1]})))});if(sa.isSocket(m))return Ct.createClientSocketTransport(m.port).then(D=>{let O=Is.spawn(j,v,P);return!O||!O.pid?Promise.reject(`Launching server using runtime ${j} failed.`):(this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),D.onConnected().then(x=>({reader:x[0],writer:x[1]})))})}}else{let v;return new Promise((b,P)=>{let j=p.args&&p.args.slice()||[];m===Wt.ipc?j.push("--node-ipc"):m===Wt.stdio?j.push("--stdio"):m===Wt.pipe?(v=Ct.generateRandomPipeName(),j.push(`--pipe=${v}`)):sa.isSocket(m)&&j.push(`--socket=${m.port}`),j.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options||Object.create(null);if(A.env=r(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=d,A.silent=!0,m===Wt.ipc||m===Wt.stdio){let D=Is.fork(p.module,j||[],A);o(D),this._serverProcess=D,D.stderr.on("data",O=>this.outputChannel.append(St.string(O)?O:O.toString(e))),m===Wt.ipc?(D.stdout.on("data",O=>this.outputChannel.append(St.string(O)?O:O.toString(e))),b({reader:new Ct.IPCMessageReader(this._serverProcess),writer:new Ct.IPCMessageWriter(this._serverProcess)})):b({reader:new Ct.StreamMessageReader(D.stdout),writer:new Ct.StreamMessageWriter(D.stdin)})}else m===Wt.pipe?Ct.createClientPipeTransport(v).then(D=>{let O=Is.fork(p.module,j||[],A);o(O),this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),D.onConnected().then(x=>{b({reader:x[0],writer:x[1]})})}):sa.isSocket(m)&&Ct.createClientSocketTransport(m.port).then(D=>{let O=Is.fork(p.module,j||[],A);o(O),this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(St.string(x)?x:x.toString(e))),D.onConnected().then(x=>{b({reader:x[0],writer:x[1]})})})})}}else if(Ry.is(c)&&c.command){let p=c,m=p.args||[],v=Object.assign({},p.options);v.cwd=v.cwd||d;let b=Is.spawn(p.command,m,v);return!b||!b.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(b.stderr.on("data",P=>this.outputChannel.append(St.string(P)?P:P.toString(e))),this._serverProcess=b,this._isDetached=!!v.detached,Promise.resolve({reader:new Ct.StreamMessageReader(b.stdout),writer:new Ct.StreamMessageWriter(b.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,r){if(Ty.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=Ty.join(n,e);if(by.existsSync(i))return i}if(r!==void 0){let i=Ty.join(r,e);if(by.existsSync(i))return i}return e}_mainGetRootPath(){let e=Ii.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{by.lstat(r,(i,s)=>{n(!i&&s.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let r;try{r=JSON.parse(e)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};fr.LanguageClient=xy;var qy=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return Ii.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Ii.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?Ii.workspace.getConfiguration(r).get(n,!1):Ii.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};fr.SettingMonitor=qy});var WP=y((NK,UP)=>{"use strict";UP.exports=BP()});var Q4={};sx(Q4,{activate:()=>X4,deactivate:()=>Y4});module.exports=ox(Q4);var YP=require("vscode");var t_=require("vscode"),r_=Os(Yf());function On(t){return t.map(e=>String.fromCharCode(e)).join("")}function n_(t){return t&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function i_(t,e){let r=new r_.XMLHttpRequest;return r.open("POST",t.toString(!0),!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),new Promise(n=>{r.onreadystatechange=function(){this.readyState==4&&n(this.status)},r.ontimeout=()=>{n(void 0)},r.timeout=5e3,r.send(e)})}function id(t,e){e==!0&&(t=t.with({query:"from=vscode"})),e_()(t.toString(!0))}function sd(t){return t&&t!=""&&t_.extensions.getExtension(t)!=null}function s_(t,e){var r=new Date(t);return r.setDate(r.getDate()+e),r}var bu=require("vscode"),h0=Os(Yf());var la=require("os");var _d="dev1",g0=[45,45,45,45,45,66,69,71,73,78,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45,10,77,73,71,102,77,65,48,71,67,83,113,71,83,73,98,51,68,81,69,66,65,81,85,65,65,52,71,78,65,68,67,66,105,81,75,66,103,81,67,118,67,119,109,55,98,72,43,79,117,73,70,67,77,102,68,85,79,48,121,86,85,84,104,73,10,90,113,50,116,122,50,84,81,73,50,85,100,50,80,103,69,107,104,55,74,100,111,51,51,80,77,49,50,67,76,66,108,71,86,89,106,105,107,82,65,100,112,75,118,104,105,115,66,48,101,43,102,47,51,119,43,73,116,56,109,115,74,114,67,10,86,84,114,120,75,116,88,116,65,70,83,115,83,55,51,83,110,110,98,121,74,89,121,105,120,114,115,69,67,65,85,121,101,116,122,99,71,52,116,54,52,47,48,57,108,74,117,110,79,97,85,106,71,98,74,80,50,87,116,106,51,47,116,50,10,57,90,99,67,122,119,68,85,84,89,81,43,56,56,78,102,48,81,73,68,65,81,65,66,10,45,45,45,45,45,69,78,68,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45],Su=[112,104,112,84,111,111,108,115,46,108,105,99,101,110,115,101],bO=[104,116,116,112,115,58,47,47,97,112,105,46,100,101,118,115,101,110,115,101,46,99,111,109,47,108,105,99,101,110,115,101,47],TO=[38,109,97,99,104,105,110,101,95,105,100,61];function RO(t){if(t){var e=t.name+"#"+t.license+"#"+t.expiration,r=Buffer.from(t.signature,"base64").toString("binary");return new(vd())(On(g0)).verify(e,r,"utf8","binary")}else return!1}function m0(t){return new(vd())(On(g0)).encrypt(t,"base64")}function DO(t){return Q(this,null,function*(){try{let e=JSON.parse(t.globalState.get(_d+On(Su)+"."+(0,la.userInfo)().username)||t.globalState.get(_d+On(Su))||bu.workspace.getConfiguration().get(On(Su)));return e&&(e.name=yd()((0,la.userInfo)().username)),e}catch(e){return}})}function v0(t,e){return Q(this,null,function*(){yield t.globalState.update(_d+On(Su)+"."+(0,la.userInfo)().username,e)})}function zs(t){return Q(this,null,function*(){let e=yield DO(t);if(e)return RO(e)?new Date>new Date(e.expiration)?3417:7134:1743;if(t.extension.id.toLowerCase()!="devsense.phptools-vscode".toLowerCase()){let r=bu.extensions.getExtension("devsense.phptools-vscode");if(r&&r.activate){let n=yield r.activate();if(n&&n.authentication)return yield n.authentication()}}return 4731})}function y0(t,e,r,n){return Q(this,null,function*(){if(!r){yield n==null?void 0:n.onfail("empty");return}let i=`method=${t}`+On(TO)+yd()((0,la.userInfo)().username)+`&${e}=${r}`,s=`${On(bO)}?${i}`,o=new h0.XMLHttpRequest;o.open("GET",s,!0),yield new Promise(a=>{o.onreadystatechange=function(){return Q(this,null,function*(){if(this.readyState==4){if(this.status==200)yield n.onsuccess(this.responseText);else{var c,u;switch(this.status){case 404:case 401:c="invalid";break;case 403:c="access";break;case 500:c="error";break;case 0:c="connection_error";break;default:c="unknown_error";break}if(this.responseText)try{let d=JSON.parse(this.responseText);d.message&&(u=d.message)}catch(d){}yield n.onfail(c,u)}a()}})},o.ontimeout=()=>Q(this,null,function*(){yield n.onfail("timeout"),a(void 0)}),o.timeout=5e3,o.send()})})}var _0=require("fs");var Ed=class{constructor(){this.dictionary={};this.locale="en";try{if(process&&process.env){let e=JSON.parse(process.env.VSCODE_NLS_CONFIG);e&&typeof e.locale=="string"&&(this.locale=e.locale)}}catch(e){}}read_i18n(e){try{let r=Buffer.from((0,_0.readFileSync)(e)).toString("utf-8");return JSON.parse(r)}catch(r){return{}}}localize(e){let r=this.dictionary[e];if(typeof r=="string")return r}load(e){try{this.dictionary=Object.assign({},this.read_i18n(e.asAbsolutePath("package.nls.json")),this.read_i18n(e.asAbsolutePath("package.nls.en.json")),this.read_i18n(e.asAbsolutePath(`package.nls.${this.locale}.json`)))}catch(r){}}},E0=new Ed;function w0(t){return Q(this,null,function*(){yield E0.load(t)})}function vt(t,e){return IO(t,e)}function IO(t,e){var r,n;return(n=(r=E0.localize(t))!=null?r:e)!=null?n:t}var di=class{constructor(){this.disposables=[];this.disposed=!1}isDisposed(){return this.disposed}push(...e){this.disposables.push(...e)}onDispose(){}dispose(){try{this.onDispose()}catch(e){}for(let e of this.disposables)e.dispose();this.disposables=[],this.disposed=!0}};var Bl=Os(Mb()),dg=require("os"),Ul=require("vscode"),mT=Os(oT());var $l=require("vscode");function aT(t){return t.map(e=>String.fromCharCode(e)).join("")}function cT(t){return new $l.Range(t.start.line,t.start.character,t.end.line,t.end.character)}function uT(t){let e=t.reduce((i,s)=>i+s,0)/t.length,n=t.map(i=>My(i-e,2)).reduce((i,s)=>i+s,0)/t.length;return Math.sqrt(n)}function lT(t,e,r){let n=t.trim();for(let i=r.line-1;i>=0;i--){let s=e.lineAt(i);if(!s.isEmptyOrWhitespace)return s.text.trim()===n}return!1}function fT(t,e,r){let n=t.trim();for(let i=r.line+1;i<e.lineCount;i++){let s=e.lineAt(i);if(!s.isEmptyOrWhitespace)return s.text.trim()===n}return!1}function dT(t){return t.trim()===""}function pT(){return Q(this,null,function*(){try{yield $l.commands.executeCommand("editor.action.triggerParameterHints")}catch(t){console.error("Error opening Signature Help:",t)}})}var pg=Os(pp());var Cn,HF=[101,56,52,97,53,57,53,55,45,100,54,56,48,45,52,99,99,53,45,57,50,54,55,45,53,101,53,101,51,100,48,97,56,100,53,55],Hl={};function fg(t){return Ul.extensions.getExtension(t)!==void 0}function vT(t){Bl.Configuration.setAutoCollectExceptions(!0).setUseDiskRetryCaching(!0).setAutoCollectConsole(!0,!0).setInternalLogging(!0,!0),Cn=new Bl.TelemetryClient(aT(HF)),Cn.context.tags["ai.device.model"]="Visual Studio Code "+Ul.version,Cn.context.tags["ai.user.id"]=(0,dg.userInfo)().username,Cn.context.tags["ai.user.accountId"]=gT()((0,dg.userInfo)().username).toString(),Cn.context.tags["ai.session.id"]=(0,mT.v1)(),Cn.commonProperties["process.platform"]=process.platform,Cn.commonProperties["process.arch"]=process.arch,Sn("extension loaded (IntelliPHP)",{"copilot.enabled":fg("github.copilot"),"php-tools.enabled":fg("devsense.phptools-vscode"),"intelephense.enabled":fg("bmewburn.vscode-intelephense-client")})}function Sn(t,e,r){e==null&&(e={});for(let i in Hl)e[i]=Hl[i];let n={name:t,properties:e};r&&(n.measurements=r),Cn.trackEvent(n)}function Wl(t,e,r){r==null&&(r={});for(let n in Hl)r[n]=Hl[n];Cn.trackException({exception:t,severity:e?pg.default.Critical:pg.default.Error,properties:r})}function zl(t,e,r,n,i,s){let o={name:t,value:e,count:r,min:n,max:i,stdDev:s};Cn.trackMetric(o)}var it=require("vscode");var yT=[")","]","}"],_T=["(","[","{"];function BF(t,e){let r=t.substring(e.length).split("");for(let n=0;n<r.length;n++)if(r[n]!==" ")return yT.includes(r[n])?r[n]:void 0}function UF(t){let e=t.split("");for(let r=t.length-1;r>0;r--)if(_T.includes(e[r]))return e[r]}function WF(t,e){let r=BF(t,e),n=UF(e);return n!==void 0&&r!==void 0&&yT.indexOf(r)===_T.indexOf(n)}function ET(t,e){return t.startsWith(e)&&t!==e&&!WF(t,e)}var Dr=require("vscode");var Ge=class{static get intelliphp_inlineSuggestionsEnabled_description(){return vt("intelliphp.inlineSuggestionsEnabled.description")}static get description(){return vt("description")}static get capabilities_untrustedWorkspaces_description(){return vt("capabilities.untrustedWorkspaces.description")}static get reactivate(){return vt("reactivate")}static get webview_title(){return vt("webview.title")}static get invalidMail(){return vt("invalidMail")}static get trial_expired(){return vt("trial.expired")}static get capabilities_virtualWorkspaces_description(){return vt("capabilities.virtualWorkspaces.description")}static get buy(){return vt("buy")}static get title(){return vt("title")}static get subscribe(){return vt("subscribe")}static get webview_welcome_more(){return vt("webview.welcome.more")}static get dismiss(){return vt("dismiss")}static get webview_welcome_allnews(){return vt("webview.welcome.allnews")}static get intelliphp_releasenotes_title(){return vt("intelliphp.releasenotes.title")}static get activate(){return vt("activate")}static get renew(){return vt("renew")}static get showmore(){return vt("showmore")}static get webview_welcome_showafterupdate(){return vt("webview.welcome.showafterupdate")}};var CT=new Dr.EventEmitter,ST=CT.event;function hg(t){return Q(this,null,function*(){if((yield zs(t))==7134)return;let e=t.globalState.get("intelliphp.texp",void 0);return(e==null||e==""||e==null||!e)&&(yield t.globalState.update("intelliphp.texp",e=s_(new Date,30).toUTCString())),e==null||e==""?void 0:new Date(e)})}function pc(t){return Q(this,null,function*(){if(t.globalState.get("intelliphp.previewused",!1)==!0||(yield zs(t))==7134)return!0;let e=yield hg(t);if(e){if(new Date<=new Date(e))return!0;VF(t)}return!1})}function VF(t){return Q(this,null,function*(){t.globalState.get("intelliphp.tnot")!=1&&(yield t.globalState.update("intelliphp.tnot",1),(yield Dr.window.showInformationMessage(Ge.trial_expired,Ge.activate,Ge.dismiss))==Ge.activate&&(yield Dr.commands.executeCommand("intelliphp.releasenotes")))})}function bT(t,e){return Q(this,null,function*(){if(!e)return;let r,n=!1;if(e.length>32)try{var i=JSON.parse(e);i.signature&&i.license&&(r=e)}catch(o){r=void 0}if(r||(yield Dr.window.withProgress({location:Dr.ProgressLocation.Notification,title:Ge.activate},()=>Q(this,null,function*(){yield y0("activate_vscode","key",m0(e).replace(/\+/g,"-").replace(/\//g,"|").replace(/=/g,"_"),{onsuccess:o=>Q(this,null,function*(){r=o}),onfail:(o,a)=>Q(this,null,function*(){Dr.window.showInformationMessage(a!=null?a:o)})})}))),r){yield v0(t,r);var s=yield zs(t);switch(CT.fire(n=s==7134),s){case 3417:Dr.window.showErrorMessage("The key is expired.");break;case 7134:Dr.window.showInformationMessage("Thank you!");break;default:Dr.window.showErrorMessage("Something went wrong");break}}return n})}var TT="IntelliPHP.postCompletionCommand",Kl=class extends di{constructor(r,n){super();this.context=r;this.client=n;this.telemetryData={completionRequested:0,completionCancelled:0,completionAccepted:0,completionSent:0,latency:[]};this.enabled=!0;this.license=!1;this.push(it.languages.registerInlineCompletionItemProvider({language:"php"},this),it.commands.registerCommand(TT,i=>Q(this,null,function*(){let{properties:s,measurements:o}=i;this.telemetryData.completionAccepted++,pT(),Sn("intelliphp.completionAccepted",s,o)})),it.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration("intelliphp.inlineSuggestionsEnabled")&&this.updateEnabledDisabled()}),it.window.onDidChangeActiveTextEditor(i=>{this.license==!1&&this.updateLicense()})),this.updateEnabledDisabled(),this.updateLicense()}updateEnabledDisabled(){this.enabled=it.workspace.getConfiguration().get("intelliphp.inlineSuggestionsEnabled",!0)!=!1}updateLicense(){return Q(this,null,function*(){this.license=yield pc(this.context)})}onDispose(){super.onDispose(),this._telemetryTimeout&&(clearInterval(this._telemetryTimeout),this._telemetryTimeout=void 0)}sendMeassurements(){let r=this.telemetryData.latency;if(r.length===0)return;let n=r.reduce((a,c)=>a+c,0)/r.length,i=Math.min(...r),s=Math.max(...r),o=uT(r);zl("intelliphp.latency",n,r.length,i,s,o),r.length=0,zl("intelliphp.surfaceRate",this.telemetryData.completionSent/this.telemetryData.completionRequested,this.telemetryData.completionSent),zl("intelliphp.acceptanceRate",this.telemetryData.completionAccepted/this.telemetryData.completionSent,this.telemetryData.completionSent),this.telemetryData.completionRequested=0,this.telemetryData.completionSent=0,this.telemetryData.completionAccepted=0,this.telemetryData.completionCancelled=0}getPostCompletionCommand(r){return{command:TT,title:"Post Completion Command",arguments:[r]}}isSuggestionReusable(r,n,i,s,o,a,c){if(r||n)return!1;c=c.replace(/\s+/g," "),a=a.replace(/\s+/g," "),o=o.replace(/\s+/g," ");let u=s!==void 0&&c.endsWith(s),d=s==null&&o.startsWith(c);return(i==null||i==s||u||d)&&o.startsWith(c)&&a!=o&&!dT(a)}provideInlineCompletionItems(r,n,i,s){return Q(this,null,function*(){var d,p;if(!this.enabled||!this.license)return[];try{let m=Date.now();this.telemetryData.completionRequested++;var o=r.lineAt(n.line).text,a=o.substring(0,n.character);if(ET(o,a))return;if(this.previousSugesstion){let x=this.previousSugesstion;var c=x.document!==r,u=x.line!==n.line;if(this.isSuggestionReusable(c,u,(d=i.selectedCompletionInfo)==null?void 0:d.text,x.selectedCompletion,x.fullLineCompletion,o,a))return this.updateSuggestion(x,n,o,r),[x.completionItem]}yield this.client.onReady();let v=(p=i.selectedCompletionInfo)==null?void 0:p.text,b=yield this.client.sendRequest("devsense/composeCompletion",{textDocument:{uri:r.uri.toString(!0)},selectedCompletion:v,position:{line:n.line,character:n.character}},s);if(s.isCancellationRequested&&this.telemetryData.completionCancelled++,s.isCancellationRequested||!b||!b.suggestions||!b.suggestions.length)return;let P;if(b.range){let x=b.range;P=cT(x)}let j=Date.now()-m,A=i.selectedCompletionInfo!==void 0&&r.getText(i.selectedCompletionInfo.range);A!==void 0&&a.endsWith(A)&&(a=a.slice(0,a.length-A.length));let D=b.suggestions.filter(x=>{var H=a+x.text;return!lT(H,r,n)&&!fT(H,r,n)}).map(x=>{var H=x.text,le=new it.Range(new it.Position(n.line,0),new it.Position(n.line,o.length));let Ne={measurements:{completionLength:H.trim().length,latencyMs:j,snippetsCount:x.snippetsCount,confidence:x.confidence,sequenceConfidence:x.sequenceConfidence}};return new it.InlineCompletionItem(new it.SnippetString(this.escapeSnippetString(a)+x.snippet),le,this.getPostCompletionCommand(Ne))}),O=D.length>0?D[0]:null;return this.previousSugesstion={fullLineCompletion:a+b.suggestions[0].text,fullLineCompletionSnippet:this.escapeSnippetString(a)+b.suggestions[0].snippet,completionItem:O,document:r,line:n.line,selectedCompletion:v},O!=null&&this.telemetryData.completionSent++,this.telemetryData.latency.push(j),[O]}catch(m){Wl(m)}})}updateSuggestion(r,n,i,s){var o=r.fullLineCompletion,a=new it.Range(new it.Position(n.line,0),new it.Position(n.line,i.length));r.completionItem.insertText=new it.SnippetString(r.fullLineCompletionSnippet),r.completionItem.range=a}escapeSnippetString(r){return r.replaceAll("$","\\$")}};var Vl=class{constructor(e){this.client=e}createNamedPipe(){return Q(this,null,function*(){return yield this.client.onReady(),yield this.client.sendRequest("devsense/createNamedPipe",{})})}};var KP=require("child_process"),Gf=require("fs"),Ay=require("os"),VP=require("vscode"),GP=Os(WP());var Oy=class extends Error{constructor(e,r,n){super(r),this.name=e,this.message=r,this.stack=n}};function zP(t){t.exception?Wl(new Oy(t.exception,t.message,t.stack),!1,{source:"language server",stack:t.stack,data:t.data}):Sn(t.event,{message:t.message})}var Ps=class extends GP.LanguageClient{constructor(e){super("IntelliPHP Server",Ps.serverOptions(e),Ps.clientOptions()),this.onTelemetry(r=>zP(r))}dispose(){return Q(this,null,function*(){yield this.stop()})}static serverOptions(e){let r=e.asAbsolutePath("out/server/intelliphp.ls"),n=r,i=[];if(e.extensionMode==VP.ExtensionMode.Development&&(0,Gf.existsSync)(`${r}.dll`))n="dotnet",i=[`${r}.dll`];else try{(0,Ay.platform)()!="win32"&&(0,Gf.chmodSync)(r,365),(0,Ay.platform)()=="darwin"&&(0,KP.execSync)(`codesign -s - "${r}"`)}catch(s){}return{run:{command:n,args:i,options:{env:{MALLOC_TRIM_THRESHOLD_:1e5}}},debug:{command:n,args:i.concat(["--debug"])}}}static clientOptions(){return{documentSelector:[{language:"php"}]}}};var Er=require("vscode");var dr=require("vscode");var xs=class extends di{constructor(r,n){super();this.context=r;this.id=n;this.majorVersion=xs.majorVersion(r)}show(){return Q(this,null,function*(){yield dr.window.withProgress({location:dr.ProgressLocation.Window},()=>Q(this,null,function*(){this.panel==null?(this.panel=dr.window.createWebviewPanel(this.id,this.title(),dr.ViewColumn.One,{enableScripts:!0,enableCommandUris:!0}),this.panel.onDidDispose(()=>{this.panel=void 0}),this.panel.webview.onDidReceiveMessage(r=>Q(this,null,function*(){return yield this.onMessage(r)})),this.panel.onDidChangeViewState(r=>Q(this,null,function*(){return yield this.onViewState()}))):this.panel.reveal(dr.ViewColumn.One),this.panel.webview.html=yield this.html()}))})}static hljsStyle(){switch(dr.window.activeColorTheme.kind){case dr.ColorThemeKind.Dark:case dr.ColorThemeKind.HighContrast:return"dark.min.css";case dr.ColorThemeKind.Light:return"default.min.css"}}onMessage(r){return Q(this,null,function*(){if(r&&typeof r.command=="string")switch(r.command){case"loaded":yield this.onViewState();break}})}onViewState(){return Q(this,null,function*(){})}postMessage(r){return Q(this,null,function*(){this.panel&&(yield this.panel.webview.postMessage(r))})}title(){return this.id}html(){return Q(this,null,function*(){let r=this.getUri("webviews","toolkit.min.js"),n=this.getUri("webviews","main.js"),i=this.getUri("webviews","main.css"),s=this.getUri("webviews",xs.hljsStyle());return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link href="${i}" rel="stylesheet" />
                <link href="${s}" rel="stylesheet" />
                <script type="module" src="${r}"><\/script>
                <script type="module" src="${n}"><\/script>
                <title>${this.title}</title>
            </head>
            <body>
                <div id='content'>
                    ${yield this.htmlBody()}
                </div>
            </body>
            </html>`})}htmlBody(){return Q(this,null,function*(){return""})}getUri(...r){return this.panel.webview.asWebviewUri(dr.Uri.joinPath(this.context.extensionUri,...r))}static majorVersion(r){let n=r.extension.packageJSON.version,i=n.split(".");return i.length>=2?`${i[0]}.${i[1]}`:n}dispose(){this.panel&&(this.panel.dispose(),this.panel=void 0),super.dispose()}};var K4="https://www.devsense.com/download/vscode?from=vscode",V4="https://www.devsense.com/purchase?from=vscode",XP="https://docs.devsense.com/vscode/editor/intelliphp?from=vscode",G4="https://marketplace.visualstudio.com/items?itemName=DEVSENSE.phptools-vscode",Pi=class extends xs{constructor(r,n){super(r,"intelliphp.webview.welcome");this.getclient=n;this.push(Er.commands.registerCommand("intelliphp.releasenotes",()=>Q(this,null,function*(){return this.show()})));let i=r.globalState,s=i.get("welcome.lastversion"),o=this.majorVersion;if(s!=o&&i.get("welcome.enabled")!=!1){let a=`${o}.`;sd("devsense.phptools-vscode")&&s!=a?i.update("welcome.lastversion",a):(i.update("welcome.lastversion",o),this.show())}ST(()=>this.onViewState())}static subscribe(r){return Q(this,null,function*(){n_(r)?Er.window.withProgress({location:Er.ProgressLocation.Notification,title:Ge.subscribe},()=>Q(this,null,function*(){let n=Er.Uri.from({scheme:"https",authority:"newsletter.devsense.com",path:"/subscription/form",query:""}),i=`EMAIL=${r}&l=eae87e6d-9c24-44ad-9ba5-998039565684&l=aeed3aa0-48e2-40a0-b297-0480d71572f9`;switch(yield i_(n,i)){case 200:Er.window.showInformationMessage("Thank you!");break;default:Er.window.showErrorMessage("Error was returned from the server, please try again later.");break}})):Er.window.showErrorMessage(Ge.invalidMail),Sn("subscribe newsletter (IntelliPHP)",{email:r})})}onMessage(r){return Q(this,null,function*(){if(r&&typeof r.command=="string")switch(r.command){case"shownews":this.context.globalState.update("welcome.enabled",!!r.value);break;case"buy":id(Er.Uri.parse(V4));break;case"activate":r.value&&(yield bT(this.context,r.value));break;case"activate-phptools":yield Er.commands.executeCommand("phptools.activate");break;case"changelog":id(Er.Uri.parse(XP),!0);break;case"subscribe":Pi.subscribe(r.email);break;default:Xf(Pi.prototype,this,"onMessage").call(this,r);break}Xf(Pi.prototype,this,"onMessage").call(this,r)})}onViewState(){return Q(this,null,function*(){yield this.postMessage({command:"l",data:{valid:yield pc(this.context)}})})}title(){return`${this.context.extension.packageJSON.displayName}: ${this.majorVersion}`}imgsrc(r){return this.getUri("webviews","welcome",r).toString()}htmlBody(){return Q(this,null,function*(){Sn("welcome view (IntelliPHP)");let r=yield pc(this.context),n=(yield zs(this.context))!=4731,i=yield hg(this.context),s=i?i<new Date?`Trial expired on ${i.toLocaleDateString()}`:`Trial expires on ${i.toLocaleDateString()}`:"",o;return sd("devsense.phptools-vscode")?o=`
                <div class='row banner'>
                    <div class="column">
                        <p id='txt-activated' class='hidden'>
                            IntelliPHP active \u{1F389} <b>${s}</b>
                        </p>
                        <p id='txt-not-activated' class='hidden'>
                            Buy PHP Tools for VS Code to use IntelliPHP.
                        </p>
                    </div>
                    <div class="column text-right">
                        <vscode-button id='btn-activate-phptools' class='v-middle'>${r?Ge.reactivate:Ge.activate} \u{1F513}</vscode-button>
                    </div>
                </div>
            `:o=`
                <div class='row banner'>
                    <div class="column">
                        <p id='txt-activated' class='hidden'>
                            Product is activated! <b>${s}</b>
                        </p>
                        <p id='txt-not-activated' class='hidden'>
                            Buy PHP Tools for VS Code to use IntelliPHP.
                        </p>
                    </div>
                    <div class="column text-right">
                        <vscode-text-field id='txt-license' placeholder="Enter License Key ..." class='v-middle'></vscode-text-field>
                        <vscode-button id='btn-activate' class='v-middle'>${r?Ge.reactivate:Ge.activate} \u{1F513}</vscode-button>
                    </div>
                </div>
            `,`
<table style='border:0;width:100%;'>
    <tr>
        <td>
            <h1>${Ge.webview_title} (${this.majorVersion})</h1>
            <span id='subtitle' class=''>${Ge.description} </span>
        </td>
        <td class='text-right'>
            <br/>
            <vscode-button id='btn-buy'>${n?`${Ge.renew} \u27F3`:`${Ge.buy} \u{1F4E6}`}</vscode-button>
        </td>
    </tr>
</table>

<vscode-divider></vscode-divider>
${o}
<div class='row'>
    <div class='column-2'>
        <h2>Your Local AI</h2>
        <p>IntelliPHP runs locally, without Internet connection. Your code never leaves your machine. It is your own personal inline suggestions assistant.</p>
        <br/>
        <p>Full statement suggestions are shown as you type, confirmed with <code>TAB</code> key.</p>
    </div>
    <div class='column-2 text-right'>
        <h2>Suggestions</h2>
        <img src='${this.imgsrc("suggest.png")}' />
    </div>
</div>
<div class='row'>
    <div class='column-2'>
        <h2>Fast</h2>
        <p>Your local AI is fast. Get suggestions as you type in milliseconds. IntelliPHP is memory efficient and eager to help.</p>
        <br/>
        <p>Code completion with <a href='${G4}'>PHP extension</a> gets better. Most probable completion is pre-selected for even less typing.</p>
    </div>
    <div class='column-2 text-right'>
        <h2>Pre-Select</h2>
        <img src='${this.imgsrc("preselect.png")}' />
    </div>
</div>

<div class='above-footer row'>
    <div class="column">
        <vscode-button id='btn-changelog'>${Ge.showmore}</vscode-button>
    </div>
    <div class="column text-right">
        <vscode-text-field id='txt-subscribe' placeholder="e-mail ..." class='v-middle'></vscode-text-field>
        <vscode-button id='btn-subscribe' class='v-middle'>${Ge.subscribe}</vscode-button>    
    </div>
</div>

<vscode-divider></vscode-divider>

<div id='footer' class='row'>
    <div class="column">
        <vscode-checkbox id='shownews' checked>${Ge.webview_welcome_showafterupdate}</vscode-checkbox>
    </div>
    <div class="column text-right">
        <vscode-link href='${K4}'>${Ge.webview_welcome_allnews}</vscode-link><br/>
        <vscode-link href='${XP}'>${Ge.webview_welcome_more}</vscode-link>
    </div>
</div>
`})}};var Ny;function X4(t){return Q(this,null,function*(){return vT(t),w0(t),t.subscriptions.push(Ny=new ky(t)),yield Ny.start(),new Vl(Ny.client)})}function Y4(){return Q(this,null,function*(){Sn("extension unloaded (IntelliPHP)")})}var ky=class extends di{constructor(r){super();this.push(this.log=YP.window.createOutputChannel("IntelliPHP"),this.client=new Ps(r),new Kl(r,this.client),new Pi(r,()=>this.client))}start(){return Q(this,null,function*(){yield this.client.start()})}};0&&(module.exports={activate,deactivate});
/*!
 * RSA library for Node.js
 *
 * Author: rzcoder
 * License MIT
 */
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
