(()=>{"use strict";const e=["getState","getUrl","openInEditor","cssMirrorContent","ready","setState","telemetry","websocket","getVscodeSettings","copyText","focusEditor","focusEditorGroup","openUrl","toggleScreencast","toggleInspect","replayConsoleMessages","devtoolsConnection","toggleCSSMirrorContent","writeToClipboard","readClipboard"];function t(e,t,s){e(`${t}:${JSON.stringify(s)}`)}const s=acquireVsCodeApi();new class{constructor(t){this.devtoolsActionReceived=!1,this.fallbackAttempt=!1,t.addEventListener("DOMContentLoaded",(()=>{this.toolsFrameWindow=document.getElementById("devtools-frame").contentWindow,this.toolsFrameWindow?.addEventListener("load",(()=>{this.devtoolsActionReceived=!0})),this.errorMessageDiv=document.getElementById("error-message")}));const s=this.onMessageFromChannel.bind(this);t.addEventListener("message",(t=>{t.origin.startsWith("vscode-webview://")?this.toolsFrameWindow&&(function(t,s){for(const o of e)if(t.substr(0,o.length)===o&&":"===t[o.length])return s(o,t.substr(o.length+1)),!0}(t.data,s),t.preventDefault(),t.stopImmediatePropagation()):(this.onMessageFromFrame(t.data.method,t.data.args),this.devtoolsActionReceived=!0)}),!0),this.sendReady(),setTimeout((()=>this.showLoadingError()),1e4)}onMessageFromFrame(e,t){switch(e){case"openInEditor":const[e,s,o,r]=t;return this.openInEditor(e,s,o,r),!0;case"cssMirrorContent":const[n=e,a]=t;return this.cssMirrorContent(n,a),!0;case"openInNewTab":return this.openInNewTab(t[0]),!0;case"recordEnumeratedHistogram":const[i,c,d]=t;return this.recordEnumeratedHistogram(i,c,d),!0;case"recordPerformanceHistogram":const[l,g]=t;return this.recordPerformanceHistogram(l,g),!0;case"reportError":const[m,h,p,u,M,C,v]=t;return this.reportError(m,h,p,u,M,C,v),!0;case"sendMessageToBackend":const[S]=t;return this.sendMessageToBackend(S),!0;case"toggleScreencast":return this.toggleScreencast(),!0;case"replayConsoleMessages":return this.replayConsoleMessages(),!0;case"toggleCSSMirrorContent":const[f]=t;return this.toggleCSSMirrorContent(f),!0;default:return!1}}onMessageFromChannel(e,t){if("websocket"!==e)return!1;const{event:s,message:o}=JSON.parse(t);return this.fireWebSocketCallback(s,o),!0}sendReady(){t((e=>s.postMessage(e,"*")),"ready")}recordEnumeratedHistogram(e,t,s){this.sendTelemetry({data:t,event:"enumerated",name:e})}recordPerformanceHistogram(e,t){this.sendTelemetry({data:t,event:"performance",name:e})}reportError(e,t,s,o,r,n,a){const i={message:t,stack:s,filename:o,sourceUrl:r,lineno:n,colno:a};this.sendTelemetry({data:i,event:"error",name:e})}openInEditor(e,o,r,n){t((e=>s.postMessage(e,"*")),"openInEditor",{column:r,line:o,url:e,ignoreTabChanges:n})}toggleScreencast(){t((e=>s.postMessage(e,"*")),"toggleScreencast")}toggleCSSMirrorContent(e){t((e=>s.postMessage(e,"*")),"toggleCSSMirrorContent",{isEnabled:e})}replayConsoleMessages(){t((e=>s.postMessage(e,"*")),"replayConsoleMessages")}cssMirrorContent(e,o){t((e=>s.postMessage(e,"*")),"cssMirrorContent",{url:e,newContent:o})}openInNewTab(e){t((e=>s.postMessage(e,"*")),"openUrl",{url:e})}sendMessageToBackend(e){t((e=>s.postMessage(e,"*")),"websocket",{message:e})}sendTelemetry(e){t((e=>s.postMessage(e,"*")),"telemetry",e)}sendDevToolsConnectionStatus(e){t((e=>s.postMessage(e,"*")),"devtoolsConnection",e)}fireWebSocketCallback(e,t){this.toolsFrameWindow&&"message"===e&&this.toolsFrameWindow.postMessage({method:"dispatchMessage",args:[t]},"*")}showLoadingError(){if(this.devtoolsActionReceived||!this.errorMessageDiv)return this.sendDevToolsConnectionStatus(!0),void(this.fallbackAttempt=!1);this.fallbackAttempt?this.errorMessageDiv.classList.remove("hidden"):(this.sendDevToolsConnectionStatus(!1),this.fallbackAttempt=!0)}}(window)})();
//# sourceMappingURL=host.bundle.js.map